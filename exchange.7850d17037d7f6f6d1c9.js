(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{2001:function(e,t,a){"use strict";var r=a(0),n=a.n(r),s=a(2028),o=a.n(s),i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),i(t,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?n.a.createElement(o.a,{id:this.props.id,className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):n.a.createElement(this.props.component)}}]),t}();l.defaultProps={component:"span",enterTimeout:2e3},t.a=l},2013:function(e,t,a){"use strict";var r=a(0),n=a.n(r),s=a(3),o=a.n(s),i=a(12),l=a(39),c=a(46),u=a(9),p=a.n(u),h=a(354),d=a(32),m=a(13),f=a.n(m),g=a(5),b=a.n(g),y=a(121),v=a(1),_=a.n(v),k=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(e){function t(){return E(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,n.a.Component),k(t,[{key:"render",value:function(){return 0!==this.props.assets.length&&this.props.value?n.a.createElement(h.a,{entries:this.props.assets.map(function(e){return e&&e.get("symbol")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get("symbol")&&(e[t.get("symbol")]=t),e},{}),singleEntry:this.props.assets[0]?n.a.createElement(d.a,{asset:this.props.assets[0].get("id"),amount:0,hide_amount:!0}):null,value:"",onChange:this.props.onChange}):null}}]),t}();C.propTypes={value:_.a.string,onChange:_.a.func},C=Object(y.a)(C,{asList:!0});var A=function(e){function t(){return E(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,n.a.Component),k(t,[{key:"getAsset",value:function(){return this.props.asset}},{key:"getError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.assetInput,t=this.props.error;return t||!e||this.getNameType(e)||(t=p.a.translate("explorer.asset.invalid",{name:e})),t}},{key:"getNameType",value:function(e){return e?i.ChainValidation.is_valid_symbol_error(e,!0)?null:"symbol":null}},{key:"onInputChanged",value:function(e){var t=e.target.value.trim().substr(0,16).toUpperCase();this.props.onChange&&t!==this.props.assetInput&&this.props.onChange(t)}},{key:"onKeyDown",value:function(e){13===e.keyCode&&(this.onFound(e),this.onAction(e))}},{key:"componentDidMount",value:function(){this.props.onFound&&this.props.asset&&this.props.onFound(this.props.asset)}},{key:"componentWillReceiveProps",value:function(e){this.props.onFound&&e.asset!==this.props.asset&&this.props.onFound(e.asset)}},{key:"onFound",value:function(e){e.preventDefault(),!this.props.onFound||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onFound(this.props.asset)}},{key:"onAssetSelect",value:function(e){e&&(this.props.onFound(e),this.props.onChange(e.get("symbol")))}},{key:"onAction",value:function(e){e.preventDefault(),!this.props.onAction||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onAction(this.props.asset)}},{key:"render",value:function(){var e=this.props,t=e.disabled,a=e.noLabel,r=this.getError(),s=void 0;t||(this.props.asset?s=this.props.asset.get("symbol"):!r&&this.props.assetInput&&(r=p.a.translate("explorer.asset.not_found",{name:this.props.assetInput})));var i=b()("button",{disabled:!this.props.asset||r||this.props.disableActionButton});return n.a.createElement("div",{className:"asset-selector",style:this.props.style},n.a.createElement("div",null,n.a.createElement("div",{className:"header-area"},r||a?null:n.a.createElement("label",{className:"right-label"},"Â  ",n.a.createElement("span",null,s)),n.a.createElement(o.a,{component:"label",content:this.props.label})),n.a.createElement("div",{className:"input-area"},n.a.createElement("div",{className:"inline-label input-wrapper"},n.a.createElement("input",{style:this.props.inputStyle,disabled:this.props.disabled,type:"text",value:this.props.assetInput||"",placeholder:this.props.placeholder||p.a.translate("explorer.assets.symbol"),ref:"user_input",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),n.a.createElement("div",{className:"form-label select floating-dropdown"},this.props.asset?n.a.createElement(C,{ref:this.props.refCallback,value:this.props.asset.get("symbol"),assets:f.a.List(this.props.assets),onChange:this.onAssetSelect.bind(this)}):null),this.props.children,this.props.onAction?n.a.createElement("button",{className:i,onClick:this.onAction.bind(this)},n.a.createElement(o.a,{content:this.props.action_label})):null)),n.a.createElement("div",{className:"error-area",style:{paddingBottom:"10px"}},n.a.createElement("span",{style:{wordBreak:"break-all"}},r))))}}]),t}();A.propTypes={label:_.a.string,error:_.a.string,placeholder:_.a.string,onChange:_.a.func,onFound:_.a.func,assetInput:_.a.string,asset:l.a.ChainAsset,tabIndex:_.a.number,disableActionButton:_.a.bool},A.defaultProps={disabled:!1},t.a=Object(c.a)(A)},2016:function(e,t,a){"use strict";a.d(t,"b",function(){return O}),a.d(t,"a",function(){return P});var r=a(0),n=a.n(r),s=a(32),o=a(39),i=a(46),l=a(121),c=a(14),u=a(28),p=a(179),h=a(3),d=a.n(h),m=a(9),f=a.n(m),g=a(53),b=a.n(g),y=a(565),v=a(65),_=a(11),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},E=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function w(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=function(e){function t(e){return S(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return A(t,y["a"]),E(t,[{key:"componentDidMount",value:function(){b.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||!c.a.are_equal_shallow(e.pulsate,this.props.pulsate)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:"getValue",value:function(){var e=this.props,t=e.amount,a=e.toAsset,r=e.fromAsset,n=e.fullPrecision,s=e.allMarketStats,o=e.coreAsset;return v.a.convertValue(t,a,r,s,o,n)}},{key:"render",value:function(){var e=this.props,t=e.amount,a=e.toAsset,r=e.fromAsset,o=e.fullPrecision,i=w(e,["amount","toAsset","fromAsset","fullPrecision"]),l=a.get("id"),u=a.get("symbol");o||(t=c.a.get_asset_amount(t,r));var p=this.getValue();return p||0===p?n.a.createElement(s.a,k({noPrefix:!0,amount:p,asset:l,decimalOffset:-1!==u.indexOf("BTC")?4:this.props.fullDecimals?0:this.props.noDecimals?a.get("precision"):a.get("precision")-2},i)):n.a.createElement(_.Tooltip,{placement:"bottom",title:f.a.translate("tooltip.no_price")},n.a.createElement("div",{className:"tooltip inline-block",style:{fontSize:"0.9rem"}},n.a.createElement(d.a,{content:"account.no_price"})))}}]),t}();x.defaultProps={fullPrecision:!0,noDecimals:!1,fullDecimals:!1,hide_asset:!1},x=Object(l.a)(x,{propNames:["toAsset","fromAsset","coreAsset"],defaultProps:{toAsset:"1.3.0",coreAsset:"1.3.0"}});var O=function(e){function t(){return S(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,n.a.Component),E(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,a=w(e,["refCallback"]);return n.a.createElement(x,k({},a,{ref:t}))}}]),t}();O=Object(u.a)(O,{listenTo:function(){return[p.a]},getProps:function(){return{allMarketStats:p.a.getState().allMarketStats}}});var P=function(e){function t(){return S(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,n.a.Component),E(t,[{key:"render",value:function(){var e=this.props,t=e.balance,a=w(e,["balance"]),r=!!t.getIn(["balance","amount"]),s=Number(r?t.getIn(["balance","amount"]):t.get("balance")),o=r?t.getIn(["balance","asset_id"]):t.get("asset_type");return isNaN(s)?n.a.createElement("span",null,"--"):n.a.createElement(O,k({amount:s,fromAsset:o,noDecimals:!0},a))}}]),t}();P.propTypes={balance:o.a.ChainObject.isRequired},P=Object(i.a)(P,{keep_updating:!0})},2024:function(e,t,a){"use strict";var r=a(0),n=a.n(r),s=a(14),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.price,a=e.preFormattedPrice,r=e.quote,o=e.base;if(!t&&!a)return null;var i=a||s.a.price_to_text(t,r,o);return i.full>=1?n.a.createElement("span",null,n.a.createElement("span",{className:"price-integer"},i.int,"."),i.dec?n.a.createElement("span",{className:"price-integer"},i.dec):null,i.trailing?n.a.createElement("span",{className:"price-decimal"},i.trailing):null):i.full>=.1?n.a.createElement("span",null,n.a.createElement("span",{className:"price-decimal"},i.int,"."),i.dec?n.a.createElement("span",{className:"price-integer"},i.dec):null,i.trailing?n.a.createElement("span",{className:"price-decimal"},i.trailing):null):n.a.createElement("span",null,n.a.createElement("span",{className:"price-decimal"},i.int,"."),i.dec?n.a.createElement("span",{className:"price-decimal"},i.dec):null,i.trailing?n.a.createElement("span",{className:"price-integer"},i.trailing):null)}}]),t}();t.a=i},2036:function(e,t,a){"use strict";a.d(t,"a",function(){return v}),a.d(t,"b",function(){return b});var r=a(0),n=a.n(r),s=a(121),o=a(5),i=a.n(o),l=a(179),c=a(28),u=a(14),p=a(123),h=a(65),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(e){m(this,t);var a=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.statsInterval=null;var r=h.a.getMarketName(e.base,e.quote).marketName;return a.state={marketName:r},a}return g(t,n.a.Component),d(t,[{key:"_checkStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{close:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{close:{}};return e.volumeBase!==t.volumeBase||!u.a.are_equal_shallow(e.close&&e.close.base,t.close&&t.close.base)||!u.a.are_equal_shallow(e.close&&e.close.quote,t.close&&t.close.quote)}},{key:"shouldComponentUpdate",value:function(e){return this._checkStats(e.allMarketStats.get(this.state.marketName),this.props.allMarketStats.get(this.state.marketName))||e.base.get("id")!==this.props.base.get("id")||e.quote.get("id")!==this.props.quote.get("id")}},{key:"componentWillUnmount",value:function(){this.statsInterval&&this.statsInterval()}}]),t}(),y=function(e){function t(e){return m(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return g(t,b),d(t,[{key:"shouldComponentUpdate",value:function(e){return function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,a,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)}},{key:"render",value:function(){var e=this.props.allMarketStats,t=this.state.marketName,a=e.get(t),r=a&&a.price?a.price:null;return n.a.createElement("span",{className:i()("",this.props.className)},r?n.a.createElement(p.a,{base_amount:r.base.amount,base_asset:r.base.asset_id,quote_amount:r.quote.amount,quote_asset:r.quote.asset_id,force_direction:this.props.force_direction,hide_symbols:this.props.hide_symbols}):"n/a")}}]),t}();y=Object(s.a)(y,{propNames:["quote","base"]});var v=function(e){function t(){return m(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,n.a.Component),d(t,[{key:"render",value:function(){return n.a.createElement(y,this.props)}}]),t}();v=Object(c.a)(v,{listenTo:function(){return[l.a]},getProps:function(){return{allMarketStats:l.a.getState().allMarketStats}}})},2046:function(e,t,a){"use strict";var r=a(0),n=a.n(r),s=a(3),o=a.n(s),i=a(27),l=a(14),c=a(46),u=a(39),p=a(53),h=a.n(p),d=a(9),m=a.n(d),f=a(80),g=a(570),b=a(131),y=a(20),v=a(41),_=a(42),k=a(354),E=a(28),w=a(25),S=a(23),C=a(456),A=a.n(C),x=a(11),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},P=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var M=function(e){function t(e){T(this,t);var a=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={receiveAmount:0,depositLimit:0,sendAmount:0,toAddress:f.a.getLast(e.walletType),withdrawValue:"",amountError:null,inputAmount:0,receiveLoading:!1,limitLoading:!0,apiError:!1},a._validateAddress(a.state.toAddress,e),a.deposit_address_cache=new g.a,a}return B(t,n.a.Component),P(t,[{key:"onClose",value:function(){this.props.hideModal()}},{key:"componentWillMount",value:function(){this._getDepositAddress()}},{key:"componentDidMount",value:function(){this._getDepositLimit(),this._estimateOutput()}},{key:"componentWillReceiveProps",value:function(e){e.inputCoinType===this.props.inputCoinType&&e.outputCoinType===this.props.outputCoinType||(this._getDepositLimit(e),this._estimateOutput(e),this._getDepositAddress(e))}},{key:"shouldComponentUpdate",value:function(e,t){return e.inputCoinType!==this.props.inputCoinType||e.outputCoinType!==this.props.outputCoinType||e.sender!==this.props.sender||e.asset!==this.props.asset||e.isAvailable!==this.props.isAvailable||e.isDown!==this.props.isDown||!l.a.are_equal_shallow(t,this.state)}},{key:"_getDepositLimit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({limitLoading:!0}),Object(f.k)(t.inputCoinType,t.outputCoinType).then(function(t){e.setState({depositLimit:t.depositLimit,limitLoading:!1})}).catch(function(t){console.log("deposit limit error:",t),e.setState({depositLimit:null,limitLoading:!1})})}},{key:"_onAmountChange",value:function(e,t){var a=new RegExp(/[[:digit:]]/),r=t.target;switch(a.test(r.value)||(r.value=r.value.replace(/[^0-9.]/g,"")),"."==r.value.charAt(0)&&(r.value="0."),r.value.charAt(r.value.length)!=r.value.search(".")&&r.value.substr(1),r.value=l.a.limitByPrecision(r.value,8),e){case"input":this.setState({inputAmount:r.value},this._estimateOutput.bind(this));break;case"output":this.setState({outputAmount:r.value},this._estimateInput.bind(this))}}},{key:"_estimateOutput",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:0,sendAmount:this.state.inputAmount}),this.state.inputAmount&&(this.setState({receiveLoading:!0}),Object(f.c)(this.state.inputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,receiveAmount:t.outputAmount,receiveLoading:!1})}).catch(function(t){console.log("receive amount err:",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:"_estimateInput",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:this.state.outputAmount,sendAmount:0}),this.state.outputAmount&&(this.setState({receiveLoading:!0}),Object(f.b)(this.state.outputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,sendAmount:l.a.limitByPrecision(t.inputAmount,8),receiveLoading:!1})}).catch(function(t){console.log("send amount err:",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:"_getDepositAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(e.inputCoinType){this.setState({receive_address:null}),Object(f.l)(this._getDepositObject(e))}}},{key:"_getDepositObject",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{inputCoinType:t.inputCoinType.toLowerCase(),outputCoinType:t.outputCoinType.toLowerCase(),outputAddress:t.sender.get("name"),url:_.b.BASE,stateCallback:function(a){e.addDepositAddress(t.inputCoinType.toLowerCase(),t.outputCoinType.toLowerCase(),t.sender.get("name"),a)}}}},{key:"addDepositAddress",value:function(e,t,a,r){this.deposit_address_cache.cacheInputAddress("blocktrades",a,e,t,r.address,r.memo),this.setState({receive_address:r})}},{key:"componentDidUpdate",value:function(){h.a.rebuild()}},{key:"_validateAddress",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(f.m)({walletType:a.walletType,newAddress:e}).then(function(a){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:a})}).catch(function(e){console.error("Error when validating address:",e)})}},{key:"_openRegistrarSite",value:function(e){e.preventDefault(),window.open(w.a.site_registr,"_blank").opener=null}},{key:"_onDropDownSelect",value:function(e){S.a.changeViewSetting({preferredBridge:e})}},{key:"onBlockTradesContact",value:function(){console.log("Open New Tab"),window.open("https://www.blocktrades.us/contact","_blank").focus()}},{key:"_renderDeposit",value:function(){var e=l.a.replaceName(this.props.asset),t=e.name,a=e.prefix,r=this.state,s=r.receive_address,i=r.apiError,c=s&&"memo"in s&&s.memo,u=s&&s.address||"",p=n.a.createElement("div",{className:"QR",style:{textAlign:"center"}},n.a.createElement(A.a,{size:140,value:u})),h=Object.keys(this.props.bridges.toJS()),d=this.props.inputCoinType.toUpperCase(),f=(a||"")+t,g=(this.state.receiveAmount/this.state.inputAmount).toFixed(4),_=f+"/"+d,E=this.state.inputAmount>parseFloat(this.state.depositLimit)||this.state.sendAmount>parseFloat(this.state.depositLimit),w=E?{border:"1px solid #a94442"}:null;return n.a.createElement("div",{className:"modal__body",style:{paddingTop:0}},n.a.createElement("div",{className:"container-row"},n.a.createElement("label",{className:"left-label"},n.a.createElement(o.a,{content:"modal.buy.asset"})),n.a.createElement("div",{className:"inline-label input-wrapper"},n.a.createElement("input",{disabled:!0,type:"text",value:f}))),n.a.createElement("div",{className:"container-row"},n.a.createElement("div",{className:"grid-block"},n.a.createElement("label",{className:"left-label"},n.a.createElement(o.a,{content:"modal.buy.bridge"})),n.a.createElement(x.Tooltip,{title:m.a.translate("tooltip.bridge_TRADE")},n.a.createElement("span",{className:"inline-block tooltip",onClick:this.onBlockTradesContact.bind(this)},"Â ",n.a.createElement(y.a,{style:{position:"relative",top:0},name:"question-circle",title:"icons.question_circle"})))),n.a.createElement("div",{className:"inline-label input-wrapper"},n.a.createElement("input",{disabled:!0,type:"text",defaultValue:"BLOCKTRADES"})," ")),n.a.createElement("span",{style:i?{display:"none"}:{display:""}},n.a.createElement("div",{className:"container-row double-row"},n.a.createElement("div",{className:"no-margin no-padding"},n.a.createElement("div",{className:"small-6",style:{paddingRight:10}},n.a.createElement("div",{className:"grid-block"},n.a.createElement("label",{className:"left-label"},n.a.createElement(o.a,{content:"transfer.send"})),E?n.a.createElement(x.Tooltip,{title:m.a.translate("tooltip.over_limit")},n.a.createElement("div",{className:"error-msg inline-block tooltip"},n.a.createElement(o.a,{content:"gateway.over_limit"}),"Â ",n.a.createElement(y.a,{name:"question-circle",title:"icons.question_circle"}))):null),n.a.createElement("div",{className:"inline-label input-wrapper"},n.a.createElement("input",{style:w,type:"text",value:this.state.sendAmount,onInput:this._onAmountChange.bind(this,"input")}),n.a.createElement("div",{className:"form-label select floating-dropdown"},n.a.createElement(k.a,{entries:h,values:h.reduce(function(e,t){return t&&(e[t]=t),e},{}),singleEntry:h[0],value:this.props.preferredBridge||h[0],onChange:this._onDropDownSelect,upperCase:!0})))),n.a.createElement("div",{className:"small-6",style:{paddingLeft:10}},n.a.createElement("label",{className:"left-label"},n.a.createElement(o.a,{content:"gateway.deposit_limit"})),n.a.createElement("div",{className:"inline-label input-wrapper"},n.a.createElement("input",{disabled:!0,type:"number",value:this.state.depositLimit&&parseFloat(this.state.depositLimit).toFixed(4)||0}),n.a.createElement("div",{className:"input-right-symbol"},d))))),n.a.createElement("div",{className:"container-row double-row"},n.a.createElement("div",{className:"no-margin no-padding"},n.a.createElement("div",{className:"small-6",style:{paddingRight:10}},n.a.createElement("label",{className:"left-label"},n.a.createElement(o.a,{content:"exchange.receive"})),n.a.createElement("div",{className:"inline-label input-wrapper"},n.a.createElement("input",{style:w,type:"text",value:this.state.receiveAmount,onInput:this._onAmountChange.bind(this,"output")}),n.a.createElement("div",{className:"input-right-symbol"},f))),n.a.createElement("div",{className:"small-6",style:{paddingLeft:10}},n.a.createElement("div",{className:"grid-block"},n.a.createElement("label",{className:"left-label"},n.a.createElement(o.a,{content:"exchange.price"}),"Â Â ",this.state.receiveLoading?n.a.createElement(o.a,{content:"footer.loading"}):"")),n.a.createElement("div",{className:"inline-label input-wrapper"},n.a.createElement("input",{disabled:!0,type:"number",value:E?0:g}),n.a.createElement("div",{className:"input-right-symbol"},_))))),u?n.a.createElement("div",{className:"container-row"},c?null:p,n.a.createElement("div",{className:"grid-block"},n.a.createElement("div",{className:"copyIcon"},n.a.createElement(b.a,{text:u,className:"copyIcon"})),n.a.createElement("div",null,n.a.createElement(o.a,{component:"div",style:{fontSize:"0.8rem",fontWeight:"bold",paddingBottom:"0.3rem"},content:"gateway.purchase_notice",inputAsset:d,outputAsset:f}),n.a.createElement("div",{className:"modal__highlight"},u))),c?n.a.createElement("div",{className:"grid-block",style:{marginTop:"10px"}},n.a.createElement("div",{className:"copyIcon"},n.a.createElement(b.a,{text:s.memo,className:"copyIcon"})),n.a.createElement("div",null,n.a.createElement(o.a,{unsafe:!0,content:"gateway.purchase_notice_memo",component:"div",style:{fontSize:"0.8rem",fontWeight:"bold",paddingBottom:"0.3rem"}}),n.a.createElement("div",{className:"modal__highlight"},s.memo))):null):n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement(v.a,{type:"three-bounce"}))))}},{key:"_renderCurrentBalance",value:function(){var e=this,t=l.a.replaceName(this.props.asset).name,a="deposit"===this.props.action,r=this.props.balances.find(function(t){return t&&t.get("asset_type")===e.props.asset.get("id")}),s=r?new i.a({asset_id:r.get("asset_type"),precision:this.props.asset.get("precision"),amount:r.get("balance")}):null,o=a?n.a.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},t):n.a.createElement(x.Tooltip,{placement:"right",title:m.a.translate("tooltip.withdraw_full")},n.a.createElement("button",{className:"button",style:{border:"2px solid black",borderLeft:"none"},onClick:this._updateAmount.bind(this,r?parseInt(r.get("balance"),10):0)},n.a.createElement(y.a,{name:"clippy",title:"icons.clippy.withdraw_full"})));return n.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},n.a.createElement("label",{style:{fontSize:"1rem"}},m.a.translate("gateway.balance_asset",{asset:t}),":",n.a.createElement("span",{className:"inline-label"},n.a.createElement("input",{disabled:!0,style:{color:"black",border:"2px solid black",padding:10,width:"100%"},value:s?s.getAmount({real:!0}):0}),o)))}},{key:"render",value:function(){return this.props.asset?n.a.createElement("div",{className:"grid-block vertical no-overflow"},this.props.isDown?n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement(o.a,{className:"txtlabel cancel",content:"gateway.unavailable_TRADE",component:"p"})):this.props.isAvailable?this._renderDeposit():n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement(o.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"p"}))):null}}]),t}();M.propTypes={sender:u.a.ChainAccount.isRequired,asset:u.a.ChainAsset.isRequired},M=Object(c.a)(M);var F=function(e){function t(){return T(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B(t,n.a.Component),P(t,[{key:"render",value:function(){var e=this.props,t=e.preferredBridge,a=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["preferredBridge"]),r=this.props.bridges.get(this.props.preferredBridge);return r||(t=(r=this.props.bridges.first()).inputCoinType),n.a.createElement(M,O({hideModal:this.props.hideModal},a,{preferredBridge:t},r.toJS()))}}]),t}();F=Object(E.a)(F,{listenTo:function(){return[w.a]},getProps:function(){return{preferredBridge:w.a.getState().viewSettings.get("preferredBridge","btc")}}});var j=function(e){function t(){return T(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return B(t,n.a.Component),P(t,[{key:"render",value:function(){return this.props.bridges?n.a.createElement(x.Modal,{title:m.a.translate("modal.buy.title"),visible:this.props.visible,onCancel:this.props.hideModal,footer:[n.a.createElement(x.Button,{key:"cancel",onClick:this.props.hideModal},m.a.translate("modal.close"))]},n.a.createElement(F,O({},this.props,{open:this.props.visible}))):null}}]),t}();t.a=j},2057:function(e,t,a){"use strict";var r=a(322),n=a(0),s=a.n(n),o=a(13),i=a.n(o),l=a(2006),c=a.n(l),u=a(14),p=a(3),h=a.n(p),d=a(38),m=a(28),f=a(32),g=a(121),b=a(39),y=a(46),v=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var _=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),v(t,[{key:"render",value:function(){return this.props.account?s.a.createElement("span",null,this.props.account.get("name")):null}}]),t}();_.propTypes={account:b.a.ChainObject.isRequired},_.defaultProps={autosubscribe:!1};var k=Object(y.a)(_),E=a(20),w=a(88),S=a(23),C=a(2314),A=a(11),x=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var O=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.statsInterval=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),x(t,[{key:"_onClick",value:function(e){"/market/"+e!==this.props.location.pathname&&(w.a.switchMarket(),this.props.history.push("/market/"+e))}},{key:"componentDidMount",value:function(){this.statsChecked=new Date,this.statsInterval=w.a.getMarketStatsInterval(35e3,this.props.base,this.props.quote)}},{key:"componentWillUnmount",value:function(){this.statsInterval&&this.statsInterval()}},{key:"shouldComponentUpdate",value:function(e){return!u.a.are_equal_shallow(e,this.props)}},{key:"_onStar",value:function(e,t,a){a.preventDefault(),this.props.starred?S.a.removeStarMarket(e,t):S.a.addStarMarket(e,t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.quote,r=t.base,n=(t.noSymbols,t.stats),o=t.starred;if(!a||!r)return null;var i=a.get("symbol")+"_"+r.get("symbol"),l=a.get("symbol")+":"+r.get("symbol"),c=this.props.getDynamicObject(a.get("dynamic_asset_data_id")),p=this.props.getDynamicObject(r.get("dynamic_asset_data_id")),h=u.a.convertPrice(a,r),d={};this.props.leftAlign&&(d.textAlign="left");var m="button outline",g=null;this.props.compact&&(m+=" no-margin",g={marginBottom:0,fontSize:"0.75rem",padding:"4px 10px",borderRadius:"0px",letterSpacing:"0.05rem"});var b=this.props.columns.map(function(t){switch(t.name){case"star":var d=o?"gold-star":"grey-star";return s.a.createElement("td",{onClick:e._onStar.bind(e,a.get("symbol"),r.get("symbol")),key:t.index},s.a.createElement(E.a,{className:d,name:"fi-star",title:"icons.fi_star.symbol"}));case"vol":var b=n?n.volumeBase:0;return s.a.createElement("td",{onClick:e._onClick.bind(e,i),className:"text-right",key:t.index},u.a.format_volume(b));case"change":var y=u.a.format_number(n&&n.change?n.change:0,2),v="0.00"===y?"":y>0?"change-up":"change-down";return s.a.createElement("td",{onClick:e._onClick.bind(e,i),className:"text-right "+v,key:t.index},y+"%");case"marketName":return s.a.createElement("td",{onClick:e._onClick.bind(e,i),key:t.index},s.a.createElement("div",{className:m,style:g},l));case"market":return s.a.createElement("td",{onClick:e._onClick.bind(e,i),key:t.index},e.props.name);case"price":var _=n&&n.price?n.price.toReal():n&&n.close&&n.close.quote.amount&&n.close.base.amount?u.a.get_asset_price(n.close.quote.amount,a,n.close.base.amount,r,!0):u.a.get_asset_price(h.quote.amount,a,h.base.amount,r,!0),w=6;return-1!==["BTC","OPEN.BTC","TRADE.BTC","GOLD","SILVER"].indexOf(r.get("symbol"))&&(w=8),s.a.createElement("td",{onClick:e._onClick.bind(e,i),className:"text-right",key:t.index},u.a.format_number(_,_>1e3?0:_>10?2:w));case"quoteSupply":return s.a.createElement("td",{onClick:e._onClick.bind(e,i),key:t.index},c?s.a.createElement(f.a,{style:{fontWeight:"bold"},amount:parseInt(c.get("current_supply"),10),asset:a.get("id")}):null);case"baseSupply":return s.a.createElement("td",{onClick:e._onClick.bind(e,i),key:t.index},p?s.a.createElement(f.a,{style:{fontWeight:"bold"},amount:parseInt(p.get("current_supply"),10),asset:r.get("id")}):null);case"issuer":return s.a.createElement("td",{onClick:e._onClick.bind(e,i),key:t.index},s.a.createElement(k,{account:a.get("issuer")}));case"add":return s.a.createElement("td",{style:{textAlign:"right"},key:t.index,onClick:e.props.onCheckMarket.bind(e,i)},s.a.createElement(A.Tooltip,{title:e.props.isDefault?"This market is a default market and cannot be removed":null},s.a.createElement("input",{type:"checkbox",checked:!!e.props.isChecked||e.props.isDefault,disabled:e.props.isDefault})));case"remove":return s.a.createElement("td",{key:t.index,className:"clickable",onClick:e.props.removeMarket},s.a.createElement("span",{style:{marginBottom:"6px",marginRight:"6px",zIndex:999},className:"text float-right remove"},"â"))}}).sort(function(e,t){return e.key>t.key}),y="clickable";return this.props.current&&(y+=" activeMarket"),s.a.createElement("tr",{className:y,style:d},b)}}]),t}();O.defaultProps={noSymbols:!1},O=Object(C.a)(O);var P=Object(g.a)(O,{propNames:["quote","base"],defaultProps:{tempComponent:"tr"},withDynamic:!0}),T=a(25),N=a(179),B=a(564),M=a(98),F=a(454),j=a(5),q=a.n(j),I=a(2013),R=a(9),L=a.n(R),D=a(41),V=a(12),z=a(575),H=a.n(z),W=(a(114),a(77)),U=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var G=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={backingAsset:"",error:!1,valid:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),U(t,[{key:"_onMoveUp",value:function(e){var t=this.props.quotes.findIndex(function(t){return t===e});S.a.modifyPreferedBases({oldIndex:t,newIndex:t-1})}},{key:"_onMoveDown",value:function(e){var t=this.props.quotes.findIndex(function(t){return t===e});S.a.modifyPreferedBases({oldIndex:t,newIndex:t+1})}},{key:"_onRemove",value:function(e){var t=this.props.quotes.findIndex(function(t){return t===e});t>=0&&S.a.modifyPreferedBases({remove:t})}},{key:"_onAdd",value:function(e){-1===this.props.quotes.findIndex(function(t){return t===e.get("symbol")})&&S.a.modifyPreferedBases({add:e.get("symbol")})}},{key:"_onInputBackingAsset",value:function(e){this.setState({backingAsset:e.toUpperCase(),error:null})}},{key:"_onFoundBackingAsset",value:function(e){e&&(this.props.quotes.includes(e.get("symbol"))?this.setState({error:"Asset already being used",isValid:!1}):this.setState({isValid:!0}))}},{key:"render",value:function(){var e=this,t=this.state.error,a=this.props.quotes.size;return s.a.createElement(A.Modal,{title:L.a.translate("exchange.quote_selection"),closable:!1,visible:this.props.visible,id:"quote_selection",overlay:!0,onCancel:this.props.hideModal,footer:[s.a.createElement(A.Button,{onClick:this.props.hideModal},L.a.translate("modal.close"))]},s.a.createElement("section",{className:"no-border-bottom"},s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null),s.a.createElement("th",null,s.a.createElement(h.a,{content:"account.quote"})),s.a.createElement("th",{style:{textAlign:"center"}},s.a.createElement(h.a,{content:"exchange.move_down"})),s.a.createElement("th",{style:{textAlign:"center"}},s.a.createElement(h.a,{content:"exchange.move_up"})),s.a.createElement("th",{style:{textAlign:"center"}},s.a.createElement(h.a,{content:"exchange.remove"})))),s.a.createElement("tbody",null,this.props.quotes.map(function(t,r){return s.a.createElement("tr",{key:t},s.a.createElement("td",null,r+1),s.a.createElement("td",null,t),s.a.createElement("td",{className:"text-center"},r!==a-1&&s.a.createElement(E.a,{onClick:e._onMoveDown.bind(e,t),name:"chevron-down",className:"clickable"})),s.a.createElement("td",{className:"text-center"},0!==r&&s.a.createElement(E.a,{onClick:e._onMoveUp.bind(e,t),name:"chevron-down",className:"clickable rotate180"})),s.a.createElement("td",{className:"text-center"},a>1&&s.a.createElement(E.a,{onClick:e._onRemove.bind(e,t),name:"cross-circle",className:"clickable"})))}))),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement(I.a,{label:"exchange.custom_quote",onChange:this._onInputBackingAsset.bind(this),asset:this.state.backingAsset,assetInput:this.state.backingAsset,tabIndex:1,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundBackingAsset.bind(this),onAction:this._onAdd.bind(this),action_label:"exchange.add_quote",disableActionButton:!!t,noLabel:!0}),s.a.createElement("div",{className:"error-area"},t))))}}]),t}(),Q=a(571),K=a(126),J=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Z=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ee=function(e){function t(e){Y(this,t);var a=X(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state=a._getInitialState(e),a}return $(t,s.a.Component),Z(t,[{key:"_getInitialState",value:function(e){var t=!!e.findMarketTab||e.viewSettings.get("myMarketsBase_"+e.index);return{open:void 0===t||t,inverseSort:e.viewSettings.get("myMarketsInvert",!0),sortBy:e.viewSettings.get("myMarketsSort","volume")}}},{key:"componentWillReceiveProps",value:function(e){e.findMarketTab!==this.props.findMarketTab&&this.setState(this._getInitialState(e))}},{key:"shouldComponentUpdate",value:function(e,t){return!e.markets||!this.props.markets||(!u.a.are_equal_shallow(t,this.state)||!u.a.are_equal_shallow(e.markets,this.props.markets)||e.starredMarkets!==this.props.starredMarkets||e.marketStats!==this.props.marketStats||e.userMarkets!==this.props.userMarkets)}},{key:"_inverseSort",value:function(){S.a.changeViewSetting({myMarketsInvert:!this.state.myMarketsInvert}),this.setState({inverseSort:!this.state.inverseSort})}},{key:"_changeSort",value:function(e){e!==this.state.sortBy?(S.a.changeViewSetting({myMarketsSort:e}),this.setState({sortBy:e})):this._inverseSort()}},{key:"_onToggle",value:function(){if(!this.props.findMarketTab){var e=!this.state.open;this.setState({open:e});var t={};t["myMarketsBase_"+this.props.index]=e,S.a.changeViewSetting(t)}}},{key:"_onToggleUserMarket",value:function(e){var t=e.split("_"),a=J(t,2),r=a[0],n=a[1],s=!this.props.userMarkets.get(e);S.a.setUserMarket(r,n,s)}},{key:"render",value:function(){var e=this,t=this.props,a=t.columns,r=t.markets,n=t.base,o=t.marketStats,i=t.starredMarkets,l=t.current,c=this.state,u=c.sortBy,p=c.inverseSort,d=c.open;if(!r||!r.length)return null;var m=a.map(function(t){switch(t.name){case"market":return s.a.createElement("th",{key:t.name,className:"clickable",onClick:e._changeSort.bind(e,"name")},s.a.createElement(h.a,{content:"exchange.market"}));case"vol":return s.a.createElement("th",{key:t.name,className:"clickable",onClick:e._changeSort.bind(e,"volume"),style:{textAlign:"right"}},s.a.createElement(h.a,{content:"exchange.vol_short"}));case"price":return s.a.createElement("th",{key:t.name,style:{textAlign:"right"}},s.a.createElement(h.a,{content:"exchange.price"}));case"quoteSupply":return s.a.createElement("th",{key:t.name},s.a.createElement(h.a,{content:"exchange.base_supply"}));case"baseSupply":return s.a.createElement("th",{key:t.name},s.a.createElement(h.a,{content:"exchange.quote_supply"}));case"change":return s.a.createElement("th",{key:t.name,className:"clickable",onClick:e._changeSort.bind(e,"change"),style:{textAlign:"right"}},s.a.createElement(h.a,{content:"exchange.change"}));case"issuer":return s.a.createElement("th",{key:t.name},s.a.createElement(h.a,{content:"explorer.assets.issuer"}));case"add":return s.a.createElement("th",{key:t.name,style:{textAlign:"right"}},s.a.createElement(h.a,{content:"account.perm.confirm_add"}));default:return s.a.createElement("th",{key:t.name})}}),f=r.map(function(t){return e.props.onlyLiquid&&o.get(t.id)&&0==o.get(t.id).volumeBase?null:s.a.createElement(P,{key:t.id,name:"others"===n?s.a.createElement("span",null,s.a.createElement(M.a,{name:t.quote}),":",s.a.createElement(M.a,{name:t.base})):s.a.createElement(M.a,{dataPlace:"left",name:t.quote}),quote:t.quote,base:t.base,columns:a,leftAlign:!0,compact:!0,noSymbols:!0,stats:o.get(t.id),starred:i.has(t.id),current:l===t.id,isChecked:e.props.userMarkets.has(t.id),isDefault:e.props.defaultMarkets&&e.props.defaultMarkets.has(t.id),onCheckMarket:e._onToggleUserMarket.bind(e),location:e.props.location,history:e.props.history})}).filter(function(e){return null!==e}).sort(function(e,t){var a=e.key.split("_"),r=t.key.split("_"),n=o.get(a[0]+"_"+a[1]),s=o.get(r[0]+"_"+r[1]);switch(u){case"name":return a[0]>r[0]?p?-1:1:a[0]<r[0]?p?1:-1:a[1]>r[1]?p?-1:1:a[1]<r[1]?p?1:-1:0;case"volume":return n&&s?p?s.volumeBase-n.volumeBase:n.volumeBase-s.volumeBase:0;case"change":return n&&s?p?s.change-n.change:n.change-s.change:0}});return s.a.createElement("div",{style:{paddingRight:10}},d?s.a.createElement("table",{className:"table table-hover text-right"},s.a.createElement("thead",null,s.a.createElement("tr",null,m)),f&&f.length?s.a.createElement("tbody",null,f):null):null)}}]),t}();ee.defaultProps={maxRows:20,onlyLiquid:!1};var te=function(e){function t(e){Y(this,t);var a=X(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.clearInput=function(){a.setState({myMarketFilter:""})},a.handleSearchUpdate=function(e){a.setState({myMarketFilter:e.target.value&&e.target.value.toUpperCase()})},a.state={isQuoteModalVisible:!1,inverseSort:e.viewSettings.get("myMarketsInvert",!0),sortBy:e.viewSettings.get("myMarketsSort","volume"),activeTab:e.viewSettings.get("favMarketTab","my-market"),activeMarketTab:e.viewSettings.get("activeMarketTab",0),lookupQuote:null,lookupBase:null,inputValue:"",minWidth:"100%",findBaseInput:"USD",activeFindBase:"USD"},a._setMinWidth=a._setMinWidth.bind(a),a.getAssetList=Object(r.a)(F.a.getAssetList.defer,150),a.showQuoteModal=a.showQuoteModal.bind(a),a.hideQuoteModal=a.hideQuoteModal.bind(a),a}return $(t,s.a.Component),Z(t,[{key:"shouldComponentUpdate",value:function(e,t){return"find-market"===this.state.activeTab||"find-market"!==t.activeTab||e.searchAssets.size||this._lookupAssets("OPEN.",!0),this.state.activeTab!==t.activeTab?this._changeTab(t.activeTab):e.tabHeader||this.state.activeTab===e.activeTab||this._changeTab(e.activeTab),!(i.a.is(e.searchAssets,this.props.searchAssets)&&i.a.is(e.markets,this.props.markets)&&i.a.is(e.starredMarkets,this.props.starredMarkets)&&i.a.is(e.defaultMarkets,this.props.defaultMarkets)&&i.a.is(e.marketStats,this.props.marketStats)&&u.a.are_equal_shallow(t,this.state)&&e.current===this.props.current&&e.minWidth===this.props.minWidth&&e.listHeight===this.props.listHeight&&e.preferredBases===this.props.preferredBases&&e.onlyStars===this.props.onlyStars&&e.onlyLiquid===this.props.onlyLiquid&&e.assetsLoading===this.props.assetsLoading&&e.userMarkets===this.props.userMarkets)}},{key:"componentWillMount",value:function(){if(this.props.setMinWidth&&window.addEventListener("resize",this._setMinWidth,{capture:!1,passive:!0}),this.props.currrent){var e=this.props.current.split("_")[1],t=this.props.preferredBases.findIndex(function(t){return t===e});-1!==t&&t!==this.state.activeMarketTab&&this.setState({activeMarketTab:t})}}},{key:"componentDidMount",value:function(){var e=this,t=this.refs.favorites;c.a.initialize(t),this._setMinWidth(),"find-market"===this.state.activeTab&&this._lookupAssets("OPEN.",!0),this.state.activeTab!==this.props.activeTab&&setTimeout(function(){e._changeTab(e.props.activeTab)},100)}},{key:"componentWillUnmount",value:function(){this.props.setMinWidth&&window.removeEventListener("resize",this._setMinWidth),clearTimeout(this.timer)}},{key:"componentWillReceiveProps",value:function(e){this.props.myMarketTab&&!e.myMarketTab&&this.refs.findSearchInput&&this.refs.findSearchInput.focus()}},{key:"hideQuoteModal",value:function(){this.setState({isQuoteModalVisible:!1})}},{key:"showQuoteModal",value:function(){this.setState({isQuoteModalVisible:!0})}},{key:"_setMinWidth",value:function(){this.props.setMinWidth&&this.refs.favorites&&"my-market"===this.props.activeTab&&this.state.minWidth!==this.refs.favorites.offsetWidth&&this.setState({minWidth:this.refs.favorites.offsetWidth})}},{key:"componentDidUpdate",value:function(){if(this.refs.favorites){var e=this.refs.favorites;c.a.update(e)}}},{key:"_inverseSort",value:function(){S.a.changeViewSetting({myMarketsInvert:!this.state.myMarketsInvert}),this.setState({inverseSort:!this.state.inverseSort})}},{key:"_changeSort",value:function(e){e!==this.state.sortBy?(S.a.changeViewSetting({myMarketsSort:e}),this.setState({sortBy:e})):this._inverseSort()}},{key:"_goMarkets",value:function(){this.props.history.push("/markets")}},{key:"_changeTab",value:function(e){S.a.changeViewSetting({favMarketTab:e}),this.setState({activeTab:e}),this._setMinWidth()}},{key:"_onInputName",value:function(e,t){var a=this,r=t.target.value.trim().toUpperCase(),n=!V.ChainValidation.is_valid_symbol_error(r,!0);this.setState({inputValue:r}),r&&r.length>=2&&!n||(this.state.inputValue!==r&&this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){a._lookupAssets(r,e)},1500))}},{key:"_lookupAssets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e||""===e){var a=e.toUpperCase().split(":"),r=a[0],n=2===a.length?a[1]:null;this.setState({lookupQuote:r,lookupBase:n}),S.a.changeViewSetting.defer({marketLookupInput:e.toUpperCase()}),this.getAssetList(r,50,t)}}},{key:"toggleActiveMarketTab",value:function(e){S.a.changeViewSetting({activeMarketTab:e}),this.setState({activeMarketTab:e})}},{key:"_onInputBaseAsset",value:function(e){this.setState({findBaseInput:e.toUpperCase(),error:null})}},{key:"_onFoundBaseAsset",value:function(e){e&&this.setState({activeFindBase:e.get("symbol")})}},{key:"_getMarkets",value:function(){var e=this.props,t=e.searchAssets,a=e.defaultMarkets,r=e.onlyStars,n=e.userMarkets,s=e.preferredBases,o=e.starredMarkets,l=this.state,c=l.activeTab,u=l.lookupQuote,p=l.lookupBase,h=l.myMarketFilter,d=l.activeMarketTab,m=(Object(W.d)(s),this._getBases()),f=[],g={},b=[],y="my-market"===c;t.size&&t.filter(function(e){try{if(e.options.description){var t=JSON.parse(e.options.description);if("visible"in t&&!t.visible)return!1}}catch(e){}return-1!==e.symbol.indexOf(u)&&e.symbol.length>=u.length}).forEach(function(e){m.forEach(function(t){var a=e.symbol+"_"+t;t!==e.symbol&&f.push([a,{quote:e.symbol,base:t}])})}),f=f.filter(function(e){return!p||e[1].quote===u});var v=y?a:i.a.Map(f);if(y&&n.size&&n.forEach(function(e,t){v.has(t)||(v=v.set(t,e))}),v.size>0){var _=y?s.get(d):this.state.activeFindBase,k=function(e,t,a,n,i){return{otherMarkets:a.filter(function(e){if(e.base===e.quote)return!1;if(y){var t=e.quote+"_"+e.base;return h?-1!==(K.a.removeCryptradeNameSpace(e.quote)+"_"+K.a.removeCryptradeNameSpace(e.base)).indexOf(h):!(r&&!o.has(t))}return!(u.length<1)&&-1!==e.quote.indexOf(u)}).map(function(a){var r=a.quote+"_"+a.base,o=K.a.removeCryptradeNameSpace(a.base);if(-1!==t.indexOf(o)){n[e]||(n[e]=[]);var i={id:r,quote:a.quote,base:a.base};return n[e].find(function(e){return e.id===r})||n[e].push(i),null}if(!s.includes(o))return{id:r,quote:a.quote,base:a.base}}).filter(function(e){return!!e}).take(y?100:20).toArray().concat(i),baseGroups:n}}(_,[_],v,g,b);b=k.otherMarkets,g=k.baseGroups}return{baseGroups:g,otherMarkets:b}}},{key:"_getBases",value:function(){var e=this.props,t=e.preferredBases,a=e.searchAssets,r=this.state,n=r.lookupQuote,s=r.lookupBase,o=a.filter(function(e){return s&&s.length?0===e.symbol.indexOf(s):-1!==e.symbol.indexOf(n)}).map(function(e){if(s&&s.length){if(0===e.symbol.indexOf(s))return e.symbol}else if(t.includes(e.symbol)&&e.symbol.length>=n.length&&e.symbol.length<n.length+3)return e.symbol}).filter(function(e){return!!e}).toArray();return o=(o=o.concat(t.filter(function(e){return!s||!s.length||0===e.indexOf(s)}).toArray())).filter(function(e){return!(s&&s.length>1)||0===e.indexOf(s)})}},{key:"render",value:function(){var e=this,t=this.props,r=t.starredMarkets,n=t.marketStats,o=t.columns,i=t.assetsLoading,l=t.preferredBases,c=t.current,u=t.viewSettings,p=t.listHeight,m=this.state,f=m.activeMarketTab,g="my-market"===m.activeTab,b=l.map(function(e){return e});g||(l=(l=l.clear()).push(this.state.activeFindBase)),g||(f=0);var y=this._getMarkets(),v=y.baseGroups,_=y.otherMarkets,k=_&&_.length,E="mymarkets-header clickable",C=q()(E,{inactive:!g}),x=(q()(E,{inactive:g}),{minWidth:this.state.minWidth,minHeight:"6rem"});p&&(x.height=p);var O=a(9);return s.a.createElement("div",{className:this.props.className,style:this.props.style},this.props.tabHeader?s.a.createElement("div",{style:this.props.headerStyle,className:"grid-block shrink left-orderbook-header bottom-header"},s.a.createElement("div",{ref:"myMarkets",className:C,onClick:this._changeTab.bind(this,"my-market"),"data-intro":O.translate("walkthrough.my_markets_tab")},s.a.createElement(h.a,{content:"exchange.market_name"}))):null,this.props.noHeader||this.props.tabHeader?null:s.a.createElement("div",{style:this.props.headerStyle},s.a.createElement("div",{className:"exchange-content-header"},s.a.createElement("span",null,s.a.createElement(h.a,{content:"exchange.market_name"})))),this.props.controls?s.a.createElement("div",{className:"small-12 medium-6",style:{padding:"1rem 0"}},this.props.controls?s.a.createElement("div",{style:{paddingBottom:"0.5rem"}},this.props.controls):null):null,g?s.a.createElement("div",{className:"grid-block vertical shrink",style:{width:"100%",textAlign:"left",padding:"0 0.5rem 0.75rem 0.5rem"}},s.a.createElement("div",null,s.a.createElement("label",{style:{margin:"3px 0 0"}},s.a.createElement("input",{style:{position:"relative",top:3},className:"no-margin",type:"checkbox",checked:this.props.onlyLiquid,onChange:function(){S.a.changeViewSetting({onlyLiquid:!e.props.onlyLiquid})}}),s.a.createElement("span",{style:{paddingLeft:"0.4rem"}},s.a.createElement(h.a,{content:"exchange.show_only_liquid"}))),s.a.createElement("label",{style:{margin:"3px 0 0"}},s.a.createElement("input",{style:{position:"relative",top:3},className:"no-margin",type:"checkbox",checked:this.props.onlyStars,onChange:function(){w.a.toggleStars()}}),s.a.createElement("span",{style:{paddingLeft:"0.4rem"}},s.a.createElement(d.a,{string:"exchange.show_only_star_formatter",keys:[{type:"icon",value:"fi-star",className:"gold-star",arg:"star_icon"}]}))),s.a.createElement("br",null)),s.a.createElement("div",{className:"search-wrapper"},s.a.createElement("form",null,s.a.createElement("div",{className:"filter inline-block"},s.a.createElement(A.Input,{autoComplete:"off",style:{fontSize:"0.9rem",height:"inherit",position:"relative"},type:"text",className:"no-margin market-filter-input",placeholder:L.a.translate("exchange.filter"),maxLength:"16",name:"focus",required:"required",value:this.state.myMarketFilter,onChange:this.handleSearchUpdate,addonAfter:s.a.createElement(A.Icon,{type:"search"})}))))):s.a.createElement("div",{style:{width:"100%",textAlign:"left",padding:"0.75rem 0.5rem"}},s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",{style:{width:"100%"}},s.a.createElement("td",null,s.a.createElement(I.a,{onAssetSelect:this._onFoundBaseAsset.bind(this),assets:b,onChange:this._onInputBaseAsset.bind(this),asset:this.state.findBaseInput,assetInput:this.state.findBaseInput,tabIndex:1,style:{width:"100%",paddingBottom:"1.5rem"},onFound:this._onFoundBaseAsset.bind(this),label:"exchange.quote",noLabel:!0,inputStyle:{fontSize:"0.9rem"}}))),s.a.createElement("tr",{style:{width:"100%"}},s.a.createElement("td",null,s.a.createElement("label",null,s.a.createElement(h.a,{content:"account.user_issued_assets.name"}),":"),s.a.createElement("input",{style:{fontSize:"0.9rem",position:"relative",top:1},type:"text",value:this.state.inputValue,onChange:this._onInputName.bind(this,!0),placeholder:L.a.translate("exchange.search"),maxLength:"16",tabIndex:2,ref:"findSearchInput"}),this.state.assetNameError?s.a.createElement("div",{className:"error-area",style:{paddingTop:10}},s.a.createElement("span",{style:{wordBreak:"break-all"}},s.a.createElement(h.a,{content:"explorer.asset.invalid",name:this.state.inputValue}))):null))))),s.a.createElement("ul",{className:"mymarkets-tabs",style:{marginBottom:0}},g&&s.a.createElement("li",{key:"quote_edit",style:{textTransform:"uppercase"},onClick:this.showQuoteModal,className:"mymarkets-tab hide"},"Â +Â "),g||this.state.inputValue?l.map(function(t,a){return t?s.a.createElement("li",{key:t,onClick:e.toggleActiveMarketTab.bind(e,a),className:q()("mymarkets-tab",{active:f===a})},t):null}):null,g?s.a.createElement("li",{key:"others",style:{textTransform:"uppercase"},onClick:this.toggleActiveMarketTab.bind(this,l.size+1),className:q()("mymarkets-tab",{active:f===l.size+1})},s.a.createElement(h.a,{content:"exchange.others"})):null),s.a.createElement("div",{style:x,className:"table-container grid-block vertical mymarkets-list",ref:"favorites"},i?s.a.createElement("div",{style:{position:"absolute",paddingTop:"3rem",textAlign:"center",width:"100%"}},s.a.createElement(D.a,{type:"three-bounce"})):null,l.filter(function(e){return e===l.get(f)}).map(function(t,a){return s.a.createElement(ee,{userMarkets:e.props.userMarkets,defaultMarkets:e.props.defaultMarkets,index:a,allowChange:!1,key:t,current:c,starredMarkets:r,marketStats:n,viewSettings:u,columns:g?o:e.props.findColumns||o,markets:v[t],base:t,maxRows:g?20:10,findMarketTab:!g,location:e.props.location,history:e.props.history,onlyLiquid:e.props.onlyLiquid&&g})}),f===l.size+1&&g&&k?s.a.createElement(ee,{userMarkets:this.props.userMarkets,index:l.size,current:c,starredMarkets:r,marketStats:n,viewSettings:u,columns:o,markets:_,base:"others",maxRows:g?20:10,findMarketTab:!g,location:this.props.location,history:this.props.history}):null),s.a.createElement(G,{visible:this.state.isQuoteModalVisible,hideModal:this.hideQuoteModal,showModal:this.showQuoteModal,quotes:this.props.preferredBases}))}}]),t}();te.defaultProps={activeTab:"my-market",setMinWidth:!1},te=H()(te,50,{leading:!1});var ae=function(e){function t(){return Y(this,t),X(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return $(t,s.a.Component),Z(t,[{key:"render",value:function(){return s.a.createElement(te,this.props)}}]),t}();t.a=Object(m.a)(ae,{listenTo:function(){return[T.a,N.a,B.a,Q.a]},getProps:function(){return{starredMarkets:T.a.getState().starredMarkets,onlyLiquid:T.a.getState().viewSettings.get("onlyLiquid",!1),defaultMarkets:Q.a.getState().markets,viewSettings:T.a.getState().viewSettings,preferredBases:T.a.getState().preferredBases,marketStats:N.a.getState().allMarketStats,userMarkets:T.a.getState().userMarkets,searchAssets:B.a.getState().assets,onlyStars:N.a.getState().onlyStars,assetsLoading:B.a.getState().assetsLoading}}})},2059:function(e,t,a){"use strict";var r=a(0),n=a.n(r),s=a(3),o=a.n(s),i=a(39),l=a(98),c=a(2297),u=a(121),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),p(t,[{key:"render",value:function(){var e=this.props,t=e.base,a=e.quote;if(t.get("id")===a.get("id"))return null;var r=a.get("symbol")+"_"+t.get("symbol"),s=n.a.createElement("span",null,n.a.createElement(l.a,{name:a.get("symbol")})," /"," ",n.a.createElement(l.a,{name:t.get("symbol")}));return n.a.createElement(c.a,{to:"/market/"+r},s)}}]),t}(),d=h=Object(u.a)(h,{propNames:["quote","base"],defaultProps:{base:"1.3.0"}}),m=a(46),f=a(197),g=a(91),b=a(18),y=a(9),v=a.n(y),_=a(12),k=a(109),E=a(16),w=a(27),S=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var x=function(e){return function(e){var t=Object(u.a)(e,{propNames:["shortBackingAsset"]});return Object(u.a)(function(e){return n.a.createElement(t,C({},e,{shortBackingAsset:e.asset.getIn(["bitasset","options","short_backing_asset"])}))})}(function(t){function a(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,s=Array(n),o=0;o<n;o++)s[o]=arguments[o];return t=r=A(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(s))),r.state={worthLessSettlement:void 0},A(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r.PureComponent),S(a,[{key:"updateFlag",value:function(){var e=this,t=this.props,a=t.asset,r=t.shortBackingAsset,n=a.get("id"),s=r.get("id"),o=E.Apis.instance().db_api().exec("get_order_book",[s,n,1]).then(function(e){return 0===e.bids.length?0:Number(e.bids[0].price)}),i=null;i=a.get("bitasset")&&a.get("bitasset").get("settlement_fund")>0?a.get("bitasset").get("settlement_price"):a.getIn(["bitasset","current_feed","settlement_price"]);var l=new w.i({base:new w.a({asset_id:s,amount:i.getIn(["quote","amount"]),preicision:r.get("precision")}),quote:new w.a({asset_id:n,amount:i.getIn(["base","amount"]),precision:a.get("precision")})}).toReal();o.then(function(t){return e.setState({worthLessSettlement:t>l,marketPrice:t,settlementPrice:l})})}},{key:"componentWillMount",value:function(){this.updateFlag()}},{key:"componentDidUpdate",value:function(){this.updateFlag()}},{key:"render",value:function(){var t=this.props,a=this.state,r=a.worthLessSettlement,s=a.marketPrice,o=a.settlementPrice;return n.a.createElement(e,C({},t,{worthLessSettlement:r,marketPrice:s,settlementPrice:o}))}}]),a}())},O=a(38),P=a(11),T=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var F=x(function(e){var t=e.worthLessSettlement,a=e.asset,r=e.shortBackingAsset,s=e.marketPrice,i=e.settlementPrice;switch(t){case!0:return n.a.createElement("div",null,n.a.createElement(O.a,{string:"exchange.worth_less_settlement_warning",keys:[{value:n.a.createElement(d,{base:a.get("id"),quote:r.get("id")}),arg:"market_link"}]}),n.a.createElement("br",null),"Â Â ",n.a.createElement(o.a,{content:"exchange.price_market"}),":Â Â ",s,n.a.createElement("br",null),"Â Â ",n.a.createElement(o.a,{content:"exchange.settle"}),":Â Â ",i,n.a.createElement("br",null),n.a.createElement("br",null));case void 0:return n.a.createElement(o.a,{content:"exchange.checking_for_worth_less_settlement"});default:return n.a.createElement("div",null,n.a.createElement(O.a,{string:"exchange.settlement_hint",keys:[{value:n.a.createElement(d,{base:a.get("id"),quote:r.get("id")}),arg:"market_link"},{value:n.a.createElement(l.a,{name:a.get("symbol")}),arg:"long"}]}),n.a.createElement("br",null),"Â Â ",n.a.createElement(o.a,{content:"exchange.price_market"}),":Â Â ",s,n.a.createElement("br",null),"Â Â ",n.a.createElement(o.a,{content:"exchange.settle"}),":Â Â ",i,n.a.createElement("br",null),n.a.createElement("br",null))}}),j=function(e){function t(){N(this,t);var e=B(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e.onSubmit=e.onSubmit.bind(e),e}return M(t,n.a.Component),T(t,[{key:"componentWillReceiveProps",value:function(e){e.asset&&this.props.asset&&e.asset.get("id")!==this.props.asset.get("id")&&this.setState({amount:0})}},{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onSubmit",value:function(e){var t=this.state.amount;e.preventDefault(),this.props.hideModal(),t=parseInt(t*Math.pow(10,this.props.asset.get("precision")));var a=g.a.new_transaction();return a.add_type_operation("asset_settle",{fee:{amount:0,asset_id:0},account:this.props.account.get("id"),amount:{amount:t,asset_id:this.props.asset.get("id")}}),b.a.process_transaction(a,null,!0).then(function(e){return!0}).catch(function(e){return console.error("asset settle error: ",e),!1})}},{key:"_useMaxValue",value:function(e){this.setState({amount:e/Math.pow(10,this.props.asset.get("precision"))})}},{key:"render",value:function(){var e=this.props,t=e.asset,a=e.account,r=this.state.amount;if(!t)return null;var s=t.get("id"),i=a.get("balances"),l=null,c=0;i&&i.forEach(function(e){var t=_.ChainStore.getObject(e);if(!t.get("balance"))return null;t.get("asset_type")===s&&(l=e,c=t.get("balance"))});var u=n.a.createElement("span",null,n.a.createElement(o.a,{content:"exchange.balance"}),":Â ",l?n.a.createElement("span",{className:"underline",onClick:this._useMaxValue.bind(this,c)},n.a.createElement(f.a,{balance:l})):"0 "+t.get("symbol")),p=!1;r>c/Math.pow(10,this.props.asset.get("precision"))&&(p=!0);var h=[n.a.createElement(P.Tooltip,{title:p?v.a.translate("tooltip.lack_funds"):null},n.a.createElement(P.Button,{key:"submit",type:"primary",onClick:this.onSubmit,disabled:p},v.a.translate("modal.settle.submit"))),n.a.createElement(P.Button,{key:"close",onClick:this.props.hideModal},v.a.translate("modal.close"))];return n.a.createElement(P.Modal,{title:v.a.translate("modal.settle.title",{asset:t.get("symbol")}),visible:this.props.visible,id:this.props.modalId,footer:h,onCancel:this.props.hideModal,overlay:!0,ref:"settlement_modal"},n.a.createElement("div",{className:"grid-block vertical"},n.a.createElement("form",{className:"grid-block vertical full-width-content"},n.a.createElement(F,{asset:s}),n.a.createElement("div",{className:"grid-container "},n.a.createElement("div",{className:"content-block"},n.a.createElement(k.a,{label:"modal.settle.amount",amount:r,onChange:this.onAmountChanged.bind(this),display_balance:u,asset:s,assets:[s],tabIndex:1}))))))}}]),t}();j.propTypes={asset:i.a.ChainAsset.isRequired,account:i.a.ChainAccount.isRequired},j=Object(m.a)(j);var q=function(e){function t(){return N(this,t),B(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return M(t,n.a.Component),T(t,[{key:"render",value:function(){return n.a.createElement(j,this.props)}}]),t}();t.a=q},2060:function(e,t,a){"use strict";var r=a(0),n=a.n(r),s=a(1),o=a.n(s),i=a(2297),l=a(9),c=a.n(l),u=a(2006),p=a.n(u),h=a(14),d=a(3),m=a.n(d),f=a(98),g=a(2027),b=a.n(g),y=a(2001),v=a(11),_=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}((function(e){function t(){return k(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,n.a.Component),_(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,a=e.quoteSymbol;return n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{style:{textAlign:"right"}},n.a.createElement(m.a,{content:"exchange.price"}),n.a.createElement("br",null),t?n.a.createElement("span",{className:"header-sub-title"},"(",n.a.createElement(f.a,{name:t}),"/",n.a.createElement(f.a,{name:a}),")"):null),n.a.createElement("th",{style:{textAlign:"right"}},n.a.createElement(m.a,{content:"transfer.amount"}),n.a.createElement("br",null),a?n.a.createElement("span",{className:"header-sub-title"},"(",n.a.createElement(f.a,{name:a}),")"):null),n.a.createElement("th",{style:{textAlign:"right"}},n.a.createElement(m.a,{content:"transaction.settlement_date"}),n.a.createElement("br",null),n.a.createElement("span",{style:{visibility:"hidden"},className:"header-sub-title"},"d"))))}}]),t})()).defaultProps={quoteSymbol:null,baseSymbol:null};var S=function(e){function t(){return k(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,n.a.Component),_(t,[{key:"render",value:function(){var e=this.props,t=e.base,a=e.quote,r=e.order,s=e.showSymbols,o="1.3.0"==t.get("id")?r.getPrice()/(1+r.offset_percent/1e4):r.getPrice()*(1+r.offset_percent/1e4),i=s?" "+a.get("symbol"):null;return n.a.createElement("tr",{style:{paddingRight:5}},n.a.createElement("td",{style:{textAlign:"right"}},h.a.format_number(o,a.get("precision"))," ",i),n.a.createElement("td",{style:{textAlign:"right"}},h.a.format_number(r[r.isBid()?"amountToReceive":"amountForSale"]().getAmount({real:!0}),a.get("precision"))),n.a.createElement("td",{style:{textAlign:"right"}},h.a.format_number(r[r.isBid()?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))),n.a.createElement("td",null,n.a.createElement(v.Tooltip,{title:new Date(r.settlement_date).toString()},n.a.createElement("div",{style:{textAlign:"right",whiteSpace:"nowrap"}},c.a.localize(new Date(r.settlement_date),{type:"date",format:-1!==b()().toLowerCase().indexOf("en-us")?"market_history_us":"market_history"})))))}}]),t}();S.defaultProps={showSymbols:!1,invert:!1};var C=function(e){function t(){return k(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,n.a.Component),_(t,[{key:"shouldComponentUpdate",value:function(e){return e.currentAccount!==this.props.currentAccount||e.orders!==this.props.orders}},{key:"render",value:function(){var e=this.props,t=e.orders,a=e.base,r=e.quote,s=null;if(!(t.size>0&&a&&r))return n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{style:{textAlign:"center",lineHeight:4,fontStyle:"italic"},colSpan:"5"},n.a.createElement(m.a,{content:"account.no_orders"}))));var o=0;return s=t.sort(function(e,t){return e.isBefore(t)?-1:1}).map(function(e){return Date.now()<e.settlement_date?n.a.createElement(S,{key:o++,order:e,base:a,quote:r}):null}).toArray(),n.a.createElement(y.a,{ref:"contentTransition",component:"tbody",transitionName:"newrow"},s)}}]),t}();C.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},C.propTypes={base:o.a.object.isRequired,quote:o.a.object.isRequired,orders:o.a.object.isRequired,quoteSymbol:o.a.string.isRequired,baseSymbol:o.a.string.isRequired};var A=C,x=a(2024),O=a(23),P=a(20),T=a(12),N=a(27),B=a(2016),M=a(2036),F=a(123),j=a(53),q=a.n(j);a.d(t,"b",function(){return U}),a.d(t,"c",function(){return W}),a.d(t,"a",function(){return G});var I=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var z={textAlign:"left"},H={textAlign:"right"},W=function(e){function t(){return L(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,n.a.Component),I(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,a=e.quoteSymbol,r=e.dashboard,s=e.isMyAccount,o=e.leftAlign;return r?n.a.createElement("tr",null,s?n.a.createElement("th",{id:"cancelAllOrders",style:{cursor:"pointer"}},n.a.createElement(m.a,{content:"wallet.cancel"})):null,n.a.createElement("th",null,n.a.createElement(m.a,{content:"account.trade"})),n.a.createElement("th",{style:o},n.a.createElement(m.a,{content:"transaction.order_id"})),n.a.createElement("th",{style:o,colSpan:"4"},n.a.createElement(m.a,{content:"exchange.description"})),n.a.createElement("th",{style:o},n.a.createElement(m.a,{content:"exchange.price"})),n.a.createElement("th",{style:o},n.a.createElement(m.a,{content:"exchange.price_market"})),n.a.createElement("th",{style:{textAlign:"right"}},n.a.createElement(m.a,{content:"exchange.value"}))):n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{style:o||H},n.a.createElement(m.a,{className:"header-sub-title",content:"exchange.price"})),n.a.createElement("th",{style:o||H},t?n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(f.a,{dataPlace:"top",name:a})):null),n.a.createElement("th",{style:o||H},t?n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(f.a,{dataPlace:"top",name:t})):null),n.a.createElement("th",{style:o||H},n.a.createElement(m.a,{className:"header-sub-title",content:"transaction.expiration"})),n.a.createElement("th",{style:{width:"6%"}})))}}]),t}();W.defaultProps={quoteSymbol:null,baseSymbol:null};var U=function(e){function t(){return L(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,n.a.Component),I(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.for_sale!==this.props.order.for_sale||e.order.id!==this.props.order.id||e.quote!==this.props.quote||e.base!==this.props.base||e.order.market_base!==this.props.order.market_base}},{key:"render",value:function(){var e=this.props,t=e.base,a=e.quote,r=e.order,s=e.showSymbols,o=e.dashboard,l=e.isMyAccount,u=e.settings,p=r.isBid(),d=r.isCall(),g=d?"orderHistoryCall":p?"orderHistoryBid":"orderHistoryAsk",b=s?n.a.createElement("span",null," "+t.get("symbol")+"/"+a.get("symbol")):null,y=s?" "+t.get("symbol"):null,_=s?" "+a.get("symbol"):null,k=u?u.get("unit"):"1.3.0",E=p?"value positive":"value negative",w=p?"value negative":"value positive";return o?n.a.createElement("tr",{key:r.id,className:"clickable"},l?n.a.createElement("td",{className:"text-center"},d?null:n.a.createElement("span",{style:{marginRight:0},className:"order-cancel"},n.a.createElement("input",{type:"checkbox",className:"orderCancel",onChange:this.props.onCheckCancel}))):null,n.a.createElement("td",null,n.a.createElement(i.a,{to:"/market/"+a.get("symbol")+"_"+t.get("symbol")},n.a.createElement(P.a,{name:"trade",title:"icons.trade.trade",className:"icon-14px"}))),n.a.createElement("td",{style:z},"#",r.id.substring(4)),n.a.createElement("td",{colSpan:"4",style:z,onClick:this.props.onFlip},p?n.a.createElement(m.a,{content:"exchange.buy_description",baseAsset:h.a.format_number(r[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),t.get("precision"),!1),quoteAsset:h.a.format_number(r[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),a.get("precision"),!1),baseName:n.a.createElement(f.a,{noTip:!0,customClass:E,name:a.get("symbol")}),quoteName:n.a.createElement(f.a,{noTip:!0,customClass:w,name:t.get("symbol")})}):n.a.createElement(m.a,{content:"exchange.sell_description",baseAsset:h.a.format_number(r[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),t.get("precision"),!1),quoteAsset:h.a.format_number(r[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),a.get("precision"),!1),baseName:n.a.createElement(f.a,{noTip:!0,customClass:E,name:a.get("symbol")}),quoteName:n.a.createElement(f.a,{noTip:!0,customClass:w,name:t.get("symbol")})})),n.a.createElement("td",{style:z,onClick:this.props.onFlip},n.a.createElement(F.a,{base_amount:r.sellPrice().base.amount,base_asset:r.sellPrice().base.asset_id,quote_amount:r.sellPrice().quote.amount,quote_asset:r.sellPrice().quote.asset_id,force_direction:t.get("symbol"),hide_symbols:!0})),n.a.createElement("td",{style:z,onClick:this.props.onFlip},n.a.createElement(M.a,{base:t.get("id"),quote:a.get("id"),force_direction:t.get("symbol"),hide_symbols:!0,hide_asset:!0})),n.a.createElement("td",{style:{textAlign:"right"},onClick:this.props.onFlip},n.a.createElement(B.b,{hide_asset:!0,amount:r.amountForSale().getAmount(),fromAsset:r.amountForSale().asset_id,noDecimals:!0,toAsset:k})," ",n.a.createElement(f.a,{name:k}))):n.a.createElement("tr",{key:r.id},n.a.createElement("td",{className:g,style:{paddingLeft:10}},n.a.createElement(x.a,{price:r.getPrice(),base:t,quote:a}),b),n.a.createElement("td",null,h.a.format_number(r[p?"amountToReceive":"amountForSale"]().getAmount({real:!0}),a.get("precision"))," ",_),n.a.createElement("td",null,h.a.format_number(r[p?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",y),n.a.createElement("td",null,n.a.createElement(v.Tooltip,{title:r.expiration.toLocaleString()},n.a.createElement("div",{style:{width:"25%",textAlign:"right",whiteSpace:"nowrap"}},d?null:c.a.localize(new Date(r.expiration),{type:"date",format:"short_custom"})))),n.a.createElement("td",{className:"text-center",style:{width:"6%"}},d?null:n.a.createElement("a",{style:{marginRight:0},className:"order-cancel",onClick:this.props.onCancel},n.a.createElement(P.a,{name:"cross-circle",title:"icons.cross_circle.cancel_order",className:"icon-14px"}))))}}]),t}();U.defaultProps={showSymbols:!1};var G=function(e){function t(e){L(this,t);var a=D(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeTab:e.activeTab,rowCount:20,showAll:!1},a._getOrders=a._getOrders.bind(a),a}return V(t,n.a.Component),I(t,[{key:"shouldComponentUpdate",value:function(e,t){if(e.activeTab!==this.state.activeTab&&this._changeTab(e.activeTab),this.props.hideScrollbars&&t.showAll!=this.state.showAll){var a=this.refs.container;t.showAll?(p.a.initialize(a),p.a.update(a)):p.a.destroy(a),this.refs.contentTransition&&this.refs.contentTransition.resetAnimation(),a&&(a.scrollTop=0)}return e.baseSymbol!==this.props.baseSymbol||e.quoteSymbol!==this.props.quoteSymbol||e.className!==this.props.className||e.activeTab!==this.props.activeTab||t.activeTab!==this.state.activeTab||t.showAll!==this.state.showAll||e.currentAccount!==this.props.currentAccount}},{key:"componentDidMount",value:function(){if(!this.props.hideScrollbars){var e=this.refs.container;e&&p.a.initialize(e)}}},{key:"componentDidUpdate",value:function(){if(!this.props.hideScrollbars||this.props.hideScrollbars&&this.state.showAll){var e=this.refs.container;e&&p.a.update(e)}}},{key:"componentWillReceiveProps",value:function(e){var t=this.refs.container;e.hideScrollbars!==this.props.hideScrollbars&&e.hideScrollbars&&p.a.destroy(t),e.hideScrollbars===this.props.hideScrollbars||e.hideScrollbars||(p.a.initialize(t),this.refs.contentTransition.resetAnimation(),t&&(t.scrollTop=0),p.a.update(t))}},{key:"_onSetShowAll",value:function(){this.setState({showAll:!this.state.showAll}),this.state.showAll&&(this.refs.container.scrollTop=0)}},{key:"_getOrders",value:function(){var e,t=this.props,a=t.currentAccount,r=t.base,n=t.quote,s=t.feedPrice,o=a.get("orders"),i=a.get("call_orders"),l=r.get("id"),c=n.get("id"),u=(R(e={},r.get("id"),{precision:r.get("precision")}),R(e,n.get("id"),{precision:n.get("precision")}),e),p=o.toArray().map(function(e){var t=T.ChainStore.getObject(e);if(!t)return null;var a=t.getIn(["sell_price","base","asset_id"]),r=t.getIn(["sell_price","quote","asset_id"]);return a===l&&r===c||a===c&&r===l?new N.g(t.toJS(),u,n.get("id")):void 0}).filter(function(e){return!!e}),h=i.toArray().map(function(e){try{var t=T.ChainStore.getObject(e);if(!t)return null;var a=t.getIn(["call_price","base","asset_id"]),r=t.getIn(["call_price","quote","asset_id"]);if(a===l&&r===c||a===c&&r===l)return s?new N.b(t.toJS(),u,n.get("id"),s):null}catch(e){return null}}).filter(function(e){return!!e}).filter(function(e){try{return e.isMarginCalled()}catch(e){return!1}});return p.concat(h)}},{key:"_changeTab",value:function(e){O.a.changeViewSetting({ordersTab:e}),this.setState({activeTab:e});var t=this.refs.container;t.scrollTop=0,p.a.update(t),setTimeout(q.a.rebuild,1e3)}},{key:"render",value:function(){var e=this,t=this.props,a=t.base,r=t.quote,s=t.quoteSymbol,o=t.baseSymbol,i=t.settleOrders,l=this.state,c=l.activeTab,u=l.showAll,p=l.rowCount;if(!a||!r)return null;var h=void 0,d=void 0;a.get("bitasset_data_id")&&i.size,r.get("bitasset_data_id")&&i.size;if(!c||"my_orders"==c){var g=this._getOrders(),b=n.a.createElement("tr",null,n.a.createElement("td",{style:{textAlign:"center",lineHeight:4,fontStyle:"italic"},colSpan:"5"},n.a.createElement(m.a,{content:"account.no_orders"}))),v=g.filter(function(e){return e.isBid()}).sort(function(e,t){return t.getPrice()-e.getPrice()}).map(function(t){var s=t.getPrice();return n.a.createElement(U,{price:s,key:t.id,order:t,base:a,quote:r,onCancel:e.props.onCancel.bind(e,t.id)})}),_=g.filter(function(e){return!e.isBid()}).sort(function(e,t){return e.getPrice()-t.getPrice()}).map(function(t){var s=t.getPrice();return n.a.createElement(U,{price:s,key:t.id,order:t,base:a,quote:r,onCancel:e.props.onCancel.bind(e,t.id)})}),k=[];_.length&&(k=k.concat(_)),v.length&&(k=k.concat(v)),k.sort(function(e,t){return e.props.price-t.props.price});var E=k.length;u||k.splice(p,k.length),h=n.a.createElement(y.a,{ref:"contentTransition",component:"tbody",transitionName:"newrow"},k.length?k:b),d=E>11?n.a.createElement("div",{className:"orderbook-showall"},n.a.createElement("a",{onClick:this._onSetShowAll.bind(this)},n.a.createElement(m.a,{content:u?"exchange.hide":"exchange.show_all_orders",rowcount:E}))):null}if(c&&"open_settlement"==c){var w=i.length;w>0&&(u||i.splice(p,i.length)),h=n.a.createElement(A,{key:"settle_orders",orders:i,base:a,quote:r,baseSymbol:o,quoteSymbol:s}),d=w>11?n.a.createElement("div",{className:"orderbook-showall"},n.a.createElement("a",{onClick:this._onSetShowAll.bind(this)},n.a.createElement(m.a,{content:u?"exchange.hide":"exchange.show_all_orders",rowcount:w}))):null}return n.a.createElement("div",{style:this.props.style,key:"open_orders",className:this.props.className},n.a.createElement("div",{className:this.props.innerClass,style:this.props.innerStyle},this.props.noHeader?null:n.a.createElement("div",{style:this.props.headerStyle,className:"exchange-content-header"},"my_orders"==c?n.a.createElement(m.a,{content:"exchange.my_orders"}):null,"open_settlement"==c?n.a.createElement(m.a,{content:"exchange.settle_orders"}):null),n.a.createElement("div",{className:"grid-block shrink left-orderbook-header market-right-padding-only"},n.a.createElement("table",{className:"table order-table text-right fixed-table market-right-padding"},"my_orders"==c?n.a.createElement(W,{type:"sell",baseSymbol:o,quoteSymbol:s}):n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,n.a.createElement(m.a,{className:"header-sub-title",content:"exchange.price"})),n.a.createElement("th",null,n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(f.a,{dataPlace:"top",name:s}))),n.a.createElement("th",null,n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(f.a,{dataPlace:"top",name:o}))),n.a.createElement("th",null,n.a.createElement(m.a,{className:"header-sub-title",content:"explorer.block.date"})))))),n.a.createElement("div",{className:"table-container grid-block market-right-padding-only no-overflow",ref:"container",style:{overflow:"hidden",minHeight:this.props.tinyScreen?0:260,maxHeight:260,lineHeight:"13px"}},n.a.createElement("table",{className:"table order-table table-highlight-hover table-hover no-stripes text-right fixed-table market-right-padding"},h)),d))}}]),t}();G.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},G.propTypes={base:o.a.object.isRequired,quote:o.a.object.isRequired,orders:o.a.object.isRequired,quoteSymbol:o.a.string.isRequired,baseSymbol:o.a.string.isRequired}},2066:function(e,t){e.exports={midnightTheme:{bidColor:"#50D2C2",bidFillColor:"rgba(80, 210, 194, 0.5)",askColor:"#E3745B",askFillColor:"rgba(227, 116, 91, 0.5)",callColor:"#BBBF2B",settleColor:"rgba(125, 134, 214, 1)",settleFillColor:"rgba(125, 134, 214, 0.5)",positiveColor:"#6BA583",negativeColor:"#DB0000",strokeColor:"#FFFF00",primaryText:"#e0e0e0",volumeColor:"#848484",tooltipBackgroundColor:"rgba(0, 0, 0, 0.4)",tooltipColor:"#fff",tooltipFillColor:"#fff",axisLabelsColor:"#fff",axisLineColor:"rgba(200, 200, 200, 0.3)",indicatorLineColor:"#FFFFFF",bgColor:"#191a1f",textColor:"#e0e0e0"},darkTheme:{bidColor:"#6BA583",bidFillColor:"rgba(80, 210, 194, 0.5)",askColor:"#E3745B",askFillColor:"rgba(227, 116, 91, 0.5)",callColor:"#BBBF2B",settleColor:"rgba(125, 134, 214, 1)",settleFillColor:"rgba(125, 134, 214, 0.5)",positiveColor:"#258A14",negativeColor:"#DB0000",strokeColor:"#FFFF00",primaryText:"#e0e0e0",volumeColor:"#848484",tooltipBackgroundColor:"rgba(0, 0, 0, 0.4)",tooltipColor:"#fff",tooltipFillColor:"#fff",axisLabelsColor:"#fff",axisLineColor:"rgba(200, 200, 200, 0.3)",indicatorLineColor:"#FFFFFF",bgColor:"#2a2a2a",textColor:"#ffffff"},lightTheme:{bidColor:"#258A14",bidFillColor:"rgba(80, 210, 194, 0.5)",askColor:"#EA340B",askFillColor:"rgba(227, 116, 91, 0.5)",callColor:"#BBBF2B",settleColor:"rgba(125, 134, 214, 1)",settleFillColor:"rgba(125, 134, 214, 0.5)",positiveColor:"#528c0a",negativeColor:"rgba(225, 66, 74, 1)",strokeColor:"#000000",primaryText:"#242424",volumeColor:"#848484",tooltipBackgroundColor:"rgba(255,255,255, 0.9)",tooltipColor:"#000",tooltipFillColor:"#000",axisLabelsColor:"#000",axisLineColor:"rgba(200, 200, 200, 0.3)",indicatorLineColor:"#848484",bgColor:"#fff",textColor:"#3d3d3d"}}},2161:function(e,t,a){!function(e){"use strict";function t(e,a){var n=r({},e);for(var s in a)"object"!=typeof e[s]||null===e[s]||Array.isArray(e[s])?void 0!==a[s]&&(n[s]=a[s]):n[s]=t(e[s],a[s]);return n}function a(){return"1.12 (internal id 630b704a @ 2018-06-06 02:16:11.305509)"}var r=Object.assign||function(e){for(var t,a=arguments,r=1,n=arguments.length;r<n;r++)for(var s in t=a[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},s={width:800,height:500,symbol:"AA",interval:"D",timezone:"UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}},o=function(){function e(e){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");if(this._options=t(s,e),e.preset){var a=n[e.preset];a?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(a.disabled_features):this._options.disabled_features=a.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(a.enabled_features):this._options.enabled_features=a.enabled_features):console.warn("Unknown preset: `"+e.preset+"`")}this._create()}return e.prototype.onChartReady=function(e){this._ready?e.call(this):this._readyHandlers.push(e)},e.prototype.onGrayedObjectClicked=function(e){this._innerAPI().onGrayedObjectClicked(e)},e.prototype.onShortcut=function(e,t){this._innerWindow().createShortcutAction(e,t)},e.prototype.subscribe=function(e,t){this._innerAPI().subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._innerAPI().unsubscribe(e,t)},e.prototype.chart=function(e){return this._innerAPI().chart(e)},e.prototype.setLanguage=function(e){this.remove(),this._options.locale=e,this._create()},e.prototype.setSymbol=function(e,t,a){this._innerAPI().changeSymbol(e,t+"",a)},e.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id];var e=this._getIFrameElement();e.contentWindow.destroyChart(),e.parentNode&&e.parentNode.removeChild(e)},e.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},e.prototype.selectLineTool=function(e){this._innerAPI().selectLineTool(e)},e.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},e.prototype.save=function(e){this._innerAPI().saveChart(e)},e.prototype.load=function(e,t){this._innerAPI().loadChart({json:e,extendedData:t})},e.prototype.getSavedCharts=function(e){this._innerAPI().getSavedCharts(e)},e.prototype.loadChartFromServer=function(e){this._innerAPI().loadChartFromServer(e)},e.prototype.saveChartToServer=function(e,t,a,r){this._innerAPI().saveChartToServer(e,t,a,r)},e.prototype.removeChartFromServer=function(e,t){this._innerAPI().removeChartFromServer(e,t)},e.prototype.onContextMenu=function(e){this._innerAPI().onContextMenu(e)},e.prototype.createButton=function(e){return this._innerWindow().createButton(e)},e.prototype.showNoticeDialog=function(e){this._innerAPI().showNoticeDialog(e)},e.prototype.showConfirmDialog=function(e){this._innerAPI().showConfirmDialog(e)},e.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},e.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},e.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},e.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},e.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},e.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},e.prototype.addCustomCSSFile=function(e){this._innerWindow().addCustomCSSFile(e)},e.prototype.applyOverrides=function(e){this._options=t(this._options,{overrides:e}),this._innerWindow().applyOverrides(e)},e.prototype.applyStudiesOverrides=function(e){this._innerWindow().applyStudiesOverrides(e)},e.prototype.watchList=function(){return this._innerAPI().watchlist()},e.prototype.activeChart=function(){return this._innerAPI().activeChart()},e.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},e.prototype.layout=function(){return this._innerAPI().layout()},e.prototype.setLayout=function(e){this._innerAPI().setLayout(e)},e.prototype._getIFrameElement=function(){var e=document.getElementById(this._id);if(null===e)throw new Error("There is no such iframe");return e},e.prototype._innerAPI=function(){return this._getIFrameElement().contentWindow.tradingViewApi},e.prototype._innerWindow=function(){return this._getIFrameElement().contentWindow},e.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._getIFrameElement().style.height=window.innerHeight+"px")},e.prototype._create=function(){var e=this,t=this._render(),a=document.getElementById(this._options.container_id);if(null===a)throw new Error("There is no such element - #"+this._options.container_id);a.innerHTML=t;var r=this._getIFrameElement();(this._options.autosize||this._options.fullscreen)&&(r.style.width="100%",this._options.fullscreen||(r.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize();var n=function(){r.removeEventListener("load",n,!1),r.contentWindow.widgetReady(function(){e._ready=!0;for(var t=0,a=e._readyHandlers;t<a.length;t++)a[t].call(e);r.contentWindow.initializationFinished()})};r.addEventListener("load",n,!1)},e.prototype._render=function(){var e=window;e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter},this._options.saved_data&&(e[this._id].chartContent={json:this._options.saved_data});var t=(this._options.library_path||"")+"static/tv-chart.630b704a2b9d0eaf1593.html#localserver=1&symbol="+encodeURIComponent(this._options.symbol)+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+this._options.toolbar_bg.replace("#",""):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.indicators_file_name?"&indicatorsFile="+encodeURIComponent(this._options.indicators_file_name):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+this._options.debug+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+t+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},e}();window.TradingView=window.TradingView||{},window.TradingView.version=a,e.version=a,e.onready=function(e){window.addEventListener("DOMContentLoaded",e,!1)},e.widget=o,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2172:function(e,t,a){"use strict";(function(e){var r=a(322),n=a(0),s=a.n(n),o=a(114),i=a.n(o),l=(a(573),a(3)),c=a.n(l),u=a(27),p=a(14),h=a(46),d=a(39),m=a(36),f=a(53),g=a.n(f),b=a(9),y=a.n(b),v=a(80),_=a(131),k=a(20),E=a(41),w=a(106),S=a(98),C=a(12),A=a(284),x=a(42),O=a(31),P=a(11),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},N=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=function(t){function a(e){B(this,a);var t=M(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t.state={toAddress:v.a.getLast(e.walletType),withdrawValue:"",amountError:null,symbol:e.asset.get("symbol"),to_withdraw:new u.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),fee_asset_id:"1.3.0",feeStatus:{},loading:!1,emptyAddressDeposit:!1},t._validateAddress(t.state.toAddress,e),t.addDepositAddress=t.addDepositAddress.bind(t),t._checkFeeStatus=t._checkFeeStatus.bind(t),t._checkBalance=t._checkBalance.bind(t),t._getCurrentBalance=t._getCurrentBalance.bind(t),t._getFee=t._getFee.bind(t),t._updateFee=Object(r.a)(t._updateFee.bind(t),250),t}return F(a,A["a"]),N(a,[{key:"componentWillMount",value:function(){this._getDepositAddress(),this._updateFee(),this._checkFeeStatus()}},{key:"componentWillReceiveProps",value:function(e){e.asset&&this.props.asset&&e.asset.get("id")!==this.props.asset.get("id")&&this.setState({to_withdraw:new u.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),gateFee:e.asset.get("gateFee"),intermediateAccount:e.asset.get("intermediateAccount"),symbol:e.asset.get("symbol"),memo:"",withdrawValue:"",receive_address:null,toAddress:v.a.getLast(e.walletType)},this._getDepositAddress)}},{key:"_getDepositAddress",value:function(){if(this.props.backingCoinType){var e=Object(v.j)({coin:"open."+this.props.backingCoinType.toLowerCase(),account:this.props.account,stateCallback:this.addDepositAddress});e?this.setState({receive_address:e}):Object(v.l)(this._getDepositObject())}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.backingCoinType.toLowerCase(),outputCoinType:this.props.symbol.toLowerCase(),outputAddress:this.props.sender.get("name"),stateCallback:this.addDepositAddress}}},{key:"requestDepositAddressLoad",value:function(){this.setState({loading:!0,emptyAddressDeposit:!1}),Object(v.l)(this._getDepositObject())}},{key:"addDepositAddress",value:function(e){e.error&&("no_address"===e.error.message?this.setState({emptyAddressDeposit:!0}):this.setState({emptyAddressDeposit:!1})),this.setState({receive_address:e,loading:!1})}},{key:"componentDidUpdate",value:function(){g.a.rebuild()}},{key:"onSubmit",value:function(t){if(t.preventDefault(),0===this.state.to_withdraw.getAmount())return this.setState({amountError:"transfer.errors.pos"});if(this.props.intermediateAccount){var a=this._getFee(),r=this._getGateFee(),n=this.state.to_withdraw.clone(),s=n.clone(this._getCurrentBalance().get("balance"));n.plus(r),s.lt(n)&&(n=this.state.to_withdraw.clone()),m.a.transfer(this.props.sender.get("id"),this.props.intermediateAccount,this.state.to_withdraw.getAmount(),this.state.to_withdraw.asset_id,this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,a.asset_id)}}},{key:"_updateAmount",value:function(){var e=this._getFee(),t=this._getCurrentBalance(),a=new u.a({amount:t?t.get("balance"):0,asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});a.asset_id===e.asset_id&&a.minus(e),this.state.to_withdraw.setAmount({sats:a.getAmount()}),this.setState({withdrawValue:a.getAmount({real:!0}),amountError:null},this._checkBalance)}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.sender;if(t){var a=["1.3.0",this.state.to_withdraw.asset_id],r={},n=[];a.forEach(function(a){n.push(Object(w.b)({accountID:t.get("id"),feeID:a,options:["price_per_kbyte"],data:{type:"memo",content:e.props.backingCoinType.toLowerCase()+":"+e.state.toAddress+(e.state.memo?":"+e.state.memo:"")}}))}),Promise.all(n).then(function(t){a.forEach(function(e,a){r[e]=t[a]}),p.a.are_equal_shallow(e.state.feeStatus,r)||e.setState({feeStatus:r}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.fee_asset_id;if(!this.props.sender)return null;Object(w.b)({accountID:this.props.sender.get("id"),feeID:t,options:["price_per_kbyte"],data:{type:"memo",content:this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+this.state.memo:"")}}).then(function(t){var a=t.fee,r=t.hasBalance,n=t.hasPoolBalance;e.setState({feeAmount:a,hasBalance:r,hasPoolBalance:n,error:!r||!n},e._checkFeeStatus)})}},{key:"_getCurrentBalance",value:function(){var e=this,t=this.props.balance?[this.props.balance]:this.props.balances;return t?t.find(function(t){return t&&t.get("asset_type")===e.props.asset.get("id")}):null}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,a=e.to_withdraw,r=this.props.asset,n=this._getCurrentBalance();if(n&&t){var s=Object(w.a)(a.getAmount({real:!0}),r,this._getFee(),n,this._getGateFee());if(null!==s)return this.state.balanceError!==!s&&this.setState({balanceError:!s}),s}}},{key:"_getFee",value:function(){var e={getAmount:function(){return 0},asset_id:this.state.fee_asset_id};if(!this.state.feeStatus||!this.state.feeAmount)return e;var t=this.state.feeStatus["1.3.0"],a=this.state.feeStatus[this.state.to_withdraw.asset_id];return t&&t.hasBalance?t.fee:t&&!t.hasBalance&&a&&a.hasBalance?a.fee:t?t.fee:e}},{key:"_onInputAmount",value:function(e){try{this.state.to_withdraw.setAmount({real:parseFloat(e.target.value||0)}),this.setState({withdrawValue:e.target.value,amountError:null},this._checkBalance)}catch(e){console.error("err:",e)}}},{key:"_onInputTo",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address_check_in_progress:!0,withdraw_address_selected:t,validAddress:null,toAddress:t}),this._validateAddress(t)}},{key:"_onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"_validateAddress",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(v.m)({url:x.h.BASE,walletType:a.walletType,newAddress:e}).then(function(a){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:!!a})}).catch(function(e){console.error("Error when validating address:",e)})}},{key:"_openRegistrarSite",value:function(e){e.preventDefault(),window.open(SettingsStore.site_registr,"_blank").opener=null}},{key:"_getGateFee",value:function(){var e=this.props,t=e.gateFee,a=e.asset;return new u.a({real:parseFloat(t?t.replace(",",""):0),asset_id:a.get("id"),precision:a.get("precision")})}},{key:"_renderWithdraw",value:function(){var e=this.state.amountError,t=p.a.replaceName(this.props.asset).name,a=1,r=this.props.supportsMemos,n=this._getFee(),o=this._getGateFee(),i=this.state.feeStatus[n.asset_id],l=C.ChainStore.getAsset(n.asset_id),u=i&&!i.hasBalance||this.state.balanceError||!this.state.toAddress||!this.state.withdrawValue;return s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement(c.a,{content:"gateway.withdraw_funds",asset:t,wallet_name:Object(O.r)()})),this._renderCurrentBalance(),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},y.a.translate("modal.withdraw.amount")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{tabIndex:a++,type:"number",min:"0",onKeyPress:this.onKeyPress.bind(this),value:this.state.withdrawValue,onChange:this._onInputAmount.bind(this)}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",null,t)))),e?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(c.a,{content:e})):null,this.state.balanceError?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(c.a,{content:"transfer.errors.insufficient"})):null),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},y.a.translate("transfer.fee")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{type:"text",disabled:!0,value:n.getAmount({real:!0})}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",null,l?s.a.createElement(S.a,{name:l.get("symbol")}):null)))),i&&!i.hasBalance?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(c.a,{content:"transfer.errors.insufficient"})):null),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},y.a.translate("gateway.fee")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{type:"text",disabled:!0,value:o.getAmount({real:!0})}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement("div",null,s.a.createElement(S.a,{name:this.props.asset.get("symbol")}))))),i&&!i.hasBalance?s.a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},s.a.createElement(c.a,{content:"transfer.errors.insufficient"})):null),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},y.a.translate("modal.withdraw.address")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("input",{placeholder:y.a.translate("gateway.withdraw_placeholder",{asset:t}),tabIndex:a++,type:"text",value:this.state.toAddress,onChange:this._onInputTo.bind(this)}),s.a.createElement("div",{className:"form-label select floating-dropdown"},s.a.createElement("div",{className:"dropdown-wrapper inactive"},s.a.createElement(P.Tooltip,{placement:"right",title:y.a.translate("tooltip.withdraw_address",{asset:t})},"?")))),!this.state.validAddress&&this.state.toAddress?s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},s.a.createElement(c.a,{content:"gateway.valid_address",coin_type:t})):null),r?s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement("label",{className:"left-label"},y.a.translate("transfer.memo")),s.a.createElement("div",{className:"inline-label input-wrapper"},s.a.createElement("textarea",{rows:"3",value:this.state.memo,tabIndex:a++,onChange:this._onMemoChanged.bind(this)})),!this.state.validAddress&&this.state.toAddress?s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},s.a.createElement(c.a,{content:"gateway.valid_address",coin_type:t})):null):null,s.a.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},s.a.createElement("button",{tabIndex:a++,className:"button"+(u?" disabled":""),onClick:this.onSubmit.bind(this),type:"submit"},s.a.createElement(c.a,{content:"gateway.withdraw_now"}))))}},{key:"_renderDeposit",value:function(){var e=this.state,t=e.receive_address,a=e.loading,r=e.emptyAddressDeposit,n=p.a.replaceName(this.props.asset).name,o=t&&"memo"in t&&t.memo,i=t&&t.address||"",l=1;return s.a.createElement("div",{className:i?"":"no-overflow"},s.a.createElement("p",null,s.a.createElement(c.a,{unsafe:!0,content:"gateway.add_funds",account:this.props.sender.get("name"),wallet_name:Object(O.r)()})),this._renderCurrentBalance(),s.a.createElement("div",{className:"SimpleTrade__withdraw-row"},s.a.createElement(P.Tooltip,{placement:"right",title:y.a.translate("tooltip.deposit_tip",{asset:n})},s.a.createElement("p",{style:{marginBottom:10}},s.a.createElement(c.a,{className:"help-tooltip",content:"gateway.deposit_to",asset:n}),":",s.a.createElement("label",{className:"fz_12 left-label"},s.a.createElement(c.a,{content:"gateway.deposit_notice_delay"})))),i?s.a.createElement("label",null,r?s.a.createElement(c.a,{content:"gateway.please_generate_address"}):s.a.createElement("span",{className:"inline-label"},s.a.createElement("input",{readOnly:!0,type:"text",value:i}),s.a.createElement(_.a,{text:i})," ")):s.a.createElement(E.a,{type:"three-bounce"}),o?s.a.createElement("label",null,s.a.createElement("span",{className:"inline-label"},s.a.createElement("input",{readOnly:!0,type:"text",value:y.a.translate("transfer.memo")+": "+t.memo}),s.a.createElement(_.a,{text:t.memo}))):null,t&&t.error?s.a.createElement("div",{className:"has-error",style:{paddingTop:10}},t.error.message):null),s.a.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},s.a.createElement("button",{tabIndex:l++,className:"button spinner-button-circle",onClick:this.requestDepositAddressLoad.bind(this),type:"submit"},a?s.a.createElement(E.a,{type:"circle"}):null,s.a.createElement(c.a,{content:"gateway.generate_new"}))))}},{key:"_renderCurrentBalance",value:function(){var e=p.a.replaceName(this.props.asset).name,t="deposit"===this.props.action,a=this._getCurrentBalance(),r=a?new u.a({asset_id:a.get("asset_type"),precision:this.props.asset.get("precision"),amount:a.get("balance")}):null,n=t?s.a.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},e):s.a.createElement(P.Tooltip,{placement:"right",title:y.a.translate("tooltip.withdraw_full")},s.a.createElement("button",{className:"button",style:{border:"2px solid black",borderLeft:"none"},onClick:this._updateAmount.bind(this,a?parseInt(a.get("balance"),10):0)},s.a.createElement(k.a,{name:"clippy",title:"icons.clippy.withdraw_full"})));return s.a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},s.a.createElement("label",{style:{fontSize:"1rem"}},y.a.translate("gateway.balance_asset",{asset:e}),":",s.a.createElement("span",{className:"inline-label"},s.a.createElement("input",{disabled:!0,style:{color:"black",border:"2px solid black",padding:10,width:"100%"},value:r?r.getAmount({real:!0}):0}),n)))}},{key:"render",value:function(){var e=this.props,t=e.asset,a="deposit"===e.action;if(!t)return null;p.a.replaceName(t).name;var r=this.props.isDown?s.a.createElement("div",null,s.a.createElement(c.a,{className:"txtlabel cancel",content:"gateway.unavailable_OPEN",component:"p"})):this.props.isAvailable?a?this._renderDeposit():this._renderWithdraw():s.a.createElement("div",null,s.a.createElement(c.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"p"}));return s.a.createElement("div",{className:"SimpleTrade__modal"},s.a.createElement("div",{className:"grid-block vertical no-overflow",style:{zIndex:1002,paddingLeft:"2rem",paddingRight:"2rem",paddingTop:"1rem"}},r))}}]),a}();j.propTypes={balance:d.a.ChainObject,sender:d.a.ChainAccount.isRequired,asset:d.a.ChainAsset.isRequired,coreAsset:d.a.ChainAsset.isRequired,globalObject:d.a.ChainAsset.isRequired},j.defaultProps={coreAsset:"1.3.0",globalObject:"2.0.0"},j=Object(h.a)(j);var q=function(e){function t(){B(this,t);var e=M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return F(t,s.a.Component),N(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){i.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e="deposit"===this.props.action?y.a.translate("gateway.deposit"):y.a.translate("modal.withdraw.submit");return s.a.createElement(P.Modal,{title:e,footer:[],visible:this.props.visible,onCancel:this.props.hideModal,className:"test",onClose:this.onClose.bind(this),overlay:!0,id:this.props.modalId},this.props.visible?s.a.createElement(j,T({},this.props,{open:this.props.visible})):null)}}]),t}();t.a=q}).call(this,a(120).Buffer)},2305:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(179),o=a(21),i=a(25),l=a(186),c=a(551),u=a(108),p=a(111),h=a(322),d=a(16),m=a(12),f=a(11),g=a(5),b=a.n(g),y=a(9),v=a.n(y),_=a(763),k=a.n(_),E=a(35),w=a.n(E),S=a(2006),C=a.n(S),A=a(1),x=a.n(A),O=a(23),P=a(88),T=a(126),N=a(65),B=a(27),M=a(106),F=a(14),j=a(3),q=a.n(j),I=a(38),R=a(39),L=a(46),D=a(2024),V=a(98),z=a(752),H=a(2119),W=a.n(H),U=a(20),G=(a(2059),a(53)),Q=a.n(G),K=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var J=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleQuickDepositVisibleChange=function(t){e.setState({isQuickDepositVisible:t}),t&&setTimeout(function(){Q.a.rebuild()},20)},e.state={forceReRender:!1,isSettleModalVisible:!1},e.showSettleModal=e.showSettleModal.bind(e),e.hideSettleModal=e.hideSettleModal.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),K(t,[{key:"_forceRender",value:function(e){this.state.forceReRender&&this.setState({forceReRender:!1}),this.props.parentWidth!==e.parentWidth&&this.setState({forceReRender:!0})}},{key:"shouldComponentUpdate",value:function(e,t){return this._forceRender(e,t),t.isSettleModalVisible!==this.state.isSettleModalVisible||e.amount!==this.props.amount||e.onBorrow!==this.props.onBorrow||e.total!==this.props.total||e.currentPrice!==this.props.currentPrice||e.price!==this.props.price||e.balance!==this.props.balance||e.account!==this.props.account||e.className!==this.props.className||!(!e.fee||!this.props.fee)&&e.fee.ne(this.props.fee)||e.isPredictionMarket!==this.props.isPredictionMarket||e.feeAsset!==this.props.feeAsset||e.isOpen!==this.props.isOpen||e.hasFeeBalance!==this.props.hasFeeBalance||e.expirationType!==this.props.expirationType||e.expirationCustomTime!==this.props.expirationCustomTime||e.parentWidth!==this.props.parentWidth||t.forceReRender!==this.state.forceReRender||e.singleColumnOrderForm!==this.props.singleColumnOrderForm||e.hideFunctionButtons!==this.props.hideFunctionButtons||t.isQuickDepositVisible!==this.state.isQuickDepositVisible}},{key:"showSettleModal",value:function(){this.setState({isSettleModalVisible:!0})}},{key:"hideSettleModal",value:function(){this.setState({isSettleModalVisible:!1})}},{key:"_addBalance",value:function(e){"bid"===this.props.type?this.props.totalChange({target:{value:e.getAmount({real:!0}).toString()}}):this.props.amountChange({target:{value:e.getAmount({real:!0}).toString()}})}},{key:"_setPrice",value:function(e){this.props.priceChange({target:{value:e.toString()}})}},{key:"onDeposit",value:function(){this.setState({isQuickDepositVisible:!1}),this.props.onDeposit()}},{key:"onBuy",value:function(){this.setState({isQuickDepositVisible:!1}),this.props.onBuy()}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,r=t.quote,s=t.base,o=t.amountChange,l=t.fee,c=t.isPredictionMarket,u=t.priceChange,p=t.onSubmit,h=t.balance,d=t.totalChange,m=t.balancePrecision,g=t.currentPrice,y=t.currentPriceObject,_=t.feeAsset,k=t.feeAssets,E=t.hasFeeBalance,S=t.hideHeader,C=t.verticalOrderForm,A=!!((this.refs.order_form?this.refs.order_form.clientWidth:0)<450||this.props.singleColumnOrderForm),x=void 0,O=void 0,P=void 0;this.props.amount&&(x=this.props.amount),this.props.price&&(O=this.props.price),this.props.total&&(P=this.props.total);var N=new B.a({amount:h?h.get("balance"):0,precision:m,asset_id:this.props.balanceId}),M=new B.a({amount:s.getIn(["options","max_market_fee"]),asset_id:s.get("asset_id"),precision:s.get("precision")}),j=new B.a({amount:r.getIn(["options","max_market_fee"]),asset_id:r.get("asset_id"),precision:r.get("precision")}),R=s.getIn(["options","market_fee_percent"])/100+"%",L=r.getIn(["options","market_fee_percent"])/100+"%",H=x?Math.min(j.getAmount({real:!0}),x*r.getIn(["options","market_fee_percent"])/1e4).toFixed(j.precision):0,G=x?Math.min(M.getAmount({real:!0}),P*s.getIn(["options","market_fee_percent"])/1e4).toFixed(M.precision):0,Q=T.a.getFlagBooleans(s.getIn(["options","flags"]),s.has("bitasset_data_id")),K=T.a.getFlagBooleans(r.getIn(["options","flags"]),r.has("bitasset_data_id")),J=F.a.replaceName(this.props.base),Z=J.name,Y=J.prefix,X=Q.charge_market_fee?C?n.a.createElement(f.Tooltip,{title:v.a.translate("tooltip.market_fee",{percent:R,asset:(Y||"")+Z})},n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-12 buy-sell-label"},n.a.createElement(q.a,{content:"explorer.asset.summary.market_fee"}),", ",R),n.a.createElement("div",{className:"inputAddon small-12"},n.a.createElement(z.a,{placeholder:"0.0",id:"baseMarketFee",defaultValue:G,value:G,addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{noTip:!0,name:s.get("symbol")}))})))):A?n.a.createElement(f.Tooltip,{title:v.a.translate("tooltip.market_fee",{percent:R,asset:(Y||"")+Z})},n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-3 buy-sell-label"},n.a.createElement(q.a,{content:"explorer.asset.summary.market_fee"}),", ",R),n.a.createElement("div",{className:"inputAddon small-9"},n.a.createElement(z.a,{placeholder:"0.0",id:"baseMarketFee",defaultValue:G,value:G,addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{noTip:!0,name:s.get("symbol")}))})))):n.a.createElement(f.Tooltip,{title:v.a.translate("tooltip.market_fee",{percent:R,asset:(Y||"")+Z})},n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-12 buy-sell-label"},n.a.createElement(q.a,{content:"explorer.asset.summary.market_fee"}),", ",R),n.a.createElement("div",{className:"inputAddon small-12"},n.a.createElement(z.a,{placeholder:"0.0",id:"baseMarketFee",defaultValue:G,value:G,addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{noTip:!0,name:s.get("symbol")}))})))):null,$=F.a.replaceName(this.props.quote),ee=$.name,te=$.prefix,ae=K.charge_market_fee?C?n.a.createElement(f.Tooltip,{title:v.a.translate("tooltip.market_fee",{percent:L,asset:(te||"")+ee})},n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-12 buy-sell-label"},n.a.createElement(q.a,{content:"explorer.asset.summary.market_fee"}),", ",L),n.a.createElement("div",{className:"inputAddon small-12"},n.a.createElement(z.a,{placeholder:"0.0",id:"quoteMarketFee",defaultValue:H,value:H,addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{style:{width:100},noTip:!0,name:r.get("symbol")}))})))):A?n.a.createElement(f.Tooltip,{title:v.a.translate("tooltip.market_fee",{percent:L,asset:(te||"")+ee})},n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-3 buy-sell-label"},n.a.createElement(q.a,{content:"explorer.asset.summary.market_fee"}),", ",L),n.a.createElement("div",{className:"inputAddon small-9"},n.a.createElement(z.a,{placeholder:"0.0",id:"quoteMarketFee",defaultValue:H,value:H,addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{style:{width:100},noTip:!0,name:r.get("symbol")}))})))):n.a.createElement(f.Tooltip,{title:v.a.translate("tooltip.market_fee",{percent:L,asset:(te||"")+ee})},n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-12 buy-sell-label"},n.a.createElement(q.a,{content:"explorer.asset.summary.market_fee"}),", ",L),n.a.createElement("div",{className:"inputAddon small-12"},n.a.createElement(z.a,{placeholder:"0.0",id:"quoteMarketFee",defaultValue:H,value:H,addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{style:{width:100},noTip:!0,name:r.get("symbol")}))})))):null,re=C?null:n.a.createElement("div",{style:{visibility:"hidden"},className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-3 buy-sell-label"},n.a.createElement(q.a,{content:"explorer.asset.summary.market_fee"})),n.a.createElement("div",{className:"inputAddon small-9"},n.a.createElement(z.a,{placeholder:"0.0",id:"emptyPlaceholder",defaultValue:"0",addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{style:{width:100},noTip:!0,name:r.get("symbol")}))}))),ne="bid"===a,se=ne&&ae?ae:!ne&&X?X:ae||X?re:null,oe=ne?N.getAmount({real:!0})>=parseFloat(P):N.getAmount({real:!0})>=parseFloat(x),ie=ne?v.a.translate("exchange.buy"):v.a.translate("exchange.sell"),le=!c&&!(N.getAmount()>0&&oe),ce=!(O>0),ue=!(x>0),pe=le||ce||ue,he=b()(a,{disabled:pe}),de=ne?s.get("symbol"):r.get("symbol"),me=ce?v.a.translate("exchange.invalid_price"):ue?v.a.translate("exchange.invalid_amount"):le?v.a.translate("exchange.no_balance"):null;k[1]&&"1.3.0"===k[1].getIn(["options","core_exchange_rate","quote","asset_id"])&&"1.3.0"===k[1].getIn(["options","core_exchange_rate","base","asset_id"])&&(_=k[0],k.splice(1,1));var fe=0,ge=k.map(function(e){var t=F.a.replaceName(e),a=t.name,r=t.prefix;return n.a.createElement(f.Select.Option,{key:e.get("id"),value:fe++},r,a)}),be=void 0;be=_.get("symbol")===de?N.clone(N.getAmount()-l.getAmount()):N;ne?v.a.translate("walkthrough.buy_form"):v.a.translate("walkthrough.sell_form");var ye=Object.keys(this.props.expirations).map(function(t,a){return n.a.createElement("option",{value:t,key:t},e.props.expirations[t].title)}),ve=i.a.getState().settings.get("themes"),_e=w()(),ke=void 0;ke=C?n.a.createElement("div",{className:"small-12"},n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-12 buy-sell-label",content:"exchange.price"}),n.a.createElement("div",{className:"inputAddon small-12"},n.a.createElement(z.a,{id:a+"Price",value:O,onChange:u,autoComplete:"off",placeholder:"0.0",addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{dataPlace:"right",name:s.get("symbol")}),"Â /Â ",n.a.createElement(V.a,{dataPlace:"right",name:r.get("symbol")}))}))),n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-12 buy-sell-label",content:"transfer.amount"}),n.a.createElement("div",{className:"inputAddon small-12"},n.a.createElement(z.a,{id:a+"Amount",value:x,onChange:o,autoComplete:"off",placeholder:"0.0",addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{dataPlace:"right",name:r.get("symbol")}))}))),n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-12 buy-sell-label",content:"exchange.total"}),n.a.createElement("div",{className:"inputAddon small-12"},n.a.createElement(z.a,{id:a+"Total",value:P,onChange:d,autoComplete:"off",placeholder:"0.0",addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{dataPlace:"right",name:s.get("symbol")}))}))),n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-12 buy-sell-label",content:"transfer.fee"}),n.a.createElement("div",{className:"inputAddon small-12"},n.a.createElement(z.a,{id:a+"Fee",placeholder:"0.0",defaultValue:E?l.getAmount({real:!0}):v.a.translate("transfer.errors.insufficient"),disabled:!0,addonAfter:n.a.createElement(f.Select,{style:{width:100},disabled:1===k.length,defaultValue:k.indexOf(this.props.feeAsset),onChange:this.props.onChangeFeeAsset},ge)}))),se):A?n.a.createElement("div",{className:"small-12"},n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-3 buy-sell-label",content:"exchange.price"}),n.a.createElement("div",{className:"inputAddon small-9"},n.a.createElement(z.a,{id:a+"Price",value:O,onChange:u,autoComplete:"off",placeholder:"0.0",addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{dataPlace:"right",name:s.get("symbol")}),"Â /Â ",n.a.createElement(V.a,{dataPlace:"right",name:r.get("symbol")}))}))),n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-3 buy-sell-label",content:"transfer.amount"}),n.a.createElement("div",{className:"inputAddon small-9"},n.a.createElement(z.a,{id:a+"Amount",value:x,onChange:o,autoComplete:"off",placeholder:"0.0",addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{dataPlace:"right",name:r.get("symbol")}))}))),n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-3 buy-sell-label",content:"exchange.total"}),n.a.createElement("div",{className:"inputAddon small-9"},n.a.createElement(z.a,{id:a+"Total",value:P,onChange:d,autoComplete:"off",placeholder:"0.0",addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{dataPlace:"right",name:s.get("symbol")}))}))),n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-3 buy-sell-label",content:"transfer.fee"}),n.a.createElement("div",{className:"inputAddon small-9"},n.a.createElement(z.a,{id:a+"Fee",placeholder:"0.0",value:E?l.getAmount({real:!0}):v.a.translate("transfer.errors.insufficient"),disabled:!0,addonAfter:n.a.createElement(f.Select,{style:{width:100},disabled:1===k.length,defaultValue:k.indexOf(this.props.feeAsset),onChange:this.props.onChangeFeeAsset},ge)}))),se):n.a.createElement("div",{className:"small-12"},n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6"},n.a.createElement("div",{className:"small-11 grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-3 buy-sell-label",content:"exchange.price"}),n.a.createElement("div",{className:"small-9 buy-sell-label",style:{textAlign:"right"}},n.a.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"},onClick:this.props.setPrice.bind(this,a,y.sellPrice())},n.a.createElement(D.a,{price:g,quote:r,base:s})," "))),n.a.createElement("div",{className:"inputAddon small-11"},n.a.createElement(z.a,{id:a+"Price",value:O,onChange:u,autoComplete:"off",placeholder:"0.0",addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{dataPlace:"right",name:s.get("symbol")}),"Â /Â ",n.a.createElement(V.a,{dataPlace:"right",name:r.get("symbol")}))}))),n.a.createElement("div",{className:"small-6"},n.a.createElement("div",{className:"small-12 grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-3 buy-sell-label",content:"exchange.total"}),n.a.createElement("div",{className:"small-9 buy-sell-label",style:{textAlign:"right"}},n.a.createElement(q.a,{className:"small-3 buy-sell-label",content:"exchange.balance"}),"Â ",n.a.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"},onClick:this._addBalance.bind(this,be)},F.a.format_number(N.getAmount({real:!0}),m)," "))),n.a.createElement("div",{className:"inputAddon small-12"},n.a.createElement(z.a,{id:a+"Total",value:P,onChange:d,autoComplete:"off",placeholder:"0.0",addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{dataPlace:"right",name:s.get("symbol")}))})))),n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6"},n.a.createElement(q.a,{className:"small-3 buy-sell-label",content:"transfer.amount"}),n.a.createElement("div",{className:"inputAddon small-11"},n.a.createElement(z.a,{id:a+"Amount",value:x,onChange:o,autoComplete:"off",placeholder:"0.0",addonAfter:n.a.createElement("span",null,n.a.createElement(V.a,{dataPlace:"right",name:r.get("symbol")}))}))),n.a.createElement("div",{className:"small-6"},n.a.createElement(q.a,{className:"small-3 buy-sell-label",content:"transfer.fee"}),n.a.createElement("div",{className:"inputAddon small-12"},n.a.createElement(z.a,{id:a+"Fee",placeholder:"0.0",defaultValue:E?l.getAmount({real:!0}):v.a.translate("transfer.errors.insufficient"),disabled:!0,addonAfter:n.a.createElement(f.Select,{style:{width:100},disabled:1===k.length,defaultValue:k.indexOf(this.props.feeAsset),onChange:this.props.onChangeFeeAsset},ge)})))));var Ee=ne?s:r;Ee.get("bitasset");return n.a.createElement("div",{className:b()(this.props.className),style:this.props.styles},n.a.createElement("div",{className:"buy-sell-container",style:{paddingRight:5}},S?null:n.a.createElement("div",{className:"exchange-content-header "+a},n.a.createElement("span",null,n.a.createElement(I.a,{string:"exchange.buysell_formatter",noLink:!0,noTip:!0,keys:[{type:"asset",value:r.get("symbol"),arg:"asset"},{type:"translate",value:c?"exchange.short":ne?"exchange.buy":"exchange.sell",arg:"direction"}]})),this.props.onFlip&&!this.props.hideFunctionButtons?n.a.createElement("span",{onClick:this.props.onFlip,style:{cursor:"pointer",fontSize:"1rem"},className:"flip-arrow"}," ","â"):null,this.props.onTogglePosition&&!this.props.hideFunctionButtons?n.a.createElement("span",{onClick:this.props.onTogglePosition,style:{cursor:"pointer",fontSize:"1rem"},className:"flip-arrow"}," ","â"):null,this.props.moveOrderForm&&!this.props.hideFunctionButtons?n.a.createElement(U.a,{onClick:this.props.moveOrderForm,name:"thumb-tack",className:"icon-14px icon-fill order-book-button-v",style:{marginLeft:5}}):null),n.a.createElement("form",{ref:"order_form",className:(this.props.isOpen?"":"hide-container ")+"order-form",style:{fontSize:"14px"},noValidate:!0},n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},this.props.moveOrderForm&&C?n.a.createElement("div",{style:{width:"100%",textAlign:"right"},onClick:this.props.moveOrderForm},n.a.createElement(U.a,{name:"thumb-tack",className:"icon-18px icon-fill order-book-button-v"})):null,ke),n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:A?"small-12 grid-block":"small-6"},n.a.createElement(q.a,{className:"small-4 buy-sell-label",content:"transaction.expiration"}),n.a.createElement("div",{className:"small-8 expiration-datetime-picker"},n.a.createElement("select",{className:"SPECIFIC"===this.props.expirationType&&A?"expiration-datetime-picker--select--specific":"",style:{cursor:"pointer"},onChange:this.props.onExpirationTypeChange,value:this.props.expirationType},ye),"SPECIFIC"===this.props.expirationType?n.a.createElement(W.a,{pickerPosition:"bottom center",wrapperClassName:ve,timePicker:!0,min:_e,inputFormat:"Do MMM YYYY hh:mm A",value:this.props.expirationCustomTime,onChange:this.props.onExpirationCustomChange}):null)),A?null:n.a.createElement("div",{className:"small-6"},se),n.a.createElement("div",{className:"small-12 medium-12 xlarge-12"},A?n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-4 buy-sell-label",content:ne?"exchange.lowest_ask":"exchange.highest_bid"}),n.a.createElement("div",{className:"small-8 buy-sell-label"},n.a.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"},onClick:this.props.setPrice.bind(this,a,y.sellPrice())},n.a.createElement(D.a,{price:g,quote:r,base:s})," ",n.a.createElement(V.a,{name:s.get("symbol"),noTip:!0}),"/",n.a.createElement(V.a,{name:r.get("symbol"),noTip:!0})))):null,A?n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement(q.a,{className:"small-4 buy-sell-label",content:"exchange.balance"}),n.a.createElement("div",{className:"small-8 buy-sell-label"},n.a.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"},onClick:this._addBalance.bind(this,be)},F.a.format_number(N.getAmount({real:!0}),m)," ",n.a.createElement(V.a,{name:de,noTip:!0})))):null,n.a.createElement("div",{style:{marginTop:10}},n.a.createElement("div",null,n.a.createElement(f.Tooltip,{placement:"top",title:me||""},n.a.createElement(f.Button,{className:pe?null:he,disabled:pe,onClick:p.bind(this,!0),type:"primary",style:{margin:5}},ne?"Buy":"Sell")),this.props.currentBridges&&!this.props.backedCoin?n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.quick_deposit_bridge",{target:ne?Z:ee})},n.a.createElement(f.Button,{style:{margin:5},onClick:this.props.onBuy.bind(this),disabled:!this.props.currentAccount||"1.2.3"===this.props.currentAccount.get("id")},n.a.createElement(q.a,{content:"exchange.quick_deposit",asset:ne?Z:ee}))):null,this.props.backedCoin&&!this.props.currentBridges?n.a.createElement(f.Tooltip,{title:v.a.translate("tooltip.gateway")},n.a.createElement(f.Button,{style:{margin:5},onClick:this.props.onDeposit.bind(this),disabled:!this.props.currentAccount||"1.2.3"===this.props.currentAccount.get("id")},n.a.createElement(q.a,{content:"exchange.quick_deposit",asset:ne?Z:ee}))):null,this.props.currentBridges&&this.props.backedCoin?n.a.createElement(f.Popover,{title:n.a.createElement(q.a,{content:"exchange.quick_deposit",asset:ne?Z:ee}),trigger:"click",visible:this.state.isQuickDepositVisible,onVisibleChange:this.handleQuickDepositVisibleChange,content:n.a.createElement("div",null,n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.quick_deposit_gateway",{asset:ne?Z:ee})},n.a.createElement(f.Button,{style:{marginRight:5},onClick:this.onDeposit.bind(this)},n.a.createElement(q.a,{content:"exchange.quick_deposit_gateway_button"}))),n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.quick_deposit_bridge",{target:ne?Z:ee})},n.a.createElement(f.Button,{onClick:this.onBuy.bind(this)},n.a.createElement(q.a,{content:"exchange.quick_deposit_bridge_button"}))))},n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.quick_deposit_tooltip",{asset:ne?Z:ee})},n.a.createElement(f.Button,{style:{margin:5},disabled:!this.props.currentAccount||"1.2.3"===this.props.currentAccount.get("id")},n.a.createElement(q.a,{content:"exchange.quick_deposit",asset:ne?Z:ee})))):null,this.props.onBorrow?n.a.createElement(f.Button,{style:{margin:5},disabled:!this.props.currentAccount||"1.2.3"===this.props.currentAccount.get("id"),onClick:this.props.onBorrow},n.a.createElement(q.a,{content:"exchange.borrow"})):null,null)))),n.a.createElement("div",null,n.a.createElement("div",{className:"grid-content clear-fix no-padding"},me&&c?n.a.createElement(f.Tooltip,{title:me,placement:"right"},n.a.createElement("div",{style:{paddingRight:10},className:"float-right"},n.a.createElement("input",{style:{margin:0},className:he,type:"submit",onClick:p.bind(this,!1),value:ie}))):c?n.a.createElement(f.Tooltip,{title:"",placement:"right"},n.a.createElement("div",{style:{paddingRight:10},className:"float-right"},n.a.createElement("input",{style:{margin:0},className:he,type:"submit",onClick:p.bind(this,!1),value:ie}))):null)))),!1)}}]),t}();J.propTypes={balance:R.a.ChainObject,type:x.a.string,amountChange:x.a.func.isRequired,priceChange:x.a.func.isRequired,onSubmit:x.a.func.isRequired,onExpirationTypeChange:x.a.func.isRequired,onExpirationCustomChange:x.a.func.isRequired},J.defaultProps={type:"bid"};var Z=Object(L.a)(J),Y=a(2297),X=a(567),$=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var ee=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={change:null,curMarket:null,marketChange:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),$(t,[{key:"shouldComponentUpdate",value:function(e){return!(!e.volume2||e.volume2===this.props.volume2)||(e.price!==this.props.price||e.ready!==this.props.ready||e.volume!==this.props.volume)}},{key:"componentWillReceiveProps",value:function(e){var t={change:0},a=e.market,r=this.state.curMarket!==a,n=null!=this.state.curMarket&&r;t.marketChange=n,t.curMarket=a,t.prevAsset=this.state.marketAsset,e.ready&&this.props.ready&&(t.change=parseFloat(e.price)-parseFloat(this.props.price)),this.setState(t)}},{key:"componentDidUpdate",value:function(){Q.a.rebuild()}},{key:"render",value:function(){var e=this.props,t=e.base,a=e.quote,r=e.price,s=e.content,o=e.ready,i=e.volume,l=e.toolTip,c=e.ignoreColorChange,u=this.state,p=u.change,h=null;!u.marketChange&&p&&null!==p&&!0!==c&&(h=p>0?"pulsate green":"pulsate red");var d="";if(i){var m=n.a.createElement("span",null,F.a.format_volume(i.base.volume)+" ",n.a.createElement(V.a,{name:i.base.asset.get("symbol")})),g=n.a.createElement("span",null,F.a.format_volume(i.quote.volume)+" ",n.a.createElement(V.a,{name:i.quote.asset.get("symbol")}));d=n.a.createElement("span",null,i.swap?g:m," / ",i.swap?m:g)}else d=F.a.price_text(r,a,t);return n.a.createElement("li",{className:b()("stressed-stat",this.props.className,h),onClick:this.props.onClick},n.a.createElement(f.Tooltip,{placement:"bottom",title:l},n.a.createElement("span",null,n.a.createElement("span",{className:"value stat-primary"},o?d:0,"Â "),n.a.createElement("span",{className:"symbol-text"},!!t&&n.a.createElement(V.a,{name:t.get("symbol")}))),s?n.a.createElement("div",{className:"stat-text"},n.a.createElement(q.a,{content:s})):null))}}]),t}(),te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ae=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oe=function(e){function t(){return re(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return se(t,n.a.Component),ae(t,[{key:"_getFeedPrice",value:function(){return this.props?1/F.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_getCollateralRatio",value:function(){var e=this.props.object.toJS();return F.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(F.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:"_getMR",value:function(){return this.props.debtAsset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3}},{key:"_getStatusClass",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?"danger":e<t+.5?"warning":""}},{key:"_getCRTip",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&""!==e?"danger"===e?v.a.translate("tooltip.cr_danger",{mr:t}):"warning"===e?v.a.translate("tooltip.cr_warning",{mr:t}):null:null}},{key:"render",value:function(){var e=this.props.object.toJS(),t=this._getCollateralRatio(),a=(F.a.get_asset_amount(e.debt,this.props.debtAsset),this._getStatusClass());return n.a.createElement(f.Tooltip,{placement:"bottom",title:this._getCRTip()},n.a.createElement("li",{className:b()("stressed-stat",this.props.className),onClick:this.props.onClick},n.a.createElement("span",null,n.a.createElement("span",{className:b()("value stat-primary",a)},F.a.format_number(t,2))),n.a.createElement("div",{className:"stat-text"},n.a.createElement(q.a,{content:"header.collateral_ratio"}))))}}]),t}();oe.propTypes={debtAsset:R.a.ChainAsset.isRequired,collateralAsset:R.a.ChainAsset.isRequired},oe=Object(L.a)(oe);var ie=function(e){function t(){return re(this,t),ne(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return se(t,n.a.Component),ae(t,[{key:"render",value:function(){var e=this.props,t=e.object,a=e.account,r=t.getIn(["call_price","quote","asset_id"]),s=t.getIn(["call_price","base","asset_id"]);return n.a.createElement(oe,te({debtAsset:r,collateralAsset:s,account:a},this.props))}}]),t}();ie.propTypes={object:R.a.ChainObject.isRequired};var le=ie=Object(L.a)(ie),ce=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var ue=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={isModalVisible:!1,volumeShowQuote:!0,selectedMarketPickerAsset:e.selectedMarketPickerAsset},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),ce(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({selectedMarketPickerAsset:e.selectedMarketPickerAsset})}},{key:"shouldComponentUpdate",value:function(e){return!!e.marketReady}},{key:"componentDidUpdate",value:function(){this._updateTitle()}},{key:"_updateTitle",value:function(){var e=this.props,t=e.quoteAsset,a=e.baseAsset,r=e.latestPrice;r&&this._quoteName&&this._baseName&&(document.title=F.a.price_text(r,t,a)+" "+this._quoteName+" / "+this._baseName)}},{key:"_addMarket",value:function(e,t){var a=e+"_"+t;this.props.starredMarkets.has(a)?O.a.removeStarMarket(e,t):O.a.addStarMarket(e,t)}},{key:"changeVolumeBase",value:function(){this.setState({volumeShowQuote:!this.state.volumeShowQuote})}},{key:"marketPicker",value:function(e){var t=this.state.selectedMarketPickerAsset;t=t&&t==e?null:e,this.setState({selectedMarketPickerAsset:t}),this.props.onToggleMarketPicker(t)}},{key:"render",value:function(){var e=this,t=this.props,r=t.quoteAsset,s=t.baseAsset,o=t.starredMarkets,i=t.hasPrediction,l=t.feedPrice,c=t.showCallLimit,u=t.lowestCallPrice,p=t.marketReady,h=t.latestPrice,d=t.marketStats,g=t.account,b=s.get("symbol"),y=r.get("symbol"),_=y+"_"+b,k=o.has(_)?"gold-star":"grey-star",E=d.get("change"),w=0===parseFloat(E)?"":parseFloat(E)<0?"negative":"positive",S=d.get("volumeBase"),C=d.get("volumeQuote"),A=E>0?"+"+E:E,x=!1,O=r.get("id"),T=s.get("id"),N="1.3.0"===O?T:"1.3.0"===T?O:null,M=N?m.ChainStore.getAsset(N):null,F="",j=null,I="exchange.settle",R="tooltip.settle_price";if(!!M&&!!M.get("bitasset")){if(g.toJS&&g.has("call_orders"))for(var L=g.get("call_orders").toJS(),D=0;D<L.length;D++){var z=L[D];if(m.ChainStore.getObject(z).getIn(["call_price","quote","asset_id"])===N){F=z,x=!0;break}}var H="1.3.0"==T?r:"1.3.0"==O?s:r;if(M.get("bitasset").get("settlement_fund")>0)I="exchange.global_settle",R="tooltip.global_settle_price",(j=M.get("bitasset").get("settlement_price").toJS()).base.asset_id==s.get("id")?(j.base.precision=s.get("precision"),j.quote.precision=r.get("precision")):(j.quote.precision=s.get("precision"),j.base.precision=r.get("precision")),j=new B.i({quote:new B.a({asset_id:j.quote.asset_id,precision:j.quote.precision,amount:j.quote.amount}),base:new B.a({asset_id:j.base.asset_id,precision:j.base.precision,amount:j.base.amount})}).toReal(),j="1.3.0"==T?1/j:j;else if(H&&l){var W=H.getIn(["bitasset","options"]).toJS().force_settlement_offset_percent;j="1.3.0"==T?l.toReal()/(1+W/1e4):l.toReal()*(1+W/1e4)}}var G={assetImage:{maxWidth:16,maxHeight:16,marginRight:5,marginTop:-2}},Q=a(9),K=!!this.state.selectedMarketPickerAsset&&this.state.selectedMarketPickerAsset==y,J=!!this.state.selectedMarketPickerAsset&&this.state.selectedMarketPickerAsset==b,Z=this.props.hasAnyPriceAlert?"exchange--price-alert--show-modal--active":"";return n.a.createElement("div",{className:"grid-block shrink no-padding overflow-visible top-bar"},n.a.createElement("div",{className:"grid-block overflow-visible"},n.a.createElement("div",{className:"grid-block shrink"},n.a.createElement("div",{style:{padding:"10px"}},i?n.a.createElement("a",{className:"market-symbol"},n.a.createElement("span",null,y+" : "+b)):n.a.createElement("div",{style:{padding:"0 5px",fontSize:this.props.tinyScreen?"13px":"18px",marginTop:"1px"}},n.a.createElement(f.Icon,{onClick:this.props.showPriceAlertModal,type:"bell",className:"exchange--price-alert--show-modal "+Z,"data-intro":Q.translate("walkthrough.price_alerts")}),n.a.createElement("span",{onClick:this.marketPicker.bind(this,y),className:"underline",style:{cursor:"pointer",color:K?"#2196f3":""}},n.a.createElement(X.a,{name:y,style:G.assetImage}),n.a.createElement(V.a,{name:y,replace:!0,noTip:!0,onRenderedName:function(t){e._quoteName=t}})),n.a.createElement("span",{style:{padding:"0 5px"}},"/"),n.a.createElement("span",{onClick:this.marketPicker.bind(this,b),className:"underline",style:{cursor:"pointer",color:J?"#2196f3":""}},n.a.createElement(X.a,{name:b,style:G.assetImage}),n.a.createElement(V.a,{name:b,replace:!0,noTip:!0,onRenderedName:function(t){e._baseName=t}}))),n.a.createElement("div",{className:"label-actions"},n.a.createElement(q.a,{component:"span",style:{padding:"5px 0 0 5px"},className:"stat-text",content:"exchange.trading_pair"}),n.a.createElement(Y.a,{onClick:function(){P.a.switchMarket()},to:"/market/"+b+"_"+y,"data-intro":Q.translate("walkthrough.switch_button")},n.a.createElement(U.a,{className:"shuffle",name:"shuffle",title:"icons.shuffle"})),n.a.createElement("a",{onClick:function(){e._addMarket(e.props.quoteAsset.get("symbol"),e.props.baseAsset.get("symbol"))},"data-intro":Q.translate("walkthrough.favourite_button")},n.a.createElement(U.a,{className:k,name:"fi-star",title:"icons.fi_star.market"}))))),n.a.createElement("div",{className:"grid-block vertical",style:{overflow:"visible"}},n.a.createElement("div",{className:"grid-block wrap market-stats-container"},n.a.createElement("ul",{className:"market-stats stats top-stats"},h?n.a.createElement(ee,{ignoreColorChange:!0,ready:p,price:h,quote:r,base:s,market:_,content:"exchange.latest"}):null,n.a.createElement("li",{className:"hide-order-1 stressed-stat daily_change "+w},n.a.createElement("span",null,n.a.createElement("b",{className:"value"},p?A:0),n.a.createElement("span",null," %")),n.a.createElement(q.a,{component:"div",className:"stat-text",content:"account.hour_24"})),S>=0?n.a.createElement(ee,{ignoreColorChange:!0,onClick:this.changeVolumeBase.bind(this),ready:p,decimals:0,volume:{base:{volume:S,asset:s},quote:{volume:C,asset:r},swap:this.state.volumeShowQuote},className:"hide-order-2 clickable",market:_,content:"exchange.volume_24"}):null,!i&&l?n.a.createElement(ee,{ignoreColorChange:!0,toolTip:v.a.translate("tooltip.feed_price"),ready:p,className:"hide-order-3",price:l.toReal(),quote:r,base:s,market:_,content:"exchange.feed_price"}):null,!i&&j?n.a.createElement(ee,{ignoreColorChange:!0,toolTip:v.a.translate(R),ready:p,className:"hide-order-4",price:j,quote:r,base:s,market:_,content:I}):null,x?n.a.createElement(le,{object:F,account:g,className:"hide-order-1"}):null,u&&c?n.a.createElement(ee,{toolTip:v.a.translate("tooltip.call_limit"),ready:p,className:"hide-order-5 is-call",price:u,quote:r,base:s,market:_,content:"explorer.block.call_limit"}):null,l&&c?n.a.createElement(ee,{toolTip:v.a.translate("tooltip.margin_price"),ready:p,className:"hide-order-6 is-call",price:l.getSqueezePrice({real:!0}),quote:r,base:s,market:_,content:"exchange.squeeze"}):null),n.a.createElement("ul",{className:"market-stats stats top-stats","data-position":"left","data-step":"1","data-intro":Q.translate("walkthrough.personalize")},this.props.tinyScreen?null:n.a.createElement("li",{className:"stressed-stat input clickable column-hide-xs",style:{padding:"16px 16px 16px 0px"},onClick:this.props.onToggleQuickChartType.bind(this)},n.a.createElement(f.Icon,{type:"market_depth"===this.props.chartType?"bar-chart":"area-chart",style:{paddingRight:5}}),n.a.createElement(q.a,{content:"market_depth"===this.props.chartType?"exchange.price_history":"exchange.market_depth"})),n.a.createElement("li",{className:"stressed-stat input clickable",style:{padding:"16px 16px 16px 0px"},onClick:this.props.onTogglePersonalize.bind(this)},n.a.createElement(f.Icon,{type:"setting",style:{paddingRight:5}}),n.a.createElement(q.a,{className:"hide-order-2",content:"exchange.settings.header.title"})))))))}}]),t}(),pe=a(2060),he=a(2155),de=a(2001),me=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ye=function(e){function t(){return fe(this,t),ge(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return be(t,n.a.Component),me(t,[{key:"render",value:function(){var e=this.props,t=e.orderRows,a=e.noOrders,r=e.isBid,s=e.id;return n.a.createElement(de.a,{id:s,ref:r?"bidTransition":"askTransaction",className:"transition-container clickable",component:"div",transitionName:"newrow"},t.length>0?t:a||n.a.createElement("div",{className:"sticky-table-row"},n.a.createElement("td",{className:"cell no-orders",colSpan:"3"},r?n.a.createElement(q.a,{content:"exchange.no_bids"}):n.a.createElement(q.a,{content:"exchange.no_asks"}))))}}]),t}();ye.propTypes={orderRows:x.a.array.isRequired,noOrders:x.a.bool.isRequired,isBid:x.a.bool.isRequired};var ve=function(e){function t(){return fe(this,t),ge(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return be(t,n.a.Component),me(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.market_base===this.props.order.market_base&&(e.order.ne(this.props.order)||e.index!==this.props.index||e.currentAccount!==this.props.currentAccount||e.isPanelActive!==this.props.isPanelActive||e.horizontal!==this.props.horizontal)}},{key:"render",value:function(){var e=this.props,t=e.order,a=e.quote,r=e.base,s=e.final,o=t.isBid(),i=t.isCall()?"orderHistoryCall":o?"orderHistoryBid":"orderHistoryAsk",l=n.a.createElement(D.a,{price:t.getPrice(),quote:a,base:r});return n.a.createElement("div",{onClick:this.props.onClick,className:b()("sticky-table-row order-row",{"final-row":s},{"my-order":t.isMine(this.props.currentAccount)})},n.a.createElement("div",{className:"cell left"},F.a.format_number(t[o?"amountForSale":"amountToReceive"]().getAmount({real:!0}),r.get("precision"))),n.a.createElement("div",{className:"cell"},F.a.format_number(t[o?"amountToReceive":"amountForSale"]().getAmount({real:!0}),a.get("precision"))),n.a.createElement("div",{className:"cell "+i+" right"},l))}}]),t}(),_e=function(e){return e?e.getBoundingClientRect().height:0},ke=function(e){function t(){return fe(this,t),ge(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return be(t,n.a.Component),me(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.ne(this.props.order)||e.position!==this.props.position||e.index!==this.props.index||e.currentAccount!==this.props.currentAccount}},{key:"render",value:function(){var e=this.props,t=e.order,a=e.quote,r=e.base,s=e.position,o=t.isBid(),i=t.isCall()?"orderHistoryCall":o?"orderHistoryBid":"orderHistoryAsk",l=n.a.createElement(D.a,{price:t.getPrice(),quote:a,base:r}),c=o?F.a.format_number(t.amountToReceive().getAmount({real:!0}),a.get("precision")):F.a.format_number(t.amountForSale().getAmount({real:!0}),a.get("precision")),u=o?F.a.format_number(t.amountForSale().getAmount({real:!0}),r.get("precision")):F.a.format_number(t.amountToReceive().getAmount({real:!0}),r.get("precision")),p=o?F.a.format_number(t.totalForSale().getAmount({real:!0}),r.get("precision")):F.a.format_number(t.totalToReceive().getAmount({real:!0}),r.get("precision"));return n.a.createElement("tr",{onClick:this.props.onClick,className:t.isMine(this.props.currentAccount)?"my-order":""},"left"===s?n.a.createElement("td",{className:"column-hide-xs"},p):n.a.createElement("td",{style:{width:"25%"},className:i},l),n.a.createElement("td",null,"left"===s?u:c),n.a.createElement("td",null,"left"===s?c:u),"right"===s?n.a.createElement("td",{className:"column-hide-xs"},p):n.a.createElement("td",{style:{width:"25%"},className:i},l))}}]),t}(),Ee=function(e){function t(){return fe(this,t),ge(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return be(t,n.a.Component),me(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.market_base===this.props.order.market_base&&(e.order.ne(this.props.order)||e.index!==this.props.index||e.currentAccount!==this.props.currentAccount)}},{key:"render",value:function(){var e=this.props,t=e.order,a=e.quote,r=e.base,s=e.final,o=t.isBid(),i=o?"orderHistoryBid":"orderHistoryAsk",l=n.a.createElement(D.a,{price:t.getPrice(),quote:a,base:r});return n.a.createElement("div",{onClick:this.props.onClick,className:b()("sticky-table-row order-row",{"final-row":s})},n.a.createElement("div",{className:"cell left"},F.a.format_number(t[o?"amountForSale":"amountToReceive"]().getAmount({real:!0}),r.get("precision"))),n.a.createElement("div",{className:"cell"},F.a.format_number(t[o?"amountToReceive":"amountForSale"]().getAmount({real:!0}),a.get("precision"))),n.a.createElement("div",{className:"cell "+i+" right"},l))}}]),t}(),we=function(e){function t(){return fe(this,t),ge(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return be(t,n.a.Component),me(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.ne(this.props.order)||e.position!==this.props.position||e.index!==this.props.index||e.currentAccount!==this.props.currentAccount}},{key:"render",value:function(){var e=this.props,t=e.order,a=e.quote,r=e.base,s=e.position,o=t.isBid(),i=o?"orderHistoryBid":"orderHistoryAsk",l=n.a.createElement(D.a,{price:t.getPrice(),quote:a,base:r}),c=o?F.a.format_number(t.amountToReceive().getAmount({real:!0}),a.get("precision")):F.a.format_number(t.amountForSale().getAmount({real:!0}),a.get("precision")),u=o?F.a.format_number(t.amountForSale().getAmount({real:!0}),r.get("precision")):F.a.format_number(t.amountToReceive().getAmount({real:!0}),r.get("precision")),p=o?F.a.format_number(t.totalForSale().getAmount({real:!0}),r.get("precision")):F.a.format_number(t.totalToReceive().getAmount({real:!0}),r.get("precision"));return n.a.createElement("tr",{onClick:this.props.onClick},"left"===s?n.a.createElement("td",{className:"column-hide-xs"},p):n.a.createElement("td",{style:{width:"25%"},className:i},l),n.a.createElement("td",null,"left"===s?u:c),n.a.createElement("td",null,"left"===s?c:u),"right"===s?n.a.createElement("td",{className:"column-hide-xs"},p):n.a.createElement("td",{style:{width:"25%"},className:i},l))}}]),t}(),Se=function(e){function t(){fe(this,t);var e=ge(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={groupLimit:""},e}return be(t,n.a.Component),me(t,[{key:"render",value:function(){var e=this,t=0===this.props.trackedGroupsConfig.length,a=this.props.trackedGroupsConfig.map(function(t){return e.props.globalSettingsSelector?n.a.createElement(f.Select.Option,{value:t,key:t},t/100+"%"):n.a.createElement("option",{value:t,key:t},t/100+"%")});return this.props.globalSettingsSelector?n.a.createElement(f.Select,{placeholder:"Select option",style:{width:"100%"},value:this.props.currentGroupOrderLimit,disabled:t,onChange:this.props.handleGroupOrderLimitChange.bind(this)},t?n.a.createElement(f.Select.Option,{value:0},n.a.createElement(q.a,{content:"tooltip.no_groups_available"})):n.a.createElement(f.Select.Option,{value:0},n.a.createElement(q.a,{content:"settings.disabled"})),a):n.a.createElement(f.Tooltip,{placement:"bottom",title:t?v.a.translate("tooltip.no_groups_available"):null},n.a.createElement("select",{value:this.state.groupLimit,onChange:this.props.handleGroupOrderLimitChange,className:"settings-select",style:t?{cursor:"not-allowed"}:null},n.a.createElement(q.a,{content:"exchange.group_order_limit",component:"option",value:"0"}),a))}}],[{key:"getDerivedStateFromProps",value:function(e){return{groupLimit:e.currentGroupOrderLimit}}}]),t}(),Ce=function(e){function t(e){fe(this,t);var a=ge(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.queryStickyTable=function(e){return a.verticalStickyTable.current.table.querySelector(e)},a.verticalScrollBar=function(){return a.queryStickyTable("#y-scrollbar")},a.toggleSpreadValue=function(){a.setState({displaySpreadAsPercentage:!a.state.displaySpreadAsPercentage})},a.toggleAutoScroll=function(){a.setState({autoScroll:!a.state.autoScroll})},a.state={flip:e.flipOrderBook,showAllBids:!1,showAllAsks:!1,rowCount:20,autoScroll:e.autoScroll},a.verticalStickyTable=n.a.createRef(),a.centerText=n.a.createRef(),a}return be(t,n.a.Component),me(t,[{key:"shouldComponentUpdate",value:function(e,t){if(this.props.horizontal&&this.props.hideScrollbars&&t.showAllAsks!=this.state.showAllAsks){var a=this.refs.hor_asks;t.showAllAsks?(C.a.initialize(a),this.psUpdate()):C.a.destroy(a),this.refs.askTransition.resetAnimation(),this.refs.hor_asks&&(this.refs.hor_asks.scrollTop=0)}if(this.props.horizontal&&this.props.hideScrollbars&&t.showAllBids!=this.state.showAllBids){var r=this.refs.hor_bids;t.showAllBids?(C.a.initialize(r),this.psUpdate()):C.a.destroy(r),this.refs.bidTransition.resetAnimation(),this.refs.hor_bids&&(this.refs.hor_bids.scrollTop=0)}return!0}},{key:"componentDidUpdate",value:function(e,t,a){var r=this.props;r.base.get("id")===e.base.get("id")&&r.quote.get("id")===e.quote.get("id")||(this.refs.askTransition&&(this.refs.askTransition.resetAnimation(),this.refs.hor_asks&&(this.refs.hor_asks.scrollTop=0),this.refs.hor_bids&&(this.refs.hor_bids.scrollTop=0)),this.refs.bidTransition&&this.refs.bidTransition.resetAnimation(),this.refs.vert_bids&&(this.refs.vert_bids.scrollTop=0),this.props.horizontal||this.setState({autoScroll:this.state.autoScroll}));var n=this.refs.hor_bids,s=this.refs.hor_asks;this.props.horizontal&&r.hideScrollbars!==this.props.hideScrollbars&&r.hideScrollbars&&(C.a.destroy(n),C.a.destroy(s)),this.props.horizontal&&r.hideScrollbars!==this.props.hideScrollbars&&!r.hideScrollbars&&(C.a.initialize(n),C.a.initialize(s),this.refs.askTransition.resetAnimation(),this.refs.bidTransition.resetAnimation(),s&&(s.scrollTop=0),n&&(n.scrollTop=0),this.psUpdate()),this.centerVerticalScrollBar()}},{key:"componentDidMount",value:function(){if(this.props.horizontal){if(!this.props.hideScrollbars){var e=this.refs.hor_bids;C.a.initialize(e);var t=this.refs.hor_asks;C.a.initialize(t)}}else C.a.initialize(this.verticalScrollBar())}},{key:"centerVerticalScrollBar",value:function(){if(!this.props.horizontal&&this.state.autoScroll){var e=this.queryStickyTable("#sticky-table-y-wrapper"),t=this.queryStickyTable("#sticky-table-header"),a=this.centerText.current,r=_e(this.queryStickyTable(".order-row")),n=(0!==this.props.currentGroupOrderLimit?this.props.orderBookReversed?this.props.groupedBids:this.props.groupedAsks:this.props.orderBookReversed?this.props.combinedBids:this.props.combinedAsks).length*r,s=_e(e)-_e(t),o=n+_e(a)/2-s/2;e.scrollTop=o}}},{key:"psUpdate",value:function(){if(this.props.horizontal){var e=this.refs.hor_bids;C.a.update(e);var t=this.refs.hor_asks;C.a.update(t)}else C.a.update(this.verticalScrollBar())}},{key:"_onSetShowAll",value:function(e){"asks"===e?(this.setState({showAllAsks:!this.state.showAllAsks}),this.state.showAllAsks&&(this.refs.hor_asks.scrollTop=0)):(this.setState({showAllBids:!this.state.showAllBids}),this.state.showAllBids&&(this.refs.hor_bids.scrollTop=0))}},{key:"render",value:function(){var e=this,t=this.props,a=t.combinedBids,r=t.combinedAsks,s=t.highestBid,o=t.lowestAsk,i=t.quote,l=t.base,c=t.totalAsks,u=t.totalBids,p=t.quoteSymbol,h=t.baseSymbol,d=t.horizontal,m=t.trackedGroupsConfig,f=t.currentGroupOrderLimit,g=t.handleGroupOrderLimitChange,y=t.orderBookReversed,_=t.groupedBids,k=t.groupedAsks,E=t.flipOrderBook,w=this.state,S=w.showAllAsks,C=w.showAllBids,A=w.rowCount,x=w.displaySpreadAsPercentage,O=!o.sell_price&&!s.sell_price,P=!(!o.sell_price||!s.sell_price)&&(x?(100*(o._real_price/s._real_price-1)).toFixed(2)+"%":n.a.createElement(D.a,{price:o._real_price-s._real_price,base:l,quote:i})),T=null,N=null,B=0!==this.props.currentGroupOrderLimit?k:r,M=0!==this.props.currentGroupOrderLimit?_:a;if(d||y?!d&&y&&(M.sort(function(e,t){return e.getPrice()-t.getPrice()}),B.sort(function(e,t){return e.getPrice()-t.getPrice()})):(M.sort(function(e,t){return t.getPrice()-e.getPrice()}),B.sort(function(e,t){return t.getPrice()-e.getPrice()})),l&&i&&(0!==this.props.currentGroupOrderLimit?(T=M.map(function(t,a){return d?n.a.createElement(we,{index:a,key:t.getPrice()+(t.isBid()?"_bid":""),order:t,onClick:e.props.onClick.bind(e,t),base:l,quote:i,position:E?"right":"left",currentAccount:e.props.currentAccount}):n.a.createElement(Ee,{index:a,key:t.getPrice()+(t.isBid()?"_bid":""),order:t,onClick:e.props.onClick.bind(e,t),base:l,quote:i,final:0===a,currentAccount:e.props.currentAccount})}),N=B.map(function(t,a){return d?n.a.createElement(we,{index:a,key:t.getPrice()+(t.isBid()?"_bid":""),order:t,onClick:e.props.onClick.bind(e,t),base:l,quote:i,type:t.type,position:E?"left":"right",currentAccount:e.props.currentAccount}):n.a.createElement(Ee,{index:a,key:t.getPrice()+(t.isBid()?"_bid":""),order:t,onClick:e.props.onClick.bind(e,t),base:l,quote:i,type:t.type,final:0===a,currentAccount:e.props.currentAccount})})):(T=M.map(function(t,a){return d?n.a.createElement(ke,{index:a,key:t.getPrice()+(t.isCall()?"_call":""),order:t,onClick:e.props.onClick.bind(e,t),base:l,quote:i,position:E?"right":"left",currentAccount:e.props.currentAccount}):n.a.createElement(ve,{index:a,key:t.getPrice()+(t.isCall()?"_call":""),order:t,onClick:e.props.onClick.bind(e,t),base:l,quote:i,final:0===a,currentAccount:e.props.currentAccount})}),N=B.map(function(t,a){return d?n.a.createElement(ke,{index:a,key:t.getPrice()+(t.isCall()?"_call":""),order:t,onClick:e.props.onClick.bind(e,t),base:l,quote:i,type:t.type,position:E?"left":"right",currentAccount:e.props.currentAccount}):n.a.createElement(ve,{index:a,key:t.getPrice()+(t.isCall()?"_call":""),order:t,onClick:e.props.onClick.bind(e,t),base:l,quote:i,type:t.type,final:0===a,currentAccount:e.props.currentAccount})}))),this.props.horizontal){var j=T.length,I=N.length;C||T.splice(A,T.length),S||N.splice(A,N.length);var R=n.a.createElement("thead",null,n.a.createElement("tr",{key:"top-header",className:"top-header"},n.a.createElement("th",{className:"column-hide-xs"},n.a.createElement(q.a,{className:"header-sub-title",content:"exchange.total"}),n.a.createElement("span",{className:"header-sub-title"}," ","(",n.a.createElement(V.a,{dataPlace:"top",name:h}),")")),n.a.createElement("th",null,n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(V.a,{dataPlace:"top",name:h}))),n.a.createElement("th",null,n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(V.a,{dataPlace:"top",name:p}))),n.a.createElement("th",null,n.a.createElement(q.a,{className:(E?"ask-total":"bid-total")+" header-sub-title",content:"exchange.price"})))),L=n.a.createElement("thead",null,n.a.createElement("tr",{key:"top-header",className:"top-header"},n.a.createElement("th",null,n.a.createElement(q.a,{className:(E?"bid-total":"ask-total")+" header-sub-title",content:"exchange.price"})),n.a.createElement("th",null,n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(V.a,{dataPlace:"top",name:p}))),n.a.createElement("th",null,n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(V.a,{dataPlace:"top",name:h}))),n.a.createElement("th",{className:"column-hide-xs"},n.a.createElement(q.a,{className:"header-sub-title",content:"exchange.total"}),n.a.createElement("span",{className:"header-sub-title"}," ","(",n.a.createElement(V.a,{dataPlace:"top",name:h}),")")))),z=this.props.wrapperClass,H=this.props.innerClass;return n.a.createElement("div",{ref:"order_book",style:{marginRight:this.props.smallScreen?10:0},className:b()(z)},n.a.createElement("div",{className:b()(H,E?"order-1":"order-2")},n.a.createElement("div",null,n.a.createElement("div",{className:"exchange-content-header ask"},n.a.createElement(q.a,{content:"exchange.asks"}),E&&!this.props.hideFunctionButtons?n.a.createElement("div",{style:{display:"inline-block"}},n.a.createElement("span",{onClick:this.props.onFlipOrderBook.bind(this),style:{cursor:"pointer",fontSize:"1rem",marginLeft:"4px",position:"relative",top:"-2px"},className:"flip-arrow"}," ","â")):null,E&&!this.props.hideFunctionButtons?n.a.createElement("div",{className:"float-right header-sub-title grouped_order"},m?n.a.createElement(Se,{trackedGroupsConfig:m,handleGroupOrderLimitChange:g,currentGroupOrderLimit:f}):null):null,this.props.onTogglePosition&&!this.props.hideFunctionButtons?n.a.createElement("span",{onClick:this.props.onTogglePosition,style:{cursor:"pointer",fontSize:"1rem"},className:"flip-arrow"}," ","â"):null,E&&!this.props.hideFunctionButtons?n.a.createElement("span",{className:"order-book-button-v",onClick:this.props.moveOrderBook},n.a.createElement(U.a,{name:"thumb-tack",className:"icon-14px icon-fill"})):null,n.a.createElement("div",{style:{lineHeight:"16px"},className:"header-sub-title float-right"},n.a.createElement(q.a,{content:"exchange.market_depth"}),n.a.createElement("span",null,": "),F.a.format_number(c,i.get("precision")),n.a.createElement("span",null," ","(",n.a.createElement(V.a,{name:p}),")"))),n.a.createElement("div",{className:"market-right-padding-only"},n.a.createElement("table",{className:"table order-table table-hover fixed-table text-right"},E?R:L)),n.a.createElement("div",{className:"grid-block",ref:"hor_asks",style:{paddingRight:"0.6rem",overflow:"hidden",maxHeight:260,lineHeight:"13px"}},n.a.createElement("table",{style:{paddingBottom:5},className:"table order-table no-stripes table-hover fixed-table text-right no-overflow"},n.a.createElement(de.a,{ref:"askTransition",className:"orderbook clickable",component:"tbody",transitionName:"newrow",id:"top-order-rows"},N))),I>11?n.a.createElement("div",{className:"orderbook-showall"},n.a.createElement("a",{onClick:this._onSetShowAll.bind(this,"asks")},n.a.createElement(q.a,{content:S?"exchange.hide":"exchange.show_asks",ordercount:I}))):null)),n.a.createElement("div",{className:b()(H,E?"order-2":"order-1")},n.a.createElement("div",null,n.a.createElement("div",{className:"exchange-content-header bid"},n.a.createElement(q.a,{content:"exchange.bids"}),E||this.props.hideFunctionButtons?null:n.a.createElement("div",{style:{display:"inline-block"}},n.a.createElement("span",{onClick:this.props.onFlipOrderBook.bind(this),style:{cursor:"pointer",fontSize:"1rem",marginLeft:"4px",position:"relative",top:"-2px"},className:"flip-arrow"}," ","â")),E||this.props.hideFunctionButtons?null:n.a.createElement("div",{className:"float-right header-sub-title grouped_order"},m?n.a.createElement(Se,{trackedGroupsConfig:m,handleGroupOrderLimitChange:g,currentGroupOrderLimit:f}):null),0!==f&&this.props.hideFunctionButtons&&n.a.createElement(U.a,{name:"grouping",className:"float-right icon-14px",title:v.a.translate("icons.order_grouping"),style:{marginLeft:"0.5rem"}}),this.props.onTogglePosition&&!this.props.hideFunctionButtons?n.a.createElement("span",{onClick:this.props.onTogglePosition,style:{cursor:"pointer",fontSize:"1rem"},className:"flip-arrow"}," ","â"):null,E||this.props.hideFunctionButtons?null:n.a.createElement("span",{className:"order-book-button-v",onClick:this.props.moveOrderBook},n.a.createElement(U.a,{name:"thumb-tack",className:"icon-14px"})),n.a.createElement("div",{style:{lineHeight:"16px"},className:"float-right header-sub-title"},n.a.createElement(q.a,{content:"exchange.market_depth"}),n.a.createElement("span",null,": "),F.a.format_number(u,l.get("precision")),n.a.createElement("span",null," ","(",n.a.createElement(V.a,{name:h}),")"))),n.a.createElement("div",{className:"market-right-padding-only"},n.a.createElement("table",{className:"table order-table table-hover fixed-table text-right"},E?L:R)),n.a.createElement("div",{className:"grid-block",ref:"hor_bids",style:{paddingRight:"0.6rem",overflow:"hidden",maxHeight:260,lineHeight:"13px"}},n.a.createElement("table",{style:{paddingBottom:5},className:"table order-table no-stripes table-hover fixed-table text-right no-overflow"},n.a.createElement(de.a,{ref:"bidTransition",className:"orderbook clickable",component:"tbody",transitionName:"newrow"},T))),j>A?n.a.createElement("div",{className:"orderbook-showall"},n.a.createElement("a",{onClick:this._onSetShowAll.bind(this,"bids")},n.a.createElement(q.a,{content:C?"exchange.hide":"exchange.show_bids",ordercount:j}))):null)))}return n.a.createElement("div",{className:"order-table-container"},n.a.createElement(he.StickyTable,{stickyColumnCount:0,className:"order-table table",ref:this.verticalStickyTable},n.a.createElement("div",{className:"sticky-table-row top-header"},n.a.createElement("div",{className:"cell header-cell left"},n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(V.a,{name:h}))),n.a.createElement("div",{className:"cell header-cell"},n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(V.a,{name:p}))),n.a.createElement("div",{className:"cell header-cell right"},n.a.createElement(q.a,{className:"header-sub-title",content:"exchange.price"}))),y?n.a.createElement(ye,{id:"top-order-rows",noOrders:O,orderRows:T,isBid:!0}):n.a.createElement(ye,{id:"top-order-rows",noOrders:O,orderRows:N,isBid:!1}),O?n.a.createElement("div",{className:"sticky-table-row",ref:this.centerText},n.a.createElement("div",{className:"cell"}),n.a.createElement("div",{className:"cell no-orders padtop"},n.a.createElement(q.a,{content:"exchange.no_orders"}))):n.a.createElement("div",{className:"sticky-table-row orderbook-latest-price",ref:this.centerText,style:{padding:0}},n.a.createElement("div",{className:"cell right"},n.a.createElement("span",{className:"clickable left",onClick:this.toggleSpreadValue},n.a.createElement(q.a,{className:"orderbook-center-title",content:"exchange.spread"})," ",n.a.createElement("span",{className:"spread-value"},P||"0"))),n.a.createElement("div",{className:"cell cell-center"},n.a.createElement("span",{style:{width:75}},this.props.hideFunctionButtons?null:n.a.createElement(U.a,{className:"lock-unlock clickable icon-fill",onClick:this.toggleAutoScroll,name:this.state.autoScroll?"locked":"unlocked",title:this.state.autoScroll?"icons.unlocked.disable_auto_scroll":"icons.locked.enable_auto_scroll"}),"Â ",this.props.hideFunctionButtons?null:n.a.createElement(U.a,{onClick:this.props.moveOrderBook,name:"thumb-tack",className:"icon-14px icon-fill order-book-button-v clickable",title:this.props.horizontal?"icons.thumb_tack":"icons.thumb_untack",style:{marginLeft:0}}),"Â ",0==f?null:n.a.createElement(U.a,{name:"grouping",className:"icon-14px",title:v.a.translate("icons.order_grouping"),style:{marginLeft:0}}))),n.a.createElement("div",{className:"cell"},!!this.props.latest&&n.a.createElement("span",{className:"right"},n.a.createElement("span",{className:this.props.changeClass?this.props.changeClass:"spread-value"},n.a.createElement(D.a,{price:this.props.latest,base:this.props.base,quote:this.props.quote}))))),y?n.a.createElement(ye,{noOrders:O,orderRows:N,isBid:!1}):n.a.createElement(ye,{noOrders:O,orderRows:T,isBid:!0})))}}]),t}();Ce.defaultProps={bids:[],asks:[],orders:{}},Ce.propTypes={bids:x.a.array.isRequired,asks:x.a.array.isRequired,orders:x.a.object.isRequired};var Ae=a(13),xe=a.n(Ae),Oe=a(28),Pe=a(144),Te=a(255),Ne=a(2027),Be=a.n(Ne),Me=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var Fe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),Me(t,[{key:"componentWillMount",value:function(){this.props.blockHeader||Te.a.getHeader.defer(this.props.block_number)}},{key:"shouldComponentUpdate",value:function(e){return e.blockHeader&&!this.props.blockHeader&&setTimeout(Q.a.rebuild,1e3),e.blockHeader!==this.props.blockHeader}},{key:"render",value:function(){var e=this.props,t=e.blockHeader,a=e.tooltip,r=e.component,s=e.format;return t?n.a.createElement(r,{className:a?"tooltip":""},n.a.createElement(f.Tooltip,{title:a?t.timestamp:""},n.a.createElement("span",null,v.a.localize(t.timestamp,{type:"date",format:s})))):n.a.createElement(r)}}]),t}();Fe.defaultProps={format:-1!==Be()().toLowerCase().indexOf("en-us")?"market_history_us":"market_history",tooltip:!1,component:"span"};var je=Fe=Object(Oe.a)(Fe,{listenTo:function(){return[Pe.a]},getProps:function(e){return{blockHeader:Pe.a.getState().blockHeaders.get(e.block_number)}}}),qe=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function Ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Re=m.ChainTypes.operations,Le=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeTab:e.viewSettings.get("historyTab","history"),rowCount:20,showAll:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),qe(t,[{key:"shouldComponentUpdate",value:function(e,t){if(e.activeTab!==this.props.activeTab&&this._changeTab(e.activeTab),this.props.hideScrollbars&&t.showAll!=this.state.showAll){var a=this.refs.history;t.showAll?(C.a.initialize(a),C.a.update(a)):C.a.destroy(a),this.refs.historyTransition.resetAnimation(),a&&(a.scrollTop=0)}return!xe.a.is(e.history,this.props.history)||e.baseSymbol!==this.props.baseSymbol||e.quoteSymbol!==this.props.quoteSymbol||e.className!==this.props.className||e.activeTab!==this.props.activeTab||t.activeTab!==this.state.activeTab||t.showAll!==this.state.showAll||e.currentAccount!==this.props.currentAccount||e.isPanelActive!==this.props.isPanelActive||e.hideScrollbars!==this.props.hideScrollbars}},{key:"componentDidMount",value:function(){if(!this.props.hideScrollbars){var e=this.refs.history;e&&C.a.initialize(e)}}},{key:"componentDidUpdate",value:function(){if(!this.props.hideScrollbars||this.props.hideScrollbars&&this.state.showAll){var e=this.refs.history;e&&C.a.update(e)}}},{key:"componentWillReceiveProps",value:function(e){var t=this.refs.history;e.hideScrollbars!==this.props.hideScrollbars&&e.hideScrollbars&&C.a.destroy(t),e.hideScrollbars===this.props.hideScrollbars||e.hideScrollbars||(C.a.initialize(t),this.refs.historyTransition.resetAnimation(),t&&(t.scrollTop=0),C.a.update(t))}},{key:"_changeTab",value:function(e){O.a.changeViewSetting({historyTab:e}),this.setState({activeTab:e});var t=this.refs.history;t.scrollTop=0,C.a.update(t),setTimeout(Q.a.rebuild,1e3)}},{key:"_onSetShowAll",value:function(){this.setState({showAll:!this.state.showAll}),this.state.showAll&&(this.refs.history.scrollTop=0)}},{key:"render",value:function(){var e,t=this,a=this.props,r=a.history,s=a.myHistory,o=a.base,i=a.quote,l=a.baseSymbol,c=a.quoteSymbol,u=a.isNullAccount,p=a.activeTab,h=this.state,d=h.rowCount,m=h.showAll,g=[];u&&(p="history");var y=(Ie(e={},i.get("id"),{precision:i.get("precision")}),Ie(e,o.get("id"),{precision:o.get("precision")}),e);"my_history"===p&&s&&s.size?g=s.filter(function(e){return e.getIn(["op",0])===Re.fill_order}).filter(function(e){var t=i.get("id"),a=o.get("id"),r=e.getIn(["op",1,"pays","asset_id"]),n=e.getIn(["op",1,"receives","asset_id"]);return(t===r||t===n)&&(a===r||a===n)}).sort(function(e,t){return t.get("block_num")-e.get("block_num")}).map(function(e){var a=new B.e(e.toJS(),y,i.get("id"));return n.a.createElement("tr",{key:a.id},n.a.createElement("td",{className:a.className},n.a.createElement(D.a,{price:a.getPrice(),base:t.props.base,quote:t.props.quote})),n.a.createElement("td",null,a.amountToReceive()),n.a.createElement("td",null,a.amountToPay()),n.a.createElement(je,{component:"td",block_number:a.block,tooltip:!0}))}).toArray():r&&r.size&&(g=this.props.history.take(100).map(function(e){return n.a.createElement("tr",{key:"history_"+e.id},n.a.createElement("td",{className:e.className},n.a.createElement(D.a,{price:e.getPrice(),base:t.props.base,quote:t.props.quote})),n.a.createElement("td",null,e.amountToReceive()),n.a.createElement("td",null,e.amountToPay()),n.a.createElement("td",null,n.a.createElement(f.Tooltip,{title:e.time.toString()},n.a.createElement("div",{className:"tooltip",style:{whiteSpace:"nowrap"}},v.a.localize(e.time,{type:"date",format:-1!==Be()().toLowerCase().indexOf("en-us")?"market_history_us":"market_history"})))))}).toArray());var _=n.a.createElement("tr",null,n.a.createElement("td",{style:{textAlign:"center",lineHeight:4,fontStyle:"italic"},colSpan:"5"},n.a.createElement(q.a,{content:"account.no_orders"})));return!m&&g&&g.splice(d,g.length),n.a.createElement("div",{className:b()(this.props.className)},n.a.createElement("div",{className:this.props.innerClass,style:this.props.innerStyle},this.props.noHeader?null:n.a.createElement("div",{style:this.props.headerStyle,className:"exchange-content-header"},"my_history"===p?n.a.createElement(q.a,{content:"exchange.my_history"}):null,"history"===p?n.a.createElement(q.a,{content:"exchange.history"}):null),n.a.createElement("div",{className:"grid-block shrink left-orderbook-header market-right-padding-only"},n.a.createElement("table",{className:"table table-no-padding order-table text-left fixed-table market-right-padding"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{style:{textAlign:"right"}},n.a.createElement(q.a,{className:"header-sub-title",content:"exchange.price"})),n.a.createElement("th",{style:{textAlign:"right"}},n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(V.a,{dataPlace:"top",name:c}))),n.a.createElement("th",{style:{textAlign:"right"}},n.a.createElement("span",{className:"header-sub-title"},n.a.createElement(V.a,{dataPlace:"top",name:l}))),n.a.createElement("th",{style:{textAlign:"right"}},n.a.createElement(q.a,{className:"header-sub-title",content:"explorer.block.date"})))))),n.a.createElement("div",{className:"table-container grid-block market-right-padding-only no-overflow",ref:"history",style:{minHeight:this.props.tinyScreen?0:260,maxHeight:260,overflow:"hidden",lineHeight:"13px"}},n.a.createElement("table",{className:"table order-table no-stripes table-hover fixed-table text-right no-overflow"},n.a.createElement(de.a,{ref:"historyTransition",component:"tbody",transitionName:"newrow",className:"orderbook"},g&&g.length>0?g:_))),g&&g.length>11?n.a.createElement("div",{className:"orderbook-showall"},n.a.createElement("a",{onClick:this._onSetShowAll.bind(this)},n.a.createElement(q.a,{content:m?"exchange.hide":"exchange.show_all_trades",rowcount:g.length}))):null))}}]),t}();Le.defaultProps={history:[]},Le.propTypes={history:x.a.object.isRequired};var De=Object(Oe.a)(Le,{listenTo:function(){return[i.a]},getProps:function(){return{viewSettings:i.a.getState().viewSettings}}}),Ve=a(2057),ze=a(454),He=a(132),We=a(564),Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ge=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function Qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ze=function(e){function t(){Qe(this,t);var e=Ke(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e.initialState(),e.handleMarketPickerFilterChange=e.handleMarketPickerFilterChange.bind(e),e.getAssetList=Object(h.a)(ze.a.getAssetList.defer,150),e}return Je(t,n.a.Component),Ge(t,[{key:"initialState",value:function(){return{marketsList:"",issuersList:"",lookupQuote:null,allMarkets:"",allIssuers:"",inputValue:""}}},{key:"componentWillReceiveProps",value:function(e){e.marketPickerAsset!==this.props.marketPickerAsset&&this.setState(this.initialState()),e.searchAssets!==this.props.searchAssets&&this.assetFilter()}},{key:"shouldComponentUpdate",value:function(e,t){return e.visible!==this.props.visible||e.marketPickerAsset!==this.props.marketPickerAsset||e.searchAssets!==this.props.searchAssets||t.marketsList!==this.state.marketsList||t.issuersList!==this.state.issuersList||!F.a.are_equal_shallow(t,this.state)}},{key:"_onSelectIssuer",value:function(e){var t="0"==e?null:e;this.assetFilter(t)}},{key:"_onInputName",value:function(e,t){var a=this,r=t.target.value.trim().toUpperCase(),n=!m.ChainValidation.is_valid_symbol_error(r,!0);this.setState({inputValue:t.target.value.trim(),activeSearch:!0,allMarkets:"",allIssuers:"",marketsList:"",issuersList:""}),n?(this.state.inputValue!==r&&this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){a._lookupAssets(r,e)},1500)):this.setState({activeSearch:!1})}},{key:"_lookupAssets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e||""===e){var a=e.toUpperCase();this.getAssetList(a,10,t),this.setState({activeSearch:!1,lookupQuote:a})}}},{key:"_changeMarketPickerFilter",value:function(e){this.setState({marketsList:"",issuersList:"",lookupQuote:null,allMarkets:"",allIssuers:"",inputValue:"",marketPickerTab:e,activeSearch:!1})}},{key:"_fetchIssuer",value:function(e){var t=m.ChainStore.getObject(e.issuer,!1,!1);return t||void 0}},{key:"assetFilter",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=this.props,r=a.searchAssets,s=a.marketPickerAsset,o=this.state,i=o.inputValue,l=o.lookupQuote,c=o.marketPickerTab;this.setState({activeSearch:!0});var u=0,p=[],h=[],d=this.props.baseAsset.get("symbol"),m=this.props.quoteAsset.get("symbol");r.size&&i&&i.length>2&&r.filter(function(e){try{if(e.options.description){var t=JSON.parse(e.options.description);if("visible"in t&&!t.visible)return!1}}catch(e){}return-1!==e.symbol.indexOf(l)}).forEach(function(a){if(!(u>100)){u++;var r=e._fetchIssuer(a),n=e.props.baseAsset.get("symbol"),o=a.symbol+"_"+n,l=m==s,f=l&&a.symbol!=d||!l&&a.symbol!=m;!f||t&&t!=r.get("name")||("search"!=c||!a.symbol.startsWith(i.toUpperCase()))&&c&&"filter"!=c||p.push([o,{quote:a.symbol,base:n,issuer:r?r.get("name"):null}]),f&&r&&!h.includes(r.get("name"))&&h.push(r.get("name"))}});var g=this.state.marketsList,b=this.state.issuersList;b=h?h.sort(function(e,t){return e>t?1:e<t?-1:0}).map(function(e){return n.a.createElement(f.Select.Option,{key:e,value:e},e)}):null,g=p?p.sort(function(e,t){var a=Object(He.f)(e[1].quote),r=Object(He.f)(t[1].quote);return a&&!r?-1:r&&!a?1:e[1].quote>t[1].quote?1:e[1].quote<t[1].quote?-1:0}).map(function(t){return n.a.createElement("li",{key:t[0]},n.a.createElement(V.a,{name:t[1].quote}),n.a.createElement("span",{style:{float:"right"}},n.a.createElement(Y.a,{onClick:function(){e.props.onClose.bind(e)},to:m==s?"/market/"+t[1].quote+"_"+d:"/market/"+m+"_"+t[1].quote},n.a.createElement(q.a,{content:"exchange.market_picker.use"}))))}):null,this.setState({allMarkets:p,allIssuers:h,marketsList:g,issuersList:b,activeSearch:!1})}},{key:"handleMarketPickerFilterChange",value:function(e){this._changeMarketPickerFilter(e.target.value)}},{key:"render",value:function(){var e=this.props.marketPickerAsset,t=this.state,a=t.marketPickerTab,r=t.inputValue,s=t.allMarkets,o=t.issuersList,i=t.marketsList;return n.a.createElement("div",{className:"marketPicker"},n.a.createElement("div",{className:"marketPicker__subHeader"},n.a.createElement(q.a,{content:"exchange.market_picker.sub_title"}),"Â ",n.a.createElement(Y.a,{to:"/asset/"+e,style:{cursor:"pointer",color:"lightblue !important"}},n.a.createElement(V.a,{name:e}),n.a.createElement(U.a,{className:"blue-icon",style:{marginLeft:5},name:"info-circle-o",title:"icons.info_circle_o"}))),n.a.createElement(f.Form.Item,{label:v.a.translate("exchange.market_picker.search_mode").toUpperCase()},n.a.createElement(f.Radio.Group,{value:this.state.marketPickerTab?this.state.marketPickerTab:"filter",onChange:this.handleMarketPickerFilterChange},n.a.createElement(f.Radio,{value:"filter"},v.a.translate("markets.filter")),n.a.createElement(f.Radio,{value:"search"},v.a.translate("markets.search")))),n.a.createElement("div",{id:"search",style:{display:"search"==a?"":"none"}},n.a.createElement("div",null,n.a.createElement(f.Form.Item,{label:v.a.translate("exchange.market_picker.search_for_asset").toUpperCase()},n.a.createElement(f.Input,{type:"text",value:r,onChange:this._onInputName.bind(this,!1),placeholder:v.a.translate("exchange.market_picker.search"),maxLength:"16",tabIndex:2})))),n.a.createElement("div",{id:"filter",style:{display:this.state.marketPickerTab&&"filter"!=this.state.marketPickerTab?"none":""}},n.a.createElement("div",null,n.a.createElement(f.Form.Item,{label:v.a.translate("exchange.market_picker.find_by_asset").toUpperCase()},n.a.createElement(f.Input,{type:"text",value:r,onChange:this._onInputName.bind(this,!0),placeholder:v.a.translate("exchange.market_picker.search"),maxLength:"16",tabIndex:2}))),n.a.createElement("div",null,n.a.createElement(f.Form.Item,{label:v.a.translate("exchange.market_picker.filter_by_issuer").toUpperCase()},n.a.createElement(f.Select,{defaultValue:"0",onChange:this._onSelectIssuer.bind(this),style:{width:"100%"}},n.a.createElement(f.Select.Option,{key:"0",value:"0"},v.a.translate("exchange.market_picker.show_all")," "),o)))),n.a.createElement(f.Form.Item,{colon:!1,label:n.a.createElement("span",null,v.a.translate("exchange.market_picker.results",{total_assets:s?s.length:0}).toUpperCase(),":",this.state.activeSearch&&0!=this.state.inputValue.length?n.a.createElement(f.Icon,{style:{marginLeft:"8px"},type:"loading",theme:"outlined"}):null)}),n.a.createElement("div",{className:"results"},n.a.createElement("ul",{ref:"results",style:{marginLeft:0}},this.state.activeSearch?null:i)))}}]),t}(),Ye=function(e){function t(e){Qe(this,t);var a=Ke(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={open:!1,smallScreen:!1},a}return Je(t,n.a.Component),Ge(t,[{key:"componentWillMount",value:function(){this.setState({smallScreen:window.innerWidth<=800})}},{key:"componentWillReceiveProps",value:function(e){this.props.quoteAsset.get("id")===e.quoteAsset.get("id")&&this.props.baseAsset.get("id")===e.baseAsset.get("id")||this.onClose()}},{key:"show",value:function(){this.props.showModal()}},{key:"onClose",value:function(){this.props.onToggleMarketPicker(null),this.props.hideModal()}},{key:"render",value:function(){return n.a.createElement(f.Modal,Ue({title:v.a.translate("exchange.market_picker.title"),closable:!1,visible:this.props.visible,id:this.props.modalId,overlay:!0,onCancel:this.onClose.bind(this),noHeaderContainer:!0,ref:this.props.modalId},this.props),n.a.createElement(Ze,Ue({onClose:this.onClose.bind(this)},this.props)))}}]),t}(),Xe=Ye=Object(Oe.a)(Ye,{listenTo:function(){return[We.a]},getProps:function(){return{searchAssets:We.a.getState().assets,assetsLoading:We.a.getState().assetsLoading}}}),$e=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var et=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.submit=a.submit.bind(a),a.cancel=a.cancel.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),$e(t,[{key:"_onForce",value:function(e,t){t.preventDefault(),this.props.hideModal(),e&&this.props.onForce()}},{key:"submit",value:function(e){this._onForce(!0,e)}},{key:"cancel",value:function(e){this._onForce(!1,e)}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.diff,r=e.hasOrders,s=[n.a.createElement(f.Button,{key:"submit",onClick:this.submit},v.a.translate("settings.yes")),n.a.createElement(f.Button,{key:"cancel",type:"primary",onClick:this.cancel},v.a.translate("settings.no"))];return n.a.createElement(f.Modal,{footer:s,visible:this.props.visible,onCancel:this.cancel,title:v.a.translate("transaction.confirm")},n.a.createElement("div",{className:"grid-block vertical"},r?n.a.createElement(q.a,{content:"exchange.confirm_"+t,diff:F.a.format_number(a,2)}):n.a.createElement(q.a,{content:"exchange.confirm_no_orders_"+t})))}}]),t}(),tt=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var at=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={open:!1,smallScreen:!1,chartHeight:e.chartHeight,autoScroll:e.viewSettings.get("global_AutoScroll",!0)},a.setChartHeight=a.setChartHeight.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),tt(t,[{key:"componentWillMount",value:function(){this.setState({smallScreen:window.innerWidth<=800})}},{key:"onClose",value:function(){this.props.hideModal()}},{key:"setChartHeight",value:function(e){this.setState({chartHeight:e}),this.props.onChangeChartHeight({value:e})}},{key:"setAutoscroll",value:function(e){var t=1==e;this.setState({autoScroll:t}),O.a.changeViewSetting({global_AutoScroll:t}),this.props.onSetAutoscroll(t)}},{key:"_getGroupingOptions",value:function(e){return n.a.createElement(f.Select,{placeholder:v.a.translate("settings.placeholder_select"),style:{width:"100%"},onChange:this.props.onSetPanelTabs.bind(this,e),value:this.props.panelTabs[e]},n.a.createElement(f.Select.Option,{value:0},n.a.createElement(q.a,{content:"exchange.settings.options.grouping_standalone"})),n.a.createElement(f.Select.Option,{value:1},n.a.createElement(q.a,{content:"exchange.settings.options.grouping_1"})),n.a.createElement(f.Select.Option,{value:2},n.a.createElement(q.a,{content:"exchange.settings.options.grouping_2"})))}},{key:"render",value:function(){var e=this.props.chartType,t=this.state.chartHeight;return n.a.createElement(f.Modal,{title:v.a.translate("exchange.settings.header.title"),visible:this.props.visible,id:this.props.modalId,overlay:!0,footer:[n.a.createElement(f.Button,{key:"close",onClick:this.onClose.bind(this)},v.a.translate("modal.close"))],onCancel:this.onClose.bind(this),noHeaderContainer:!0,ref:this.props.modalId},n.a.createElement(f.Form.Item,null,n.a.createElement("header",null,n.a.createElement(q.a,{content:"exchange.settings.header.chart_options"})),this.props.tinyScreen?null:n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.chart_type"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.chart_type")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.chart_reload")},n.a.createElement(f.Icon,{type:"info-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Select,{placeholder:v.a.translate("settings.placeholder_select"),style:{width:"100%"},value:e,onChange:this.props.onToggleChart.bind(this)},n.a.createElement(f.Select.Option,{value:"market_depth"},v.a.translate("exchange.order_depth")),n.a.createElement(f.Select.Option,{value:"price_chart"},v.a.translate("exchange.price_history")),n.a.createElement(f.Select.Option,{value:"hidden_chart"},v.a.translate("exchange.settings.options.hidden_chart"))))),n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.chart_height"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.chart_height")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.InputNumber,{value:"number"==typeof t&&t>1e3?1e3:t,onChange:this.setChartHeight.bind(this)}))),!this.props.tinyScreen&&"price_chart"==e&&n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.chart_tools"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.chart_tools")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.chart_reload")},n.a.createElement(f.Icon,{type:"info-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Switch,{style:{margin:6},checked:this.props.chartTools,onChange:this.props.onChartTools.bind(this)}))),!this.props.tinyScreen&&"price_chart"==e&&n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.chart_zoom"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.chart_zoom")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.chart_reload")},n.a.createElement(f.Icon,{type:"info-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Switch,{style:{margin:6},checked:this.props.chartZoom,onChange:this.props.onChartZoom.bind(this)}))),n.a.createElement("header",null,n.a.createElement(q.a,{content:"exchange.settings.header.order_options"})),n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.order_book_grouping"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.order_book_grouping")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},this.props.trackedGroupsConfig?n.a.createElement(Se,{globalSettingsSelector:!0,trackedGroupsConfig:this.props.trackedGroupsConfig,handleGroupOrderLimitChange:this.props.handleGroupOrderLimitChange.bind(this),currentGroupOrderLimit:this.props.currentGroupOrderLimit}):null)),!this.props.tinyScreen&&!this.props.smallScreen&&n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.order_style"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.order_style")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Select,{placeholder:v.a.translate("settings.placeholder_select"),style:{width:"100%"},value:this.props.verticalOrderBook.toString(),onSelect:this.props.onMoveOrderBook.bind(this)},n.a.createElement(f.Select.Option,{value:"true"},n.a.createElement(q.a,{content:"exchange.settings.options.vertical"})),n.a.createElement(f.Select.Option,{value:"false"},n.a.createElement(q.a,{content:"exchange.settings.options.horizontal"}))))),!this.props.tinyScreen&&!this.props.verticalOrderBook||this.props.smallScreen?n.a.createElement("div",{className:"grid-block no-overflow wrap shrink",style:{paddingTop:"0.5em"}},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.position_order_form"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.position_order_form")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Select,{placeholder:v.a.translate("settings.placeholder_select"),style:{width:"100%"},value:this.props.flipBuySell.toString(),onSelect:this.props.onFlipBuySell.bind(this)},n.a.createElement(f.Select.Option,{value:"false"},n.a.createElement(q.a,{content:"exchange.settings.options.position_order_form_opt1"})),n.a.createElement(f.Select.Option,{value:"true"},n.a.createElement(q.a,{content:"exchange.settings.options.position_order_form_opt2"}))))):null,!this.props.tinyScreen&&!this.props.verticalOrderBook||this.props.smallScreen?n.a.createElement("div",{className:"grid-block no-overflow wrap shrink",style:{paddingTop:"0.5em"}},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.position_order_orders"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.position_order_orders")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Select,{placeholder:v.a.translate("settings.placeholder_select"),style:{width:"100%"},value:this.props.flipOrderBook.toString(),onSelect:this.props.onFlipOrderBook.bind(this)},n.a.createElement(f.Select.Option,{value:"false"},n.a.createElement(q.a,{content:"exchange.settings.options.position_order_orders_opt1"})),n.a.createElement(f.Select.Option,{value:"true"},n.a.createElement(q.a,{content:"exchange.settings.options.position_order_orders_opt2"}))))):null,!this.props.tinyScreen&&!this.props.verticalOrderBook||this.props.smallScreen?n.a.createElement("div",{className:"grid-block no-overflow wrap shrink",style:{paddingTop:"0.5em"}},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.position_order_asset"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.position_order_asset")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Select,{placeholder:v.a.translate("settings.placeholder_select"),style:{width:"100%"},value:this.props.buySellTop.toString(),onSelect:this.props.onToggleBuySellPosition.bind(this)},n.a.createElement(f.Select.Option,{value:"false"},n.a.createElement(q.a,{content:"exchange.settings.options.position_order_asset_opt1"})),n.a.createElement(f.Select.Option,{value:"true"},n.a.createElement(q.a,{content:"exchange.settings.options.position_order_asset_opt2"}))))):null,!this.props.tinyScreen&&this.props.verticalOrderBook?n.a.createElement("div",{className:"grid-block no-overflow wrap shrink",style:{paddingTop:"0.5em"}},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.orderbook_auto_scroll"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.orderbook_auto_scroll")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Switch,{style:{margin:6},checked:this.state.autoScroll,onChange:this.setAutoscroll.bind(this)}))):null,!this.props.tinyScreen&&this.props.verticalOrderBook?n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.reverse_order_book"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.reverse_order_book")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Switch,{style:{margin:6},checked:this.props.orderBookReversed,onChange:this.props.onOrderBookReversed.bind(this)}))):null,!this.props.tinyScreen&&n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6",style:{paddingRight:5}},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.single_colum_order_form"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.single_colum_order_form")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Switch,{style:{margin:6},checked:this.props.singleColumnOrderForm,onChange:this.props.onToggleSingleColumnOrderForm.bind(this)}))),!this.props.tinyScreen&&n.a.createElement("header",null,n.a.createElement(q.a,{content:"exchange.settings.header.panel_grouping"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.panel_grouping")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"}))),!this.props.tinyScreen&&n.a.createElement("div",{className:"grid-block no-overflow wrap shrink",style:{paddingBottom:"0.5em"}},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.my_trades"}))),n.a.createElement("div",{className:"small-6"},this._getGroupingOptions("my_history"))),!this.props.tinyScreen&&n.a.createElement("div",{className:"grid-block no-overflow wrap shrink",style:{paddingBottom:"0.5em"}},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.market_trades"}))),n.a.createElement("div",{className:"small-6"},this._getGroupingOptions("history"))),!this.props.tinyScreen&&n.a.createElement("div",{className:"grid-block no-overflow wrap shrink",style:{paddingBottom:"0.5em"}},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.open_orders"}))),n.a.createElement("div",{className:"small-6"},this._getGroupingOptions("my_orders"))),!this.props.tinyScreen&&n.a.createElement("div",{className:"grid-block no-overflow wrap shrink",style:{paddingBottom:"0.5em"}},n.a.createElement("div",{className:"small-6"},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.settlements"}))),n.a.createElement("div",{className:"small-6"},this._getGroupingOptions("open_settlement"))),!this.props.tinyScreen&&n.a.createElement("header",null,n.a.createElement(q.a,{content:"exchange.settings.header.general"})),!this.props.tinyScreen&&!this.props.smallScreen&&n.a.createElement("div",{className:"grid-block no-overflow wrap shrink",style:{paddingBottom:"0.5em"}},n.a.createElement("div",{className:"small-6",style:{paddingRight:5}},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.market_location"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.market_location")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Select,{placeholder:v.a.translate("settings.placeholder_select"),style:{width:"100%"},value:this.props.mirrorPanels.toString(),onSelect:this.props.onMirrorPanels.bind(this)},n.a.createElement(f.Select.Option,{value:"false"},n.a.createElement(q.a,{content:"settings.left"})),n.a.createElement(f.Select.Option,{value:"true"},n.a.createElement(q.a,{content:"settings.right"}))))),!this.props.tinyScreen&&n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6",style:{paddingRight:5}},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.reduce_scrollbars"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.reduce_scrollbars")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.reload")},n.a.createElement(f.Icon,{type:"info-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Switch,{style:{margin:6},checked:this.props.hideScrollbars,onChange:this.props.onToggleScrollbars.bind(this)}))),!this.props.tinyScreen&&n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},n.a.createElement("div",{className:"small-6",style:{paddingRight:5}},n.a.createElement("h6",{style:{margin:9}},n.a.createElement(q.a,{content:"exchange.settings.title.hide_function_buttons"}),"Â ",n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.hide_function_buttons")},n.a.createElement(f.Icon,{type:"question-circle",theme:"filled"})))),n.a.createElement("div",{className:"small-6"},n.a.createElement(f.Switch,{style:{margin:6},checked:this.props.hideFunctionButtons,onChange:this.props.onHideFunctionButtons.bind(this)})))))}}]),t}(),rt=a(2066),nt=a.n(rt),st=a(2162),ot=a.n(st),it=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),lt=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e){return e.map(function(e){var t=e/60,a=t/60/24,r=a/7;if(t<1)return e+"S";if(a<1&&parseInt(t,10)===t)return t.toString();if(r<1){if(a>=1&&parseInt(a,10)===a)return 1===a?"D":a+"D"}else if(r>=1&&parseInt(r,10)===r)return r+"D";return null}).filter(function(e){return!!e})}var pt=function(){function e(){ct(this,e)}return lt(e,[{key:"update",value:function(e){for(var t in e)switch(t){case"resolutions":this.supported_resolutions=ut(e.resolutions);break;case"onMarketChange":s.a.unsubscribe("market_change"),s.a.subscribe("market_change",e[t]);break;default:this[t]=e[t]}}},{key:"clearSubs",value:function(){s.a.clearSubs()}},{key:"onReady",value:function(e){var t=this;setTimeout(function(){e({exchanges:[{value:"OPEN.",name:"Openledger",desc:"Openledger Gateway"}],symbols_types:[],supported_resolutions:t.supported_resolutions,supports_marks:!1,supports_search:!1,supports_time:!0})},10)}},{key:"searchSymbols",value:function(e,t,a,r){console.log("searchSymbols",e,t,a),r([])}},{key:"resolveSymbol",value:function(e,t,a){var r=this,n=e.split("_"),s=it(n,2),o=s[0],i=s[1];Promise.all([Object(m.FetchChain)("getAsset",o),Object(m.FetchChain)("getAsset",i)]).then(function(a){var n=it(a,2),s=n[0],o=n[1];t(new function e(t){ct(this,e),this.name=t.ticker,this.ticker=t.ticker;var a=Object(He.c)(t.quoteAsset),r=Object(He.c)(t.baseAsset),n=a===r?a:a&&!r?a:!a&&r?r:a+" / "+r,s=F.a.replaceName(t.baseAsset),o=s.name,i=s.prefix,l=F.a.replaceName(t.quoteAsset),c=l.name,u=l.prefix;this.description=""+(u||"")+c+" / "+(i||"")+o+" "+(n?"("+n+")":""),this.type="bitcoin",this.session="24x7",this.timezone=ot.a.tz.guess(),this.data_status="streaming",this.supported_resolutions=t.resolutions,this.has_empty_bars=!0,this.pricescale=Math.pow(10,t.baseAsset.get("precision")),this.quoteAsset=t.quoteAsset,this.baseAsset=t.baseAsset,this.minmov=1,this.has_intraday=this.supported_resolutions.reduce(function(e,t){return e||!isNaN(parseInt(t,10))},!1),this.intraday_multipliers=this.supported_resolutions.filter(function(e){return!isNaN(parseInt(e,10))}),this.has_seconds=this.supported_resolutions.reduce(function(e,t){return e||-1!==t.indexOf("S")},!1),this.seconds_multipliers=this.supported_resolutions.filter(function(e){return-1!==e.indexOf("S")}),this.has_daily=this.supported_resolutions.reduce(function(e,t){return e||-1!==t.indexOf("D")},!1),this.has_daily=this.supported_resolutions.reduce(function(e,t){return e||-1!==t.indexOf("D")},!1)}({ticker:e,quoteAsset:s,baseAsset:o,resolutions:r.supported_resolutions}))}).catch(a)}},{key:"getBars",value:function(e,t,a,r,n,s,o){var i=this;a*=1e3,r*=1e3;var l=this._getHistory();if(this.latestBar=l[l.length-1],l=l.filter(function(e){return e.time>=a&&e.time<=r}),this.interval!==t){if(!o)return;var c=function(e){return"D"===e?86400:-1!==e.indexOf("W")?7*parseInt(e.replace("D",""),10)*24*60*60:-1!==e.indexOf("D")?24*parseInt(e.replace("D",""),10)*60*60:-1!==e.indexOf("S")?parseInt(e.replace("S",""),10):60*parseInt(e,10)}(t);return P.a.changeBucketSize(c),P.a.unSubscribeMarket(e.quoteAsset.get("id"),e.baseAsset.get("id")).then(function(){P.a.subscribeMarket(e.baseAsset,e.quoteAsset,c).then(function(){var e=i._getHistory();if(i.latestBar=e[e.length-1],e=e.filter(function(e){return e.time>=a&&e.time<=r}),i.interval=t,!e.length)return n(e,{noData:!0});n(e)})})}if(this.interval=t,!l.length)return n(l,{noData:!0});n(l)}},{key:"_getHistory",value:function(){return s.a.getState().priceData}},{key:"subscribeBars",value:function(e,t,a,r,n){var o=this;s.a.unsubscribe("subscribeBars"),n(),s.a.subscribe("subscribeBars",function(){var e=o._getHistory(),t=e.filter(function(e){return!o.latestBar||e.time>o.latestBar.time});if(t.length)t.forEach(function(e){a(e)}),o.latestBar=t[t.length-1];else{var r=!1;for(var n in o.latestBar)o.latestBar[n]!==e[e.length-1][n]&&(r=!0);r&&a(e[e.length-1])}})}},{key:"unsubscribeBars",value:function(){}},{key:"calculateHistoryDepth",value:function(e,t,a){}},{key:"getServerTime",value:function(e){e((new Date).getTime()/1e3)}}]),e}(),ht=["America/Argentina/Buenos_Aires","America/Bogota","America/Caracas","America/Chicago","America/El_Salvador","America/Los_Angeles","America/Mexico_City","America/New_York","America/Phoenix","America/Sao_Paulo","America/Toronto","America/Vancouver","Asia/Almaty","Asia/Ashkhabad","Asia/Bangkok","Asia/Dubai","Asia/Hong_Kong","Asia/Kathmandu","Asia/Kolkata","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Taipei","Asia/Tehran","Asia/Tokyo","Australia/ACT","Australia/Adelaide","Australia/Brisbane","Australia/Sydney","Europe/Athens","Europe/Berlin","Europe/Istanbul","Europe/London","Europe/Madrid","Europe/Moscow","Europe/Paris","Europe/Warsaw","Europe/Zurich","Pacific/Auckland","Pacific/Chatham","Pacific/Fakaofo","Pacific/Honolulu","US/Mountain"];var dt=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var mt=a(2161),ft=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),dt(t,[{key:"loadTradingView",value:function(e){var t=this,a=e.dataFeed,r=nt.a[e.theme];if(a&&!this.tvWidget){0,a.update({resolutions:e.buckets,ticker:e.quoteSymbol+"_"+e.baseSymbol,interval:ut([e.bucketSize])[0]});var n=["header_saveload","symbol_info","symbol_search_hot_key","border_around_the_chart","header_symbol_search","header_compare"],s=[];!this.props.mobile&&this.props.chartZoom||(n.push("chart_scroll"),n.push("chart_zoom")),this.props.mobile||!this.props.chartTools?(n.push("left_toolbar"),n.push("chart_crosshair_menu"),n.push("chart_events"),n.push("footer_share_buttons"),n.push("footer_screenshot"),n.push("footer_publish_idea_button"),n.push("caption_buttons_text_if_possible"),n.push("line_tool_templates"),n.push("widgetbar_tabs"),n.push("support_manage_drawings"),n.push("support_multicharts"),n.push("right_bar_stays_on_scroll"),n.push("charts_auto_save"),n.push("edit_buttons_in_legend"),n.push("context_menus"),n.push("control_bar"),n.push("header_fullscreen_button"),n.push("header_widget"),n.push("symbollist_context_menu"),n.push("show_pro_features")):(s.push("study_templates"),s.push("keep_left_toolbar_visible_on_small_screens")),this.tvWidget=new mt.widget({fullscreen:!1,symbol:e.quoteSymbol+"_"+e.baseSymbol,interval:ut([e.bucketSize])[0],library_path:"/charting_library/",datafeed:a,container_id:"tv_chart",charts_storage_url:"https://saveload.tradingview.com",charts_storage_api_version:"1.1",client_id:"tradingview.com",user_id:"public_user_id",autosize:!0,locale:e.locale,timezone:function(){var e=ot.a.tz.guess();if(-1!==ht.indexOf(e))return e;for(var t=ot()().toISOString(),a=ot.a.tz(t,e).format(),r=0;r<ht.length;r++)if(ot.a.tz(t,ht[r]).format()===a)return ht[r];return console.log("No matching timezone found for "+e+", setting to default value of Europe/London"),"Europe/London"}(),toolbar_bg:r.bgColor,overrides:{"paneProperties.background":r.bgColor,"paneProperties.horzGridProperties.color":r.axisLineColor,"paneProperties.vertGridProperties.color":r.axisLineColor,"scalesProperties.lineColor":r.axisLineColor,"scalesProperties.textColor":r.textColor},custom_css_url:e.theme+".css",enabled_features:s,disabled_features:n,debug:!1,preset:this.props.mobile?"mobile":""}),this.tvWidget.onChartReady(function(){a.update({onMarketChange:t._setSymbol.bind(t)})}),this._onWheel=this._onWheel.bind(this)}}},{key:"componentWillReceiveProps",value:function(e){e.marketReady&&!this.props.dataFeed&&e.dataFeed&&loadTradingView(e)}},{key:"_setSymbol",value:function(e){this.tvWidget&&this.tvWidget.setSymbol(e,ut([this.props.bucketSize])[0])}},{key:"componentDidMount",value:function(){this.loadTradingView(this.props)}},{key:"componentWillUnmount",value:function(){this.props.dataFeed.clearSubs()}},{key:"shouldComponentUpdate",value:function(e){return e.chartHeight!==this.props.chartHeight||!this.tvWidget&&!!e.marketReady}},{key:"_onWheel",value:function(e){console.log("Test wheel interception")}},{key:"render",value:function(){return n.a.createElement("div",{className:"small-12"},n.a.createElement("div",{className:"exchange-bordered",style:{margin:0,height:this.props.chartHeight+"px"},id:"tv_chart"}))}}]),t}(),gt=a(585),bt=a(2037),yt=a.n(bt),vt=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var _t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),vt(t,[{key:"shouldComponentUpdate",value:function(e){var t=!isNaN(e.feedPrice)&&e.feedPrice!==this.props.feedPrice;return Object(B.k)(e.orders,this.props.orders)||Object(B.k)(e.call_orders,this.props.call_orders)||t||e.feedPrice!==this.props.feedPrice||e.height!==this.props.height||e.isPanelActive!==this.props.isPanelActive||e.activePanels!==this.props.activePanels||e.LCP!==this.props.LCP||e.showCallLimit!==this.props.showCallLimit||e.hasPrediction!==this.props.hasPrediction||e.feedPrice!==this.props.feedPrice||e.marketReady!==this.props.marketReady}},{key:"componentDidMount",value:function(){this.reflowChart(500)}},{key:"componentWillReceiveProps",value:function(e){this.refs.depthChart&&e.activePanels!==this.props.activePanels&&this.reflowChart(100)}},{key:"componentWillUpdate",value:function(){this.props.centerRef&&(this.tempScroll=this.props.centerRef.scrollTop)}},{key:"componentDidUpdate",value:function(){this.props.centerRef&&(this.props.centerRef.scrollTop=this.tempScroll)}},{key:"reflowChart",value:function(e){var t=this;setTimeout(function(){t.refs.depthChart&&t.refs.depthChart.chart.reflow()},e)}},{key:"_getThemeColors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return nt.a[e.theme]}},{key:"render",value:function(){var e=this.props,t=e.flat_bids,a=e.flat_asks,r=e.flat_calls,s=e.flat_settles,o=e.totalBids,i=e.totalAsks,l=e.base,c=e.quote,u=e.feedPrice,p=this._getThemeColors(),h=p.primaryText,d=p.callColor,m=p.settleColor,f=p.settleFillColor,g=p.bidColor,b=p.bidFillColor,y=p.askColor,_=p.askFillColor,k=p.axisLineColor,E=F.a.replaceName(l),w=E.name,S=E.prefix,C=F.a.replaceName(c),A=C.name,x=C.prefix;w=(S||"")+w,A=(x||"")+A;var O=Object(gt.a)(t),P=Object(gt.a)(a),T=Object(gt.a)(r),N=Object(gt.a)(s),B={chart:{type:"area",backgroundColor:"rgba(255, 0, 0, 0)",spacing:[10,0,5,0]},title:{text:null},credits:{enabled:!1},legend:{enabled:!1},rangeSelector:{enabled:!1},navigator:{enabled:!1},scrollbar:{enabled:!1},dataGrouping:{enabled:!1},tooltip:{shared:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",useHTML:!0,formatter:function(){return"\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>"+v.a.translate("exchange.price")+':</td>\n\t\t\t\t\t\t\t<td style="text-align: right">'+F.a.format_number(this.x,l.get("precision"))+" "+w+"/"+A+"</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>"+v.a.translate("exchange.quantity")+':</td>\n\t\t\t\t\t\t\t<td style="text-align: right">'+F.a.format_number(this.y,c.get("precision"))+" "+A+"</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t\t"},style:{color:"#FFFFFF"}},series:[],yAxis:{labels:{enabled:!0,style:{color:h},formatter:function(){return F.a.format_number(this.value,c.get("precision"))}},opposite:!1,title:{text:null,style:{color:"#FFFFFF"}},gridLineWidth:1,gridLineColor:"rgba(196, 196, 196, 0.30)",gridZIndex:1,crosshair:{snap:!1},currentPriceIndicator:{enabled:!1}},xAxis:{labels:{style:{color:h}},ordinal:!1,lineColor:"#000000",title:{text:null},plotLines:[]},plotOptions:{area:{animation:!1,marker:{enabled:!1},series:{enableMouseTracking:!1}}}};if(O.length>0&&P.length>0){var M=(P[0][0]+O[O.length-1][0])/2;B.xAxis.min=.4*M,B.xAxis.max=1.6*M,B.xAxis.max<P[0][0]&&(B.xAxis.max=1.5*P[0][0]),B.xAxis.min>O[O.length-1][0]&&(B.xAxis.min=.5*O[O.length-1][0]);var j=0;O.forEach(function(e){e[0]>=B.xAxis.min&&(j=Math.max(e[1],j))}),P.forEach(function(e){e[0]<=B.xAxis.max&&(j=Math.max(e[1],j))}),B.yAxis.max=1.15*j;var I=j>10?0:j>1?2:5;B.yAxis.labels.formatter=function(){return F.a.format_number(this.value,I)}}else O.length&&!P.length?(B.xAxis.min=.4*O[O.length-1][0],B.xAxis.max=1.6*O[O.length-1][0]):P.length&&!O.length&&(B.xAxis.min=0,B.xAxis.max=2*P[0][0]);if(this.props.hasPrediction&&(B.xAxis.min=-.05,B.xAxis.max=1.05),this.props.LCP&&B.xAxis.plotLines.push({color:k,id:"plot_line",dashStyle:"longdash",value:this.props.LCP,label:{text:v.a.translate("explorer.block.call_limit"),style:{color:h,fontWeight:"bold"}},width:2,zIndex:5}),u){var R=l.has("bitasset")?y:g;B.xAxis.plotLines.push({color:R,id:"plot_line",dashStyle:"solid",value:u,label:{text:v.a.translate("explorer.block.feed_price"),style:{color:h,fontWeight:"bold"}},width:2,zIndex:5}),T&&T.length&&B.series.push({name:"Call "+A,data:T,color:d})}return u&&N&&N.length&&B.series.push({name:"Settle "+A,data:N,color:m,fillColor:f}),O.length&&B.series.push({step:"right",name:"Bid "+A,data:O,color:g,fillColor:b}),P.length&&B.series.push({step:"left",name:"Ask "+A,data:P,color:y,fillColor:_}),this.props.height?B.chart.height=this.props.height:B.chart.height="400px",this.props.onClick&&(B.chart.events={click:this.props.onClick.bind(this)}),this.props.noFrame?n.a.createElement("div",{className:"grid-content no-overflow no-padding"},O.length||P.length||T.length?null:n.a.createElement("span",{className:"no-data"},n.a.createElement(q.a,{content:"exchange.no_data"})),this.props.noText?null:n.a.createElement("p",{className:"bid-total"},F.a.format_number(o,l.get("precision"))," ",w),this.props.noText?null:n.a.createElement("p",{className:"ask-total"},F.a.format_number(i,c.get("precision"))," ",A),O||P||T?n.a.createElement(yt.a,{config:B}):null):n.a.createElement("div",{className:"grid-content no-overflow no-padding middle-content"},n.a.createElement("div",{className:"exchange-bordered",style:{margin:0}},n.a.createElement("div",{className:"exchange-content-header"},this.props.noText?null:n.a.createElement("span",{className:"bid-total"},F.a.format_number(o,l.get("precision"))," ",n.a.createElement(V.a,{name:l.get("symbol")})),this.props.noText?null:n.a.createElement("span",{className:"ask-total float-right"},F.a.format_number(i,c.get("precision"))," ",n.a.createElement(V.a,{name:c.get("symbol")}))),O.length||P.length||T.length?null:n.a.createElement("span",{className:"no-data"},n.a.createElement(q.a,{content:"exchange.no_data"})),O||P||T?n.a.createElement(yt.a,{ref:"depthChart",config:B}):null))}}]),t}();_t.defaultProps={flat_bids:[],flat_asks:[],orders:{},noText:!1,noFrame:!0},_t.propTypes={flat_bids:x.a.array.isRequired,flat_asks:x.a.array.isRequired,orders:x.a.object.isRequired};var kt=_t,Et=a(41),wt=a(576),St=a(2166),Ct=a.n(St),At=a(114),xt=a.n(At),Ot=a(568),Pt=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var Tt=m.ChainTypes.operations,Nt=Object.keys(Tt),Bt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),Pt(t,[{key:"componentWillReceiveProps",value:function(e){if(e.account&&e.account.size&&this.props.account&&this.props.account.get("history")){var t=this.props.account.get("history")&&this.props.account.get("history").first()?this.props.account.get("history").first().toJS():null,a=e.account.get("history")&&e.account.get("history").first()?e.account.get("history").first().toJS():null;a&&t&&"fill_order"===Nt[a.op[0]]&&(!t&&a.id||a.id!==t.id)&&(xt.a.publish("account-notify","open"),setTimeout(function(){xt.a.publish("account-notify","close")},5e3))}}},{key:"shouldComponentUpdate",value:function(e){return!(!e.account||!this.props.account)&&(!xe.a.is(e.account.get("history"),this.props.account.get("history"))||!xe.a.is(e.account,this.props.account))}},{key:"render",value:function(){var e=this.props.account;if(!e)return n.a.createElement("div",null);var t=void 0,a=void 0;return this.props.account.get("history")&&this.props.account.get("history").size&&(t=this.props.account.get("history").first().toJS())&&(a=n.a.createElement(Ot.a,{key:t.id,op:t.op,result:t.result,block:t.block_num,current:e.get("id"),hideDate:!0,hideFee:!0})),t?n.a.createElement(Ct.a.Static,{id:"account-notify",title:null,image:"",wrapperElement:"div"},n.a.createElement("table",{className:"table"},n.a.createElement("tbody",null,a))):n.a.createElement("div",null)}}]),t}();Bt.propTypes={account:R.a.ChainAccount.isRequired};var Mt=Bt=Object(L.a)(Bt),Ft=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var jt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),Ft(t,[{key:"render",value:function(){return n.a.createElement(p.a,{stores:[o.a],inject:{account:function(){return o.a.getState().currentAccount}}},n.a.createElement(Mt,null))}}]),t}(),qt=a(2172),It=a(2046),Rt=a(350),Lt=a(121),Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Vt=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var zt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={rules:[].concat([])},a.handleSave=a.handleSave.bind(a),a.handleAddRule=a.handleAddRule.bind(a),a.handleTypeChange=a.handleTypeChange.bind(a),a.handleDeleteRule=a.handleDeleteRule.bind(a),a.handlePriceChange=a.handlePriceChange.bind(a),a.handlePriceFieldBlur=a.handlePriceFieldBlur.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),Vt(t,[{key:"componentDidUpdate",value:function(e){if(!e.visible&&this.props.visible){var t={type:Rt.a.HIGHER_THAN,price:this.props.latestPrice?Number(this.props.latestPrice):null},a=[];a=this.props.rules.length?this.props.rules:this.state.openedPreviously?[]:[t],this.setState({rules:a,openedPreviously:!0})}}},{key:"handleTypeChange",value:function(e){var t=this;return function(a){var r=t.state.rules.map(function(r,n){if(Number(e)!==Number(n))return r;var s=t.validatePrice(a,Number(r.price),Number(t.props.latestPrice));return Dt({},r,s,{type:String(a)})});t.setState({rules:r})}}},{key:"validatePrice",value:function(e,t,a){return e===Rt.a.HIGHER_THAN&&t<a?{validateStatus:"error",help:"Price of Alert should be higher than current price"}:e===Rt.a.LOWER_THAN&&t>a?{validateStatus:"error",help:"Price of Alert  should be lower than current price"}:{validateStatus:"success",help:""}}},{key:"validatePriceFieldByKey",value:function(e){var t=this,a=this.state.rules.map(function(a,r){if(Number(e)!==Number(r))return a;var n=t.validatePrice(a.type,Number(a.price),Number(t.props.latestPrice));return Dt({},a,{validateStatus:n.validateStatus,help:n.help})});this.setState({rules:a})}},{key:"handlePriceFieldBlur",value:function(e){var t=this;return function(){t.validatePriceFieldByKey(e)}}},{key:"handlePriceChange",value:function(e){var t=this;return function(a){var r=t.state.rules.map(function(r,n){if(Number(e)!==Number(n))return r;var s={};return r.validateStatus&&(s=t.validatePrice(r.type,Number(a.target.value),Number(t.props.latestPrice))),Dt({},r,s,{price:a.target.value})});t.setState({rules:r})}}},{key:"handleAddRule",value:function(){var e=[].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(this.state.rules));e.push({type:Rt.a.HIGHER_THAN,price:this.props.latestPrice?Number(this.props.latestPrice):null}),this.setState({rules:e})}},{key:"handleDeleteRule",value:function(e){var t=this;return function(){var a=t.state.rules.filter(function(t,a){return Number(a)!==Number(e)});t.setState({rules:a})}}},{key:"handleSave",value:function(){this.props.onSave(this.state.rules)}},{key:"render",value:function(){var e=this;if(!(this.props.quoteAsset&&this.props.quoteAsset.get&&this.props.baseAsset&&this.props.baseAsset.get))return null;var t=[n.a.createElement(f.Button,{key:"submit",type:"primary",onClick:this.handleSave},v.a.translate("modal.save")),n.a.createElement(f.Button,{key:"cancel",onClick:this.props.hideModal},v.a.translate("modal.cancel"))],a=this.props.baseAsset.get("symbol"),r=this.props.quoteAsset.get("symbol"),s=r+"_"+a;return n.a.createElement(f.Modal,{visible:this.props.visible,onCancel:this.props.hideModal,title:v.a.translate("exchange.price_alert.title"),footer:t},n.a.createElement("div",{className:"exchange--price-alert"},n.a.createElement("div",{className:"exchange--price-alert--description"},this.state.rules.length?n.a.createElement("div",null,v.a.translate("exchange.price_alert.alert_when")," ",n.a.createElement(Y.a,{to:s},n.a.createElement(V.a,{name:r}),"/",n.a.createElement(V.a,{name:a}))," ","price:"):n.a.createElement("div",null,v.a.translate("exchange.price_alert.use_button"),n.a.createElement(Y.a,{to:s},n.a.createElement(V.a,{name:r}),"/",n.a.createElement(V.a,{name:a})),":"),n.a.createElement(f.Form,{layout:"vertical"},n.a.createElement("div",{className:"exchange--price-alert--items"},this.state.rules.map(function(t,r){return n.a.createElement(f.Form.Item,{key:r,validateStatus:t.validateStatus||null,help:t.help||null},n.a.createElement(f.Input.Group,{className:"exchange--price-alert--item",compact:!0},n.a.createElement(f.Select,{value:t.type,style:{width:"200px"},onChange:e.handleTypeChange(r)},n.a.createElement(f.Select.Option,{value:Rt.a.HIGHER_THAN,key:"1"},v.a.translate("exchange.price_alert.higher_than")),n.a.createElement(f.Select.Option,{value:Rt.a.LOWER_THAN,key:"2"},v.a.translate("exchange.price_alert.lower_than"))),n.a.createElement(f.Input,{onBlur:e.handlePriceFieldBlur(r),style:{width:"calc(100% - 200px - 32px)",marginTop:"1px"},onChange:e.handlePriceChange(r),value:t.price,className:"exchange--price-alert--item--price",placeholder:v.a.translate("exchange.price_alert.price"),addonAfter:n.a.createElement(V.a,{name:a})}),n.a.createElement(f.Button,{style:{width:"32px"},onClick:e.handleDeleteRule(r),className:"exchange--price-alert--item--control",type:"icon",icon:"delete"})))})),n.a.createElement("div",{className:"exchange--price-alert--items--add"},n.a.createElement("a",{href:"javascript:void(0)",onClick:this.handleAddRule},n.a.createElement(f.Icon,{type:"plus"})," ",v.a.translate("exchange.price_alert.add_rule")))))))}}]),t}(),Ht=zt=Object(Lt.a)(zt,{propNames:["quoteAsset","baseAsset"]}),Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,n=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){n=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Qt=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function Kt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Jt(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var Zt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.EXPIRATIONS={HOUR:{title:"1 hour",get:function(){return w()().add(1,"hour").valueOf()}},"12HOURS":{title:"12 hours",get:function(){return w()().add(12,"hour").valueOf()}},"24HOURS":{title:"24 hours",get:function(){return w()().add(1,"day").valueOf()}},"7DAYS":{title:"7 days",get:function(){return w()().add(7,"day").valueOf()}},MONTH:{title:"30 days",get:function(){return w()().add(30,"day").valueOf()}},YEAR:{title:"1 year",get:function(){return w()().add(1,"year").valueOf()}},SPECIFIC:{title:"Specific",get:function(e){return a.state.expirationCustomTime[e].valueOf()}}},a._chartZoom=function(){O.a.changeViewSetting({chartZoom:!a.state.chartZoom});var e=a.state.chartType;a.setState({chartZoom:!a.state.chartZoom,chartType:"hidden_chart"}),setTimeout(function(){a.setState({chartType:e})},100)},a._chartTools=function(){O.a.changeViewSetting({chartTools:!a.state.chartTools});var e=a.state.chartType;a.setState({chartTools:!a.state.chartTools,chartType:"hidden_chart"}),setTimeout(function(){a.setState({chartType:e})},100)},a._flipOrderBook=function(){O.a.changeViewSetting({flipOrderBook:!a.state.flipOrderBook}),a.setState({flipOrderBook:!a.state.flipOrderBook})},a._orderBookReversed=function(){O.a.changeViewSetting({orderBookReversed:!a.state.orderBookReversed}),a.setState({orderBookReversed:!a.state.orderBookReversed})},a._hideFunctionButtons=function(){O.a.changeViewSetting({hideFunctionButtons:!a.state.hideFunctionButtons}),a.setState({hideFunctionButtons:!a.state.hideFunctionButtons})},a.state=Gt({},a._initialState(e),{expirationType:{bid:e.exchange.getIn(["lastExpiration","bid"])||"YEAR",ask:e.exchange.getIn(["lastExpiration","ask"])||"YEAR"},expirationCustomTime:{bid:w()().add(1,"day"),ask:w()().add(1,"day")},feeStatus:{}}),a._getWindowSize=Object(h.a)(a._getWindowSize.bind(a),150),a._checkFeeStatus=a._checkFeeStatus.bind(a),a._handleExpirationChange=a._handleExpirationChange.bind(a),a._handleCustomExpirationChange=a._handleCustomExpirationChange.bind(a),a.showPersonalizeModal=a.showPersonalizeModal.bind(a),a.hidePersonalizeModal=a.hidePersonalizeModal.bind(a),a.showConfirmSellOrderModal=a.showConfirmSellOrderModal.bind(a),a.hideConfirmSellOrderModal=a.hideConfirmSellOrderModal.bind(a),a.showConfirmBuyOrderModal=a.showConfirmBuyOrderModal.bind(a),a.hideConfirmBuyOrderModal=a.hideConfirmBuyOrderModal.bind(a),a.showMarketPickerModal=a.showMarketPickerModal.bind(a),a.hideMarketPickerModal=a.hideMarketPickerModal.bind(a),a.showDepositBridgeModal=a.showDepositBridgeModal.bind(a),a.hideDepositBridgeModal=a.hideDepositBridgeModal.bind(a),a.showDepositModal=a.showDepositModal.bind(a),a.hideDepositModal=a.hideDepositModal.bind(a),a.showBorrowQuoteModal=a.showBorrowQuoteModal.bind(a),a.hideBorrowQuoteModal=a.hideBorrowQuoteModal.bind(a),a.showBorrowBaseModal=a.showBorrowBaseModal.bind(a),a.hideBorrowBaseModal=a.hideBorrowBaseModal.bind(a),a.showPriceAlertModal=a.showPriceAlertModal.bind(a),a.hidePriceAlertModal=a.hidePriceAlertModal.bind(a),a.handlePriceAlertSave=a.handlePriceAlertSave.bind(a),a.psInit=!0,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.a.Component),Qt(t,[{key:"handlePriceAlertSave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t=t.map(function(t){return{type:t.type,price:t.price,baseAssetSymbol:e.props.baseAsset.get("symbol"),quoteAssetSymbol:e.props.quoteAsset.get("symbol")}});var a=this.props.priceAlert.filter(function(t){return t&&e.props.baseAsset&&e.props.quoteAsset&&(t.get("baseAssetSymbol")!==e.props.baseAsset.get("symbol")||t.get("quoteAssetSymbol")!==e.props.quoteAsset.get("symbol"))});a=[].concat(Jt(a),Jt(t)),O.a.setPriceAlert(a),this.hidePriceAlertModal()}},{key:"getPriceAlertRules",value:function(){var e=this;return this.props.priceAlert.filter(function(t){return t&&e.props.baseAsset&&e.props.quoteAsset&&t.get("baseAssetSymbol")===e.props.baseAsset.get("symbol")&&t.get("quoteAssetSymbol")===e.props.quoteAsset.get("symbol")}).toJS()}},{key:"_handleExpirationChange",value:function(e,t){var a=Gt({},this.state.expirationType,Kt({},e,t.target.value));"SPECIFIC"!==t.target.value&&O.a.setExchangeLastExpiration(Gt({},this.props.exchange.has("lastExpiration")&&this.props.exchange.get("lastExpiration").toJS()||{},Kt({},e,t.target.value))),this.setState({expirationType:a})}},{key:"_handleCustomExpirationChange",value:function(e,t){var a=Gt({},this.state.expirationCustomTime,Kt({},e,t));this.setState({expirationCustomTime:a})}},{key:"_initialOrderState",value:function(e){var t={forSaleText:"",toReceiveText:"",priceText:"",for_sale:new B.a({asset_id:e.baseAsset.get("id"),precision:e.baseAsset.get("precision")}),to_receive:new B.a({asset_id:e.quoteAsset.get("id"),precision:e.quoteAsset.get("precision")})};t.price=new B.i({base:t.for_sale,quote:t.to_receive});var a={forSaleText:"",toReceiveText:"",priceText:"",for_sale:new B.a({asset_id:e.quoteAsset.get("id"),precision:e.quoteAsset.get("precision")}),to_receive:new B.a({asset_id:e.baseAsset.get("id"),precision:e.baseAsset.get("precision")})};return a.price=new B.i({base:a.for_sale,quote:a.to_receive}),{ask:a,bid:t}}},{key:"_initialState",value:function(e){var t=e.viewSettings,a=this._initialOrderState(e),r=a.ask,n=a.bid,s=t.get("chartHeight",620);return 620==s&&window.innerWidth<640&&(s=400),{isDepositBridgeModelLoaded:!1,isDepositModalLoaded:!1,isPersonalizeModalLoaded:!1,isMarketPickerModalLoaded:!1,isBorrowQuoteModalLoaded:!1,isBorrowBaseModalLoaded:!1,isDepositBridgeModalVisible:!1,isDepositModalVisible:!1,isPersonalizeModalVisible:!1,isMarketPickerModalVisible:!1,isBorrowQuoteModalVisible:!1,isBorrowBaseModalVisible:!1,history:[],isConfirmBuyOrderModalVisible:!1,isConfirmBuyOrderModalLoaded:!1,isConfirmSellOrderModalVisible:!1,isPriceAlertModalVisible:!1,isConfirmSellOrderModalLoaded:!1,tabVerticalPanel:t.get("tabVerticalPanel","my-market"),tabBuySell:t.get("tabBuySell","buy"),buySellOpen:t.get("buySellOpen",!0),bid:n,ask:r,height:window.innerHeight,width:window.innerWidth,favorite:!1,buyDiff:!1,sellDiff:!1,autoScroll:t.get("global_AutoScroll",!0),buySellTop:t.get("buySellTop",!0),buyFeeAssetIdx:t.get("buyFeeAssetIdx",0),sellFeeAssetIdx:t.get("sellFeeAssetIdx",0),verticalOrderBook:t.get("verticalOrderBook",!1),verticalOrderForm:t.get("verticalOrderForm",!1),hidePanel:t.get("hidePanel",!1),hideScrollbars:t.get("hideScrollbars",!1),singleColumnOrderForm:t.get("singleColumnOrderForm",!0),flipOrderBook:t.get("flipOrderBook",!1),flipBuySell:t.get("flipBuySell",!1),orderBookReversed:t.get("orderBookReversed",!1),chartType:t.get("chartType","price_chart"),chartHeight:s,chartZoom:t.get("chartZoom",!0),chartTools:t.get("chartTools",!0),hideFunctionButtons:t.get("hideFunctionButtons",!0),currentPeriod:t.get("currentPeriod",7776e3),showMarketPicker:!1,activePanels:t.get("activePanels",["left","right"]),mobileKey:[""],forceReRender:0,panelWidth:0,mirrorPanels:t.get("mirrorPanels",!1),panelTabs:t.get("panelTabs",{my_history:1,history:1,my_orders:2,open_settlement:2}),panelTabsActive:t.get("panelTabsActive",{1:"history",2:"my_orders"})}}},{key:"showMarketPickerModal",value:function(){this.setState({isMarketPickerModalVisible:!0,isMarketPickerModalLoaded:!0})}},{key:"hideMarketPickerModal",value:function(){this.setState({isMarketPickerModalVisible:!1})}},{key:"showPersonalizeModal",value:function(){this.setState({isPersonalizeModalVisible:!0,isPersonalizeModalLoaded:!0})}},{key:"hidePersonalizeModal",value:function(){this.setState({isPersonalizeModalVisible:!1})}},{key:"showPriceAlertModal",value:function(){this.setState({isPriceAlertModalVisible:!0})}},{key:"hidePriceAlertModal",value:function(){this.setState({isPriceAlertModalVisible:!1})}},{key:"showBorrowQuoteModal",value:function(){this.setState({isBorrowQuoteModalVisible:!0,isBorrowQuoteModalLoaded:!0})}},{key:"hideBorrowQuoteModal",value:function(){this.setState({isBorrowQuoteModalVisible:!1})}},{key:"showBorrowBaseModal",value:function(){this.setState({isBorrowBaseModalVisible:!0,isBorrowBaseModalLoaded:!0})}},{key:"hideBorrowBaseModal",value:function(){this.setState({isBorrowBaseModalVisible:!1})}},{key:"showDepositBridgeModal",value:function(){this.setState({isDepositBridgeModalVisible:!0,isDepositBridgeModalLoaded:!0})}},{key:"hideDepositBridgeModal",value:function(){this.setState({isDepositBridgeModalVisible:!1})}},{key:"showDepositModal",value:function(){this.setState({isDepositModalVisible:!0,isDepositModalLoaded:!0})}},{key:"hideDepositModal",value:function(){this.setState({isDepositModalVisible:!1})}},{key:"_getLastMarketKey",value:function(){var e=d.Apis.instance().chain_id;return"lastMarket"+(e?"_"+e.substr(0,8):"")}},{key:"showConfirmBuyOrderModal",value:function(){this.setState({isConfirmBuyOrderModalVisible:!0,isConfirmBuyOrderModalLoaded:!0})}},{key:"hideConfirmBuyOrderModal",value:function(){this.setState({isConfirmBuyOrderModalVisible:!1})}},{key:"showConfirmSellOrderModal",value:function(){this.setState({isConfirmSellOrderModalVisible:!0,isConfirmSellOrderModalLoaded:!0})}},{key:"hideConfirmSellOrderModal",value:function(){this.setState({isConfirmSellOrderModalVisible:!1})}},{key:"componentWillMount",value:function(){window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0}),this._checkFeeStatus()}},{key:"componentDidMount",value:function(){P.a.getTrackedGroupsConfig(),O.a.changeViewSetting.defer(Kt({},this._getLastMarketKey(),this.props.quoteAsset.get("symbol")+"_"+this.props.baseAsset.get("symbol"))),window.addEventListener("resize",this._getWindowSize,{capture:!1,passive:!0})}},{key:"_forceRender",value:function(e,t){this.state.forceReRender&&this.setState({forceReRender:!1}),F.a.are_equal_shallow(this.state.activePanels,t.activePanels)&&F.a.are_equal_shallow(this.state.verticalOrderBook,t.verticalOrderBook)&&e.quoteAsset===this.props.quoteAsset&&e.baseAsset===this.props.baseAsset||this.setState({forceReRender:!0})}},{key:"shouldComponentUpdate",value:function(e,t){if(this._forceRender(e,t),!e.marketReady&&!this.props.marketReady)return!1;var a=!1,r=!1;for(var n in e)if(e.hasOwnProperty(n)&&(a=a||!F.a.are_equal_shallow(e[n],this.props[n])))break;for(var s in t.panelTabsActive)r=!F.a.are_equal_shallow(t.panelTabsActive[s],this.state.panelTabsActive[s]);return a||r||!F.a.are_equal_shallow(t,this.state)}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[this.props.coreAsset,this.props.baseAsset,this.props.quoteAsset],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.currentAccount,r={},n=[];t.forEach(function(e){n.push(Object(M.b)({accountID:a.get("id"),feeID:e.get("id"),type:"limit_order_create"}))}),Promise.all(n).then(function(a){t.forEach(function(e,t){r[e.get("id")]=a[t]}),F.a.are_equal_shallow(e.state.feeStatus,r)||e.setState({feeStatus:r})}).catch(function(t){console.error("checkFeeStatusAsync error",t),e.setState({feeStatus:{}})})}},{key:"_getWindowSize",value:function(){var e=window,t=e.innerHeight,a=e.innerWidth;if(t!==this.state.height||a!==this.state.width){this.setState({height:t,width:a});var r=this.refs.center;r&&C.a.update(r)}}},{key:"componentDidUpdate",value:function(e,t){if(this._initPsContainer(),!this.props.exchange.get("tutorialShown")&&e.coreAsset&&t.feeStatus&&!this.tutorialShown){this.tutorialShown=!0;var a=this.props.settings.get("themes");k.a.introJs().setOptions({tooltipClass:a,highlightClass:a,showBullets:!1,hideNext:!0,hidePrev:!0,nextLabel:v.a.translate("walkthrough.next_label"),prevLabel:v.a.translate("walkthrough.prev_label"),skipLabel:v.a.translate("walkthrough.skip_label"),doneLabel:v.a.translate("walkthrough.done_label")}).start(),O.a.setExchangeTutorialShown.defer(!0)}}},{key:"_initPsContainer",value:function(){if(this.refs.center&&this.psInit){var e=this.refs.center;e&&(C.a.initialize(e),this.psInit=!1)}}},{key:"componentWillReceiveProps",value:function(e){if(this._initPsContainer(),e.quoteAsset===this.props.quoteAsset&&e.baseAsset===this.props.baseAsset&&e.currentAccount===this.props.currentAccount||this._checkFeeStatus([e.coreAsset,e.baseAsset,e.quoteAsset],e.currentAccount),e.quoteAsset.get("symbol")!==this.props.quoteAsset.get("symbol")||e.baseAsset.get("symbol")!==this.props.baseAsset.get("symbol"))return this.setState(this._initialState(e)),O.a.changeViewSetting(Kt({},this._getLastMarketKey(),e.quoteAsset.get("symbol")+"_"+e.baseAsset.get("symbol")))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._getWindowSize)}},{key:"_getFeeAssets",value:function(e,t,a){var r=this,n=this.props.currentAccount,s=this.state.feeStatus;function o(e,t){-1===e.indexOf(t)&&e.push(t)}var i=[a,e===a?t:e];o(i,e),o(i,t);var l=[a,t===a?e:t];o(l,e),o(l,t);var c={};function u(e,t,r){var n=void 0;return(e=e.filter(function(e){return!!t[e.get("id")]&&(function(e){return s[e]&&s[e].hasPoolBalance}(e.get("id"))&&function(e){return s[e]&&s[e].hasBalance}(e.get("id")))})).length?n=e[Math.min(e.length-1,r)]:(n=a,e.push(a)),{assets:e,asset:n}}n.get("balances",[]).filter(function(a,r){return["1.3.0",e.get("id"),t.get("id")].indexOf(r)>=0}).forEach(function(e,t){var a=m.ChainStore.getObject(e);c[t]={balance:a?parseInt(a.get("balance"),10):0,fee:r._getFee(m.ChainStore.getAsset(t))}});var p=u(i,c,this.state.sellFeeAssetIdx),h=p.assets,d=p.asset,f=u(l,c,this.state.buyFeeAssetIdx),g=f.assets,b=f.asset;return{sellFeeAsset:d,sellFeeAssets:h,sellFee:this._getFee(d),buyFeeAsset:b,buyFeeAssets:g,buyFee:this._getFee(b)}}},{key:"_getFee",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.coreAsset;return this.state.feeStatus[e.get("id")]&&this.state.feeStatus[e.get("id")].fee}},{key:"_verifyFee",value:function(e,t,a,r){var n=this._getFee();return"1.3.0"===e.asset_id?n.getAmount()<=r?"1.3.0":null:(t.asset_id===e.asset_id?e.getAmount()+t.getAmount():t.getAmount())<=a?e.asset_id:n.getAmount()<=r&&"1.3.0"!==e.asset_id?"1.3.0":null}},{key:"_createLimitOrderConfirm",value:function(e,t,a,r,n,s){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];arguments[7].preventDefault();var i=this.props.marketData,l=i.highestBid,c=i.lowestAsk,u=this.state["sell"===s?"ask":"bid"];a=u.for_sale.clone(a?parseInt(m.ChainStore.getObject(a).toJS().balance,10):0),r=new B.a({amount:r?parseInt(m.ChainStore.getObject(r).toJS().balance,10):0});var p=this._getFee(n),h=this._verifyFee(p,u.for_sale,a.getAmount(),r.getAmount());if(!h)return f.Notification.error({message:v.a.translate("notifications.exchange_insufficient_funds_for_fees")});if("buy"===s&&c){var d=this.state.bid.price.toReal()/c.getPrice();if(d>1.2)return this.showConfirmBuyOrderModal(),this.setState({buyDiff:d})}else if("sell"===s&&l){var g=1/(this.state.ask.price.toReal()/l.getPrice());if(g>1.2)return this.showConfirmSellOrderModal(),this.setState({sellDiff:g})}var b=t.getIn(["bitasset","is_prediction_market"]);return u.for_sale.gt(a)&&!b?f.Notification.error({message:v.a.translate("notifications.exchange_insufficient_funds_to_place_order",{amount:u.for_sale.getAmount({real:!0}),symbol:t.get("symbol")})}):u.for_sale.getAmount()>0&&u.to_receive.getAmount()>0?"sell"===s&&b&&o?this._createPredictionShort(h):void this._createLimitOrder(s,h):f.Notification.warning({message:v.a.translate("notifications.exchange_enter_valid_values")})}},{key:"_createLimitOrder",value:function(e,t){var a="sell"===e?"ask":"bid",r=this.state[a],n=null;n="SPECIFIC"===this.state.expirationType[a]?this.EXPIRATIONS[this.state.expirationType[a]].get(a):this.EXPIRATIONS[this.state.expirationType[a]].get();var s=new B.h({for_sale:r.for_sale,expiration:new Date(n||!1),to_receive:r.to_receive,seller:this.props.currentAccount.get("id"),fee:{asset_id:t,amount:0}}),o=N.a.getMarketName(this.props.baseAsset,this.props.quoteAsset),i=o.marketName,l=o.first,c=this.props.marketDirections.get(i);if(c&&l.get("id")!==this.props.baseAsset.get("id")||!c&&l.get("id")!==this.props.baseAsset.get("id")){var u={};u[i]=!c,O.a.changeMarketDirection(u)}return P.a.createLimitOrder2(s).then(function(e){e.error&&"wallet locked"!==e.error.message&&f.Notification.error({message:v.a.translate("notifications.exchange_unknown_error_place_order",{amount:r.to_receive.getAmount({real:!0}),symbol:r.to_receive.asset_id})})}).catch(function(e){console.error("order failed:",e)})}},{key:"_clearForms",value:function(e){var t=this._initialOrderState(this.props),a=t.ask,r=t.bid;e?"ask"==e?this.setState({ask:a}):"bid"==e&&this.setState({bid:r}):this.setState({bid:r,ask:a})}},{key:"_createPredictionShort",value:function(e){var t=this.state.ask,a=new B.h({for_sale:t.for_sale,to_receive:t.to_receive,seller:this.props.currentAccount.get("id"),fee:{asset_id:e,amount:0}});Promise.all([Object(m.FetchChain)("getAsset",this.props.quoteAsset.getIn(["bitasset","options","short_backing_asset"]))]).then(function(e){var t=Ut(e,1)[0],r=new B.a({amount:a.amount_for_sale.getAmount(),asset_id:t.get("id"),precision:t.get("precision")});P.a.createPredictionShort(a,r).then(function(e){e.error&&"wallet locked"!==e.error.message&&f.Notification.error({message:v.a.translate("notifications.exchange_unknown_error_place_order",{amount:buyAssetAmount,symbol:buyAsset.symbol})})})})}},{key:"_forceBuy",value:function(e,t,a,r){var n=this.state["sell"===e?"ask":"bid"];a=n.for_sale.clone(a?parseInt(m.ChainStore.getObject(a).get("balance"),10):0),r=new B.a({amount:r?parseInt(m.ChainStore.getObject(r).toJS().balance,10):0});var s=this._getFee(t),o=this._verifyFee(s,n.for_sale,a.getAmount(),r.getAmount());o?this._createLimitOrder(e,o):console.error("Unable to pay fees, aborting limit order creation")}},{key:"_forceSell",value:function(e,t,a,r){var n=this.state["sell"===e?"ask":"bid"];a=n.for_sale.clone(a?parseInt(m.ChainStore.getObject(a).get("balance"),10):0),r=new B.a({amount:r?parseInt(m.ChainStore.getObject(r).toJS().balance,10):0});var s=this._getFee(t),o=this._verifyFee(s,n.for_sale,a.getAmount(),r.getAmount());o?this._createLimitOrder(e,o):console.error("Unable to pay fees, aborting limit order creation")}},{key:"_cancelLimitOrder",value:function(e,t){t.preventDefault();var a=this.props.currentAccount;P.a.cancelLimitOrder(a.get("id"),e)}},{key:"_changeZoomPeriod",value:function(e,t){t.preventDefault(),e!==this.state.currentPeriod&&(this.setState({currentPeriod:e}),O.a.changeViewSetting({currentPeriod:e}))}},{key:"_onGroupOrderLimitChange",value:function(e){var t=this,a=void 0;if("object"==(void 0===e?"undefined":Wt(e))&&(e.preventDefault(),a=parseInt(e.target.value)),"number"==typeof e&&(a=parseInt(e)),P.a.changeCurrentGroupLimit(a),a!==this.props.currentGroupOrderLimit){P.a.changeCurrentGroupLimit(a);var r=this.props.sub.split("_");P.a.unSubscribeMarket(r[0],r[1]).then(function(){t.props.subToMarket(t.props,t.props.bucketSize,a)})}}},{key:"_depthChartClick",value:function(e,t,a){a.preventDefault();var r=this.state,n=r.bid,s=r.ask;n.price=new B.i({base:this.state.bid.for_sale,quote:this.state.bid.to_receive,real:a.xAxis[0].value}),n.priceText=n.price.toReal(),s.price=new B.i({base:this.state.ask.to_receive,quote:this.state.ask.for_sale,real:a.xAxis[0].value}),s.priceText=s.price.toReal();var o={bid:n,ask:s,depthLine:n.price.toReal()};this._setForSale(n,!0)||this._setReceive(n,!0),this._setReceive(s)||this._setForSale(s),this._setPriceText(n,!0),this._setPriceText(s,!1),this.setState(o)}},{key:"_setAutoscroll",value:function(e){this.setState({autoScroll:e})}},{key:"_togglePanel",value:function(e){if(e){var t=[];this.state.activePanels.forEach(function(a){a!==e&&t.push(a)}),this.state.activePanels.includes(e)||t.push(e),this.setState({activePanels:t}),O.a.changeViewSetting({activePanels:t})}}},{key:"_toggleChart",value:function(e){this.setState({chartType:e}),O.a.changeViewSetting({chartType:e})}},{key:"_toggleQuickChartType",value:function(){var e="market_depth"===this.state.chartType?"price_chart":"market_depth";this.setState({chartType:e}),O.a.changeViewSetting({chartType:e})}},{key:"_flipBuySell",value:function(){this.setState({flipBuySell:!this.state.flipBuySell}),O.a.changeViewSetting({flipBuySell:!this.state.flipBuySell})}},{key:"_toggleOpenBuySell",value:function(){O.a.changeViewSetting({buySellOpen:!this.state.buySellOpen}),this.setState({buySellOpen:!this.state.buySellOpen})}},{key:"_toggleMarketPicker",value:function(e){var t=!!e;t&&this.showMarketPickerModal(),this.setState({showMarketPicker:t,marketPickerAsset:e})}},{key:"_moveOrderBook",value:function(){this.state.verticalOrderForm&&this._moveOrderForm(),O.a.changeViewSetting({verticalOrderBook:!this.state.verticalOrderBook}),this.setState({verticalOrderBook:!this.state.verticalOrderBook})}},{key:"_moveOrderForm",value:function(){this.state.verticalOrderBook&&this._moveOrderBook(),O.a.changeViewSetting({verticalOrderForm:!this.state.verticalOrderForm}),this.setState({verticalOrderForm:!this.state.verticalOrderForm})}},{key:"_togglePersonalize",value:function(){this.state.isPersonalizeModalVisible?this.setState({isPersonalizeModalVisible:!this.state.isPersonalizeModalVisible}):this.setState({isPersonalizeModalVisible:!this.state.isPersonalizeModalVisible,isPersonalizeModalLoaded:!0})}},{key:"_toggleScrollbars",value:function(){O.a.changeViewSetting({hideScrollbars:!this.state.hideScrollbars}),this.setState({hideScrollbars:!this.state.hideScrollbars})}},{key:"_toggleSingleColumnOrderForm",value:function(){O.a.changeViewSetting({singleColumnOrderForm:!this.state.singleColumnOrderForm}),this.setState({singleColumnOrderForm:!this.state.singleColumnOrderForm})}},{key:"_mirrorPanels",value:function(){this.setState({mirrorPanels:!this.state.mirrorPanels}),O.a.changeViewSetting({mirrorPanels:!this.state.mirrorPanels})}},{key:"_currentPriceClick",value:function(e,t){var a="bid"===e,r=this.state[e];r.price=t[a?"invert":"clone"](),r.priceText=r.price.toReal(),a?this._setForSale(r,a)||this._setReceive(r,a):this._setReceive(r,a)||this._setForSale(r,a),this.forceUpdate()}},{key:"_orderbookClick",value:function(e){var t=e.isBid(),a=e.totalToReceive({noCache:!0}),r=a.times(e.sellPrice()),n=new B.i({base:t?r:a,quote:t?a:r}),s=this.state[t?"bid":"ask"];s.price=n,s.priceText=n.toReal();var o=Kt({},t?"ask":"bid",{for_sale:a,forSaleText:a.getAmount({real:!0}),to_receive:r,toReceiveText:r.getAmount({real:!0}),price:n,priceText:n.toReal()});t?this._setForSale(s,t)||this._setReceive(s,t):this._setReceive(s,t)||this._setForSale(s,t),this.setState(o)}},{key:"_borrowQuote",value:function(){this.showBorrowQuoteModal()}},{key:"_borrowBase",value:function(){this.showBorrowBaseModal()}},{key:"_onDeposit",value:function(e){this.setState({depositModalType:e}),this.showDepositModal()}},{key:"_onBuy",value:function(e){this.setState({buyModalType:e}),this.showDepositBridgeModal()}},{key:"_getSettlementInfo",value:function(){var e=this.props,t=e.lowestCallPrice,a=e.feedPrice,r=e.quoteAsset,n=!1;return a&&(n=a.inverted?t<=a.toReal():t>=a.toReal()),!(!n||!t||r.getIn(["bitasset","is_prediction_market"]))}},{key:"_setTabVerticalPanel",value:function(e){this.setState({tabVerticalPanel:e}),O.a.changeViewSetting({tabVerticalPanel:e})}},{key:"_setTabBuySell",value:function(e){this.setState({tabBuySell:e}),O.a.changeViewSetting({tabBuySell:e})}},{key:"_setPanelTabInGroup",value:function(e,t){var a=this.state.panelTabsActive;Object.keys(a).map(function(r){r==e&&(a[r]=t)}),this.setState({panelTabsActive:a,forceReRender:!0}),O.a.changeViewSetting({panelTabsActive:a})}},{key:"_setPanelTabs",value:function(e,t){var a=this.state,r=a.panelTabs,n=a.panelTabsActive,s={panelTabs:r,panelTabsActive:n};Object.keys(r).map(function(a){s.panelTabs[a]=a==e?t:r[a]}),Object.keys(n).map(function(e){s.panelTabsActive[e]=""}),this.setState({newState:s}),O.a.changeViewSetting({newState:s})}},{key:"onChangeFeeAsset",value:function(e,t){"buy"===e?(this.setState({buyFeeAssetIdx:t}),O.a.changeViewSetting({buyFeeAssetIdx:t})):(this.setState({sellFeeAssetIdx:t}),O.a.changeViewSetting({sellFeeAssetIdx:t}))}},{key:"onChangeChartHeight",value:function(e){var t=e.value,a=e.increase,r=t||this.state.chartHeight+(a?20:-20);this.setState({chartHeight:r}),O.a.changeViewSetting({chartHeight:r})}},{key:"_toggleBuySellPosition",value:function(){this.setState({buySellTop:!this.state.buySellTop}),O.a.changeViewSetting({buySellTop:!this.state.buySellTop})}},{key:"_setReceive",value:function(e,t){return!(!e.price.isValid()||!e.for_sale.hasAmount())&&(e.to_receive=e.for_sale.times(e.price),e.toReceiveText=e.to_receive.getAmount({real:!0}).toString(),!0)}},{key:"_setForSale",value:function(e,t){return!(!e.price.isValid()||!e.to_receive.hasAmount())&&(e.for_sale=e.to_receive.times(e.price,!0),e.forSaleText=e.for_sale.getAmount({real:!0}).toString(),!0)}},{key:"_setPrice",value:function(e){return!(!e.for_sale.hasAmount()||!e.to_receive.hasAmount())&&(e.price=new B.i({base:e.for_sale,quote:e.to_receive}),e.priceText=e.price.toReal().toString(),!0)}},{key:"_setPriceText",value:function(e,t){var a=e[t?"for_sale":"to_receive"],r=e[t?"to_receive":"for_sale"];a.hasAmount()&&r.hasAmount()&&(e.priceText=new B.i({base:a,quote:r}).toReal().toString())}},{key:"_onInputPrice",value:function(e,t){var a=this.state[e],r="bid"===e;a.price=new B.i({base:a[r?"for_sale":"to_receive"],quote:a[r?"to_receive":"for_sale"],real:parseFloat(t.target.value)||0}),r?this._setForSale(a,r)||this._setReceive(a,r):this._setReceive(a,r)||this._setForSale(a,r),a.priceText=t.target.value,this.forceUpdate()}},{key:"_onInputSell",value:function(e,t,a){var r=this.state[e];r.for_sale.setAmount({real:parseFloat(a.target.value)||0}),r.price.isValid()?this._setReceive(r,t):this._setPrice(r),r.forSaleText=a.target.value,this._setPriceText(r,"bid"===e),this.forceUpdate()}},{key:"_onInputReceive",value:function(e,t,a){var r=this.state[e];r.to_receive.setAmount({real:parseFloat(a.target.value)||0}),r.price.isValid()?this._setForSale(r,t):this._setPrice(r),r.toReceiveText=a.target.value,this._setPriceText(r,"bid"===e),this.forceUpdate()}},{key:"isMarketFrozen",value:function(){var e=this.props,t=e.baseAsset,a=e.quoteAsset,r=t.getIn(["options","whitelist_markets"]).toJS(),n=a.getIn(["options","whitelist_markets"]).toJS(),s=t.getIn(["options","blacklist_markets"]).toJS(),o=a.getIn(["options","blacklist_markets"]).toJS();return n.length&&-1===n.indexOf(t.get("id"))?{isFrozen:!0,frozenAsset:a.get("symbol")}:r.length&&-1===r.indexOf(a.get("id"))?{isFrozen:!0,frozenAsset:t.get("symbol")}:o.length&&-1!==o.indexOf(t.get("id"))?{isFrozen:!0,frozenAsset:a.get("symbol")}:s.length&&-1!==s.indexOf(a.get("id"))?{isFrozen:!0,frozenAsset:t.get("symbol")}:{isFrozen:!1}}},{key:"_toggleMiniChart",value:function(){O.a.changeViewSetting({miniDepthChart:!this.props.miniDepthChart})}},{key:"_onChangeMobilePanel",value:function(e){this.setState({mobileKey:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentAccount,r=t.marketLimitOrders,s=t.marketCallOrders,o=t.marketData,i=t.activeMarketHistory,l=t.invertedCalls,c=t.starredMarkets,u=t.quoteAsset,p=t.baseAsset,h=t.lowestCallPrice,d=t.marketStats,m=t.marketReady,g=t.marketSettleOrders,y=t.bucketSize,_=t.totals,k=t.feedPrice,E=t.buckets,w=t.coreAsset,S=t.trackedGroupsConfig,C=t.currentGroupOrderLimit,A=o.combinedBids,x=o.combinedAsks,O=o.lowestAsk,P=o.highestBid,N=o.flatBids,B=o.flatAsks,M=o.flatCalls,F=o.flatSettles,j=o.groupedBids,q=o.groupedAsks,R=this.state,L=R.bid,D=R.ask,V=R.verticalOrderBook,z=R.verticalOrderForm,H=R.chartHeight,W=R.chartType,U=R.flipBuySell,G=R.buyDiff,Q=R.sellDiff,K=R.width,J=R.buySellTop,Y=R.tabBuySell,X=R.tabVerticalPanel,$=R.hidePanel,ee=R.hideScrollbars,te=R.buyModalType,ae=R.depositModalType,re=R.autoScroll,ne=R.activePanels,se=(R.panelWidth,R.mirrorPanels),oe=R.panelTabsActive,ie=R.panelTabs,le=R.singleColumnOrderForm,ce=R.flipOrderBook,he=R.orderBookReversed,de=R.chartZoom,me=R.chartTools,fe=R.hideFunctionButtons,ge=this.isMarketFrozen(),be=ge.isFrozen,ye=(ge.frozenAsset,K);this.refs.center&&(ye=this.refs.center.clientWidth);var ve=null,_e=null,ke=null,Ee=null,we=null,Se=null,Ae=void 0,xe=void 0,Oe=!1,Pe=void 0,Te=void 0,Ne=this.props.viewSettings.get("showVolumeChart",!0);if(ee=!!Ze||ee,u.size&&p.size&&a.size){if(_e=u,xe=(ve=p).get("symbol"),Ae=_e.get("symbol"),ke=a.get("balances").toJS())for(var Be in ke)Be===_e.get("id")&&(Ee=ke[Be]),Be===ve.get("id")&&(we=ke[Be]),"1.3.0"===Be&&(Se=ke[Be]);Oe=this._getSettlementInfo()}var Me=!!u.get("bitasset_data_id"),Fe=!!p.get("bitasset_data_id"),je=O&&P?O.getPrice()-P.getPrice():0;if(i.size){var qe=i.take(2);Pe=qe.first();var Ie=qe.last();Te=Pe.getPrice()===Ie.getPrice()?"":Pe.getPrice()-Ie.getPrice()>0?"change-up":"change-down"}if(!w||!Object.keys(this.state.feeStatus).length)return null;var Re=this._getFeeAssets(_e,ve,w),Le=Re.sellFeeAsset,ze=Re.sellFeeAssets,He=Re.sellFee,We=Re.buyFeeAsset,Ue=Re.buyFeeAssets,Ge=Re.buyFee,Qe=ve.getIn(["bitasset","is_prediction_market"])||_e.getIn(["bitasset","is_prediction_market"]),Ke=null;Qe&&(Ke=u.getIn(["options","description"]),Ke=T.a.parseDescription(Ke).main);var Je=K<850,Ze=K<640,Ye=Math.max(this.state.height>1100?H:H-125,300),$e=this.state.expirationType,tt=this.state.expirationCustomTime,rt=ne.length>=1,nt=ve.getIn(["bitasset","is_prediction_market"]),st=0,ot=be?null:Ze&&!this.state.mobileKey.includes("buySellTab")?null:n.a.createElement(Z,{key:"actionCard_"+st++,onBorrow:null,onBuy:this._onBuy.bind(this,"bid"),onDeposit:this._onDeposit.bind(this,"bid"),currentAccount:a,backedCoin:null,currentBridges:null,isOpen:this.state.buySellOpen,onToggleOpen:this._toggleOpenBuySell.bind(this),parentWidth:ye,styles:{padding:5,paddingRight:se?15:5},className:b()(z&&!Je?"":ye>1200?"medium-6 large-6 xlarge-4":ye>800?"medium-6":"","small-12 no-padding middle-content",U?"order-"+(J?2:3)+" large-order-"+(J?2:5)+" sell-form":"order-"+(J?1:2)+" large-order-"+(J?1:4)+" buy-form"),type:"bid",hideHeader:!!(Ze||!Je&&z),expirationType:$e.bid,expirations:this.EXPIRATIONS,expirationCustomTime:tt.bid,onExpirationTypeChange:this._handleExpirationChange.bind(this,"bid"),onExpirationCustomChange:this._handleCustomExpirationChange.bind(this,"bid"),amount:L.toReceiveText,price:L.priceText,total:L.forSaleText,quote:_e,base:ve,amountChange:this._onInputReceive.bind(this,"bid",!0),priceChange:this._onInputPrice.bind(this,"bid"),setPrice:this._currentPriceClick.bind(this),totalChange:this._onInputSell.bind(this,"bid",!1),clearForm:this._clearForms.bind(this,"bid"),balance:we,balanceId:ve.get("id"),onSubmit:this._createLimitOrderConfirm.bind(this,_e,ve,we,Se,We,"buy"),balancePrecision:ve.get("precision"),quotePrecision:_e.get("precision"),totalPrecision:ve.get("precision"),currentPrice:O.getPrice(),currentPriceObject:O,account:a.get("name"),fee:Ge,hasFeeBalance:this.state.feeStatus[Ge.asset_id].hasBalance,feeAssets:Ue,feeAsset:We,onChangeFeeAsset:this.onChangeFeeAsset.bind(this,"buy"),isPredictionMarket:ve.getIn(["bitasset","is_prediction_market"]),onFlip:U?null:this._flipBuySell.bind(this),onTogglePosition:this.state.buySellTop&&!V?this._toggleBuySellPosition.bind(this):null,moveOrderForm:Je||U&&!z?null:this._moveOrderForm.bind(this),verticalOrderForm:!Je&&z,isPanelActive:rt,activePanels:ne,singleColumnOrderForm:le,hideFunctionButtons:fe}),it=be?null:Ze&&!this.state.mobileKey.includes("buySellTab")?null:n.a.createElement(Z,{key:"actionCard_"+st++,onBorrow:null,onBuy:this._onBuy.bind(this,"ask"),onDeposit:this._onDeposit.bind(this,"ask"),currentAccount:a,backedCoin:null,currentBridges:null,isOpen:this.state.buySellOpen,onToggleOpen:this._toggleOpenBuySell.bind(this),parentWidth:ye,styles:{padding:5,paddingRight:se?15:5},className:b()(z&&!Je?"":ye>1200?"medium-6 large-6 xlarge-4":ye>800?"medium-6":"","small-12 no-padding middle-content",U?"order-"+(J?1:2)+" large-order-"+(J?1:4)+" buy-form":"order-"+(J?2:3)+" large-order-"+(J?2:5)+" sell-form"),type:"ask",hideHeader:!!(Ze||!Je&&z),amount:D.forSaleText,price:D.priceText,total:D.toReceiveText,quote:_e,base:ve,expirationType:$e.ask,expirations:this.EXPIRATIONS,expirationCustomTime:tt.ask,onExpirationTypeChange:this._handleExpirationChange.bind(this,"ask"),onExpirationCustomChange:this._handleCustomExpirationChange.bind(this,"ask"),amountChange:this._onInputSell.bind(this,"ask",!1),priceChange:this._onInputPrice.bind(this,"ask"),setPrice:this._currentPriceClick.bind(this),totalChange:this._onInputReceive.bind(this,"ask",!0),clearForm:this._clearForms.bind(this,"ask"),balance:Ee,balanceId:_e.get("id"),onSubmit:this._createLimitOrderConfirm.bind(this,ve,_e,Ee,Se,Le,"sell"),balancePrecision:_e.get("precision"),quotePrecision:_e.get("precision"),totalPrecision:ve.get("precision"),currentPrice:P.getPrice(),currentPriceObject:P,account:a.get("name"),fee:He,hasFeeBalance:this.state.feeStatus[He.asset_id].hasBalance,feeAssets:ze,feeAsset:Le,onChangeFeeAsset:this.onChangeFeeAsset.bind(this,"sell"),isPredictionMarket:_e.getIn(["bitasset","is_prediction_market"]),onFlip:U?this._flipBuySell.bind(this):null,onTogglePosition:this.state.buySellTop&&!V?this._toggleBuySellPosition.bind(this):null,moveOrderForm:Je||!U&&!z?null:this._moveOrderForm.bind(this),verticalOrderForm:!Je&&z,isPanelActive:rt,activePanels:ne,singleColumnOrderForm:le,hideFunctionButtons:fe}),lt=Ze&&!this.state.mobileKey.includes("myMarkets")?null:n.a.createElement(Ve.a,{key:"actionCard_"+st++,className:"left-order-book no-overflow order-9",style:{minWidth:350,height:Je?680:"calc(100vh - 215px)",padding:Je?10:0},headerStyle:{width:"100%",display:Je?"":"display: none"},noHeader:!0,listHeight:this.state.height-450,columns:[{name:"star",index:1},{name:"market",index:2},{name:"vol",index:3},{name:"price",index:4},{name:"change",index:5}],findColumns:[{name:"market",index:1},{name:"issuer",index:2},{name:"vol",index:3},{name:"add",index:4}],current:Ae+"_"+xe,location:this.props.location,history:this.props.history,activeTab:X||"my-market"}),ct=Ze&&!this.state.mobileKey.includes("orderBook")?null:n.a.createElement(Ce,{ref:"order_book",key:"actionCard_"+st++,latest:Pe&&Pe.getPrice(),changeClass:Te,orders:r,calls:s,invertedCalls:l,combinedBids:A,combinedAsks:x,highestBid:P,lowestAsk:O,totalBids:_.bid,totalAsks:_.ask,base:ve,quote:_e,baseSymbol:xe,quoteSymbol:Ae,onClick:this._orderbookClick.bind(this),horizontal:!(V&&!Je),flipOrderBook:ce,orderBookReversed:he,marketReady:m,wrapperClass:b()(ye>1200?"xlarge-8":"","medium-12 large-12","small-12 grid-block orderbook no-padding align-spaced no-overflow wrap shrink","order-"+(J?3:1)+" xlarge-order-"+(J?4:1)),innerClass:b()(ye>1200?"medium-6":ye>800?"medium-6 large-6":"","small-12 middle-content",Ze?"":"exchange-padded"),currentAccount:this.props.currentAccount.get("id"),handleGroupOrderLimitChange:this._onGroupOrderLimitChange.bind(this),trackedGroupsConfig:S,currentGroupOrderLimit:C,groupedBids:j,groupedAsks:q,isPanelActive:ne.length>=1,onTogglePosition:this.state.buySellTop?null:this._toggleBuySellPosition.bind(this),moveOrderBook:Je?null:this._moveOrderBook.bind(this),smallScreen:Je,hideScrollbars:ee,autoScroll:re,onFlipOrderBook:this._flipOrderBook.bind(this),hideFunctionButtons:fe});var ut=Ze&&!this.state.mobileKey.includes("marketHistory")?null:n.a.createElement(De,{key:"actionCard_"+st++,className:b()(0==ie.history?ye>1200?"medium-6 large-6 xlarge-4":ye>800?"medium-6":"":"medium-12","no-padding no-overflow middle-content small-12 order-6"),innerClass:Ze?"":"exchange-padded",innerStyle:{paddingBottom:Ze?"0":"1.2rem"},noHeader:0!=ie.history,history:i,currentAccount:a,myHistory:a.get("history"),base:ve,quote:_e,baseSymbol:xe,quoteSymbol:Ae,activeTab:"history",tinyScreen:Ze,isPanelActive:rt,hideScrollbars:ee}),pt=Ze&&!this.state.mobileKey.includes("myMarketHistory")?null:n.a.createElement(De,{key:"actionCard_"+st++,className:b()(0==ie.my_history?ye>1200?"medium-6 large-6 xlarge-4":ye>800?"medium-6":"":"medium-12","no-padding no-overflow middle-content small-12",V||z?"order-4":"order-3"),innerClass:Ze?"":"exchange-padded",innerStyle:{paddingBottom:Ze?"0":"1.2rem"},noHeader:0!=ie.my_history,history:i,currentAccount:a,myHistory:a.get("history"),base:ve,quote:_e,baseSymbol:xe,quoteSymbol:Ae,activeTab:"my_history",tinyScreen:Ze,isPanelActive:rt,hideScrollbars:ee}),ht=Ze&&!this.state.mobileKey.includes("myOpenOrders")?null:n.a.createElement(pe.a,{key:"actionCard_"+st++,style:{marginBottom:Ze?0:15},className:b()(0==ie.my_orders?ye>1200?"medium-6 large-6 xlarge-4":ye>800?"medium-6":"":"medium-12","no-padding no-overflow middle-content small-12 order-7"),innerClass:Ze?"":"exchange-padded",innerStyle:{paddingBottom:Ze?"0":"1.2rem"},noHeader:0!=ie.my_orders,orders:r,settleOrders:g,currentAccount:a,base:ve,quote:_e,baseSymbol:xe,quoteSymbol:Ae,activeTab:"my_orders",onCancel:this._cancelLimitOrder.bind(this),flipMyOrders:this.props.viewSettings.get("flipMyOrders"),feedPrice:this.props.feedPrice,smallScreen:Je,tinyScreen:Ze,hidePanel:$,isPanelActive:rt,hideScrollbars:ee}),dt=0===g.size||Ze&&!this.state.mobileKey.includes("settlementOrders")?null:n.a.createElement(pe.a,{key:"actionCard_"+st++,style:{marginBottom:Ze?0:15},className:b()(0==ie.open_settlement?ye>1200?"medium-6 large-6 xlarge-4":ye>800?"medium-6":"":"medium-12","no-padding no-overflow middle-content small-12 order-8"),innerClass:Ze?"":"exchange-padded",innerStyle:{paddingBottom:Ze?"0":"1.2rem"},noHeader:0!=ie.open_settlement,orders:r,settleOrders:g,currentAccount:a,base:ve,quote:_e,baseSymbol:xe,quoteSymbol:Ae,activeTab:"open_settlement",onCancel:this._cancelLimitOrder.bind(this),flipMyOrders:this.props.viewSettings.get("flipMyOrders"),feedPrice:this.props.feedPrice,smallScreen:Je,tinyScreen:Ze,hidePanel:$,isPanelActive:rt,hideScrollbars:ee}),mt=!Ze&&"price_chart"!=W||Ze&&!this.state.mobileKey.includes("tradingViewChart")?null:n.a.createElement(ft,{locale:this.props.locale,dataFeed:this.props.dataFeed,baseSymbol:xe,quoteSymbol:Ae,marketReady:m,theme:this.props.settings.get("themes"),buckets:E,bucketSize:y,currentPeriod:this.state.currentPeriod,chartHeight:Ye,chartZoom:!Ze&&de,chartTools:!Ze&&me,mobile:Ze}),gt=!Ze&&"market_depth"!=W||Ze&&!this.state.mobileKey.includes("deptHighChart")?null:n.a.createElement(kt,{marketReady:m,orders:r,showCallLimit:Oe,call_orders:s,flat_asks:B,flat_bids:N,flat_calls:Oe?M:[],flat_settles:this.props.settings.get("showSettles")&&F,settles:g,invertedCalls:l,totalBids:_.bid,totalAsks:_.ask,base:ve,quote:_e,height:Ye,isPanelActive:rt,onClick:this._depthChartClick.bind(this,ve,_e),feedPrice:!Qe&&k&&k.toReal(),spread:je,LCP:Oe?h:null,hasPrediction:Qe,noFrame:!1,theme:this.props.settings.get("themes"),centerRef:this.refs.center,activePanels:ne}),bt=n.a.createElement("div",{className:"exchange--chart-control",style:{height:33,right:"13rem",top:"1px",position:"absolute",zIndex:1,padding:"0.2rem"}},"price_chart"==W&&n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.chart_tools")},n.a.createElement(f.Icon,{style:{cursor:"pointer",fontSize:"1.4rem",marginRight:"0.6rem"},onClick:this._chartTools.bind(this),type:"tool"})),n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.increase_chart_height")},n.a.createElement(f.Icon,{style:{cursor:"pointer",fontSize:"1.4rem",marginRight:"0.6rem"},onClick:function(){e.onChangeChartHeight({increase:!0})},type:"up"})),n.a.createElement(f.Tooltip,{title:v.a.translate("exchange.settings.tooltip.decrease_chart_height")},n.a.createElement(f.Icon,{style:{cursor:"pointer",fontSize:"1.4rem",marginRight:"0.6rem"},onClick:function(){e.onChangeChartHeight({increase:!1})},type:"down"})),n.a.createElement(f.Tooltip,{title:"market_depth"==W?v.a.translate("exchange.settings.tooltip.show_price_chart"):v.a.translate("exchange.settings.tooltip.show_market_depth")},n.a.createElement(f.Icon,{style:{cursor:"pointer",fontSize:"1.4rem"},onClick:function(){"market_depth"==W?e._toggleChart("price_chart"):e._toggleChart("market_depth")},type:"market_depth"==W?"bar-chart":"area-chart"}))),yt=n.a.createElement("div",{key:"actionCard_"+st++,className:"left-order-book small-12",style:{paddingLeft:5,width:Je?"auto":300}},n.a.createElement(f.Tabs,{defaultActiveKey:"buy",activeKey:Y,onChange:this._setTabBuySell.bind(this),style:{padding:"0px !important",margin:"0px !important"}},n.a.createElement(f.Tabs.TabPane,{tab:n.a.createElement(I.a,{string:"exchange.buysell_formatter",noLink:!0,noTip:!1,keys:[{type:"asset",value:_e.get("symbol"),arg:"asset"},{type:"translate",value:nt?"exchange.short":"exchange.buy",arg:"direction"}]}),key:"buy"},ot),n.a.createElement(f.Tabs.TabPane,{tab:n.a.createElement(I.a,{string:"exchange.buysell_formatter",noLink:!0,noTip:!1,keys:[{type:"asset",value:_e.get("symbol"),arg:"asset"},{type:"translate",value:nt?"exchange.short":"exchange.sell",arg:"direction"}]}),key:"sell"},it))),vt={1:[],2:[]},_t=[];Object.keys(ie).map(function(e){0==ie[e]?("my_history"==e&&_t.push(pt),"history"==e&&_t.push(ut),"my_orders"==e&&_t.push(ht),"open_settlement"==e&&null!==dt&&_t.push(dt)):("my_history"==e&&vt[ie[e]].push(n.a.createElement(f.Tabs.TabPane,{tab:v.a.translate("exchange.my_history"),key:"my_history"},pt)),"history"==e&&vt[ie[e]].push(n.a.createElement(f.Tabs.TabPane,{tab:v.a.translate("exchange.history"),key:"history"},ut)),"my_orders"==e&&vt[ie[e]].push(n.a.createElement(f.Tabs.TabPane,{tab:v.a.translate("exchange.my_orders"),key:"my_orders"},ht)),"open_settlement"==e&&null!==dt&&vt[ie[e]].push(n.a.createElement(f.Tabs.TabPane,{tab:v.a.translate("exchange.settle_orders"),key:"open_settlement"},dt)))}),Object.keys(oe).map(function(e){Object.keys(ie).map(function(t){var a=!1;a||e!=ie[t]||(oe[e]=oe[e]?oe[e]:ie.my_history===ie.history&&ie.history===parseInt(e)?"history":t,a=!0)})});var St=_t.length;Object.keys(vt).map(function(e){vt[e].length&&St++});var Ct=vt[1].length>0?n.a.createElement("div",{key:"actionCard_"+st++,className:b()(ye>1200?1==St?"medium-12 xlarge-4":"medium-6 xlarge-4 ":ye>800?1==St?"medium-12":"medium-6":"","small-12 order-5",V?"xlarge-order-5":"",V||z?"":"xlarge-order-2"),style:{paddingRight:5}},n.a.createElement(f.Tabs,{activeKey:oe[1],onChange:this._setPanelTabInGroup.bind(this,1)},vt[1])):null,At=vt[2].length>0?n.a.createElement("div",{key:"actionCard_"+st++,className:b()(ye>1200?1==St?"medium-12 xlarge-4":"medium-6 xlarge-4 ":ye>800?1==St?"medium-12":"medium-6":"","small-12 order-6"),style:{paddingRight:5}},n.a.createElement(f.Tabs,{activeKey:oe[2],onChange:this._setPanelTabInGroup.bind(this,2)},vt[2])):null,xt=St>2?null:n.a.createElement("div",{className:b()(ye>1200&&(V||V)?"xlarge-order-6 xlarge-8 order-9":"","small-12 grid-block orderbook no-padding align-spaced no-overflow wrap"),key:"actionCard_"+st++},"Â "),Ot=[];Je?Ze?Ot=n.a.createElement(f.Collapse,{activeKey:this.state.mobileKey,onChange:this._onChangeMobilePanel.bind(this),style:{paddingRight:8}},n.a.createElement(f.Collapse.Panel,{header:v.a.translate("exchange.price_history"),key:"tradingViewChart"},mt),n.a.createElement(f.Collapse.Panel,{header:v.a.translate("exchange.order_depth"),key:"deptHighChart"},gt),n.a.createElement(f.Collapse.Panel,{header:v.a.translate("exchange.buy_sell"),key:"buySellTab"},yt),n.a.createElement(f.Collapse.Panel,{header:v.a.translate("exchange.order_book"),key:"orderBook"},ct),n.a.createElement(f.Collapse.Panel,{header:v.a.translate("exchange.history"),key:"marketHistory"},ut),null!==dt?n.a.createElement(f.Collapse.Panel,{header:v.a.translate("exchange.settle_orders"),key:"settlementOrders"},dt):null,n.a.createElement(f.Collapse.Panel,{header:v.a.translate("exchange.my_history"),key:"myMarketHistory"},pt),n.a.createElement(f.Collapse.Panel,{header:v.a.translate("exchange.my_orders"),key:"myOpenOrders"},ht),n.a.createElement(f.Collapse.Panel,{header:v.a.translate("exchange.market_name"),key:"myMarkets"},n.a.createElement(f.Tabs,{defaultActiveKey:"my-market",activeKey:X,onChange:this._setTabVerticalPanel.bind(this)},n.a.createElement(f.Tabs.TabPane,{tab:v.a.translate("exchange.market_name"),key:"my-market"})),lt)):(Ot.push(ot),Ot.push(it),Ot.push(ct),Ot.push(_t),Ot.push(Ct),Ot.push(At),Ot.push(n.a.createElement("div",{className:"order-10 small-12",key:"actionCard_"+st++},n.a.createElement(f.Tabs,{defaultActiveKey:"my-market",activeKey:X,onChange:this._setTabVerticalPanel.bind(this)},n.a.createElement(f.Tabs.TabPane,{tab:v.a.translate("exchange.market_name"),key:"my-market"})),lt))):(z||(Ot.push(ot),Ot.push(it)),V||Ot.push(ct),(V||z)&&Ot.push(xt),Ot.push(_t),Ot.push(Ct),Ot.push(At));var Pt=null,Tt=null,Nt=null,Bt=null,Mt=!1,Ft=!1;return Je||(V&&(Pt=n.a.createElement("div",{className:"left-order-book no-padding no-overflow",style:{display:"block",height:"calc(100vh - 170px)",width:350}},ct)),z&&(Pt=n.a.createElement("div",{className:"left-order-book no-padding no-overflow",style:{display:"block",height:"calc(100vh - 170px)",width:300}},yt)),Tt=n.a.createElement("div",{className:"left-order-book no-padding no-overflow",style:{display:"block"},key:"actionCard_"+st++},n.a.createElement("div",{className:"v-align no-padding align-center grid-block footer shrink column","data-intro":v.a.translate("walkthrough.my_markets")},n.a.createElement(f.Tabs,{defaultActiveKey:"my-market",activeKey:X,onChange:this._setTabVerticalPanel.bind(this)},n.a.createElement(f.Tabs.TabPane,{tab:v.a.translate("exchange.market_name"),key:"my-market"}))),lt),(!se&&Pt||se&&Tt)&&(Mt=!0),(!se&&Tt||se&&Pt)&&(Ft=!0),Nt=n.a.createElement("div",{className:"grid-block left-column shrink no-overflow"},ne.includes("left")?se?Tt:Pt:null,Mt?n.a.createElement("div",{style:{width:"auto",paddingTop:"calc(50vh - 80px)"},onClick:this._togglePanel.bind(this,"left")},n.a.createElement(f.Icon,{"data-intro":v.a.translate("walkthrough.panel_hide"),type:ne.includes("left")?"caret-left":"caret-right"})):null),Bt=n.a.createElement("div",{className:"grid-block left-column shrink no-overflow"},Ft?n.a.createElement("div",{style:{width:"auto",paddingTop:"calc(50vh - 80px)"},onClick:this._togglePanel.bind(this,"right")},n.a.createElement(f.Icon,{"data-intro":v.a.translate("walkthrough.panel_hide"),type:ne.includes("right")?"caret-right":"caret-left"})):null,ne.includes("right")?se?Pt:Tt:null)),n.a.createElement("div",{className:"grid-block vertical"},this.props.marketReady?null:n.a.createElement(Et.a,null),n.a.createElement(ue,{hasAnyPriceAlert:this.props.hasAnyPriceAlert,showPriceAlertModal:this.showPriceAlertModal,account:this.props.currentAccount,quoteAsset:u,baseAsset:p,hasPrediction:Qe,starredMarkets:c,lowestAsk:O,highestBid:P,lowestCallPrice:h,showCallLimit:Oe,feedPrice:k,marketReady:m,latestPrice:Pe&&Pe.getPrice(),marketStats:d,selectedMarketPickerAsset:this.state.marketPickerAsset,onToggleMarketPicker:this._toggleMarketPicker.bind(this),onTogglePersonalize:this._togglePersonalize.bind(this),showVolumeChart:Ne,onToggleQuickChartType:this._toggleQuickChartType.bind(this),chartType:W,tinyScreen:Ze}),n.a.createElement("div",{className:"grid-block page-layout market-layout"},this.state.isMarketPickerModalVisible||this.state.isMarketPickerModalLoaded?n.a.createElement(Xe,Gt({visible:this.state.isMarketPickerModalVisible,showModal:this.showMarketPickerModal,hideModal:this.hideMarketPickerModal,marketPickerAsset:this.state.marketPickerAsset,onToggleMarketPicker:this._toggleMarketPicker.bind(this)},this.props)):null,this.state.isPersonalizeModalVisible||this.state.isPersonalizeModalLoaded?n.a.createElement(at,{visible:this.state.isPersonalizeModalVisible,showModal:this.showPersonalizeModal,hideModal:this.hidePersonalizeModal,viewSettings:this.props.viewSettings,chartType:W,chartHeight:H,onTogglePersonalize:this._togglePersonalize.bind(this),onChangeChartHeight:this.onChangeChartHeight.bind(this),handleGroupOrderLimitChange:this._onGroupOrderLimitChange.bind(this),trackedGroupsConfig:S,currentGroupOrderLimit:C,verticalOrderBook:V,hideScrollbars:ee,mirrorPanels:se,panelTabs:ie,singleColumnOrderForm:le,buySellTop:J,flipBuySell:U,flipOrderBook:ce,tinyScreen:Ze,smallScreen:Je,orderBookReversed:he,chartZoom:de,chartTools:me,hideFunctionButtons:fe,onMoveOrderBook:this._moveOrderBook.bind(this),onMirrorPanels:this._mirrorPanels.bind(this),onToggleScrollbars:this._toggleScrollbars.bind(this),onSetAutoscroll:this._setAutoscroll.bind(this),onToggleChart:this._toggleChart.bind(this),onSetPanelTabs:this._setPanelTabs.bind(this),onToggleSingleColumnOrderForm:this._toggleSingleColumnOrderForm.bind(this),onToggleBuySellPosition:this._toggleBuySellPosition.bind(this),onFlipBuySell:this._flipBuySell.bind(this),onFlipOrderBook:this._flipOrderBook.bind(this),onOrderBookReversed:this._orderBookReversed.bind(this),onChartZoom:this._chartZoom.bind(this),onChartTools:this._chartTools.bind(this),onHideFunctionButtons:this._hideFunctionButtons.bind(this)}):null,n.a.createElement(jt,null),Nt,n.a.createElement("div",{style:{paddingTop:0},className:b()("grid-block main-content vertical no-overflow")},n.a.createElement("div",{className:"grid-block vertical no-padding ps-container",id:"CenterContent",ref:"center","data-intro":Ze?v.a.translate("walkthrough.collapsed_items"):null},Ze?null:n.a.createElement("div",null,bt,W&&"price_chart"==W?n.a.createElement("div",{className:"grid-block shrink no-overflow",id:"market-charts"},mt):null,W&&"market_depth"==W?n.a.createElement("div",{className:"grid-block vertical no-padding shrink"},gt):null),n.a.createElement("div",{className:"grid-block no-overflow wrap shrink"},Ot))),Bt),Me&&(this.state.isBorrowQuoteModalVisible||this.state.isBorrowQuoteModalLoaded)?n.a.createElement(wt.a,{visible:this.state.isBorrowQuoteModalVisible,hideModal:this.hideBorrowQuoteModal,quote_asset:u.get("id"),backing_asset:u.getIn(["bitasset","options","short_backing_asset"]),account:a}):null,Fe&&(this.state.isBorrowBaseModalVisible||this.state.isBorrowBaseModalLoaded)?n.a.createElement(wt.a,{visible:this.state.isBorrowBaseModalVisible,hideModal:this.hideBorrowBaseModal,quote_asset:p.get("id"),backing_asset:p.getIn(["bitasset","options","short_backing_asset"]),account:a}):null,this.state.isDepositModalVisible||this.state.isDepositModalLoaded?n.a.createElement(qt.a,Gt({visible:this.state.isDepositModalVisible,hideModal:this.hideDepositModal,ref:"deposit_modal",action:"deposit",fiatModal:!1,account:a.get("name"),sender:a.get("id"),asset:"bid"===ae?ve.get("id"):_e.get("id"),modalId:"simple_deposit_modal"+("bid"===ae?"":"_ask"),balance:"bid"===ae?we:Ee},this.props.backedCoins.find(function(e){return e.symbol===("bid"===ae?ve.get("symbol"):_e.get("symbol"))}))):null,this.state.isDepositBridgeModalVisible||this.state.isDepositBridgeModalLoaded?n.a.createElement(It.a,{visible:this.state.isDepositBridgeModalVisible,hideModal:this.hideDepositBridgeModal,ref:"bridge_modal",action:"deposit",account:a.get("name"),sender:a.get("id"),asset:"bid"===te?ve.get("id"):_e.get("id"),modalId:"simple_bridge_modal"+("bid"===te?"":"_ask"),balances:["bid"===te?we:Ee],bridges:this.props.bridgeCoins.get("bid"===te?ve.get("symbol"):_e.get("symbol"))||null}):null,this.state.isConfirmBuyOrderModalVisible||this.state.isConfirmBuyOrderModalLoaded?n.a.createElement(et,{visible:this.state.isConfirmBuyOrderModalVisible,hideModal:this.hideConfirmBuyOrderModal,type:"buy",onForce:this._forceBuy.bind(this,"buy",We,we,Se),diff:G,hasOrders:x.length>0}):null,this.state.isConfirmSellOrderModalVisible||this.state.isConfirmSellOrderModalLoaded?n.a.createElement(et,{visible:this.state.isConfirmSellOrderModalVisible,hideModal:this.hideConfirmSellOrderModal,type:"sell",onForce:this._forceSell.bind(this,"sell",Le,Ee,Se),diff:Q,hasOrders:A.length>0}):null,n.a.createElement(Ht,{onSave:this.handlePriceAlertSave,rules:this.getPriceAlertRules(),latestPrice:Pe&&Pe.getPrice(),quoteAsset:this.props.quoteAsset.get("id"),baseAsset:this.props.baseAsset.get("id"),visible:this.state.isPriceAlertModalVisible,showModal:this.showPriceAlertModal,hideModal:this.hidePriceAlertModal}))}}]),t}();Zt.propTypes={marketCallOrders:x.a.object.isRequired,activeMarketHistory:x.a.object.isRequired,viewSettings:x.a.object.isRequired},Zt.defaultProps={marketCallOrders:[],activeMarketHistory:{},viewSettings:{}};var Yt=Zt,Xt=a(577),$t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ea=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function ta(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ra(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var na=function(e){function t(){return ta(this,t),aa(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ra(t,n.a.Component),ea(t,[{key:"render",value:function(){var e=this.props.match.params.marketID.toUpperCase().split("_");return e[0]===e[1]?n.a.createElement(Xt.a,{subtitle:"market_not_found_subtitle"}):n.a.createElement(p.a,{stores:[s.a,o.a,i.a,u.a,c.a],inject:{hasAnyPriceAlert:function(){return i.a.hasAnyPriceAlert(e[0],e[1])},priceAlert:function(){return i.a.getState().priceAlert},locale:function(){return c.a.getState().currentLocale},lockedWalletState:function(){return u.a.getState().locked},marketLimitOrders:function(){return s.a.getState().marketLimitOrders},marketCallOrders:function(){return s.a.getState().marketCallOrders},invertedCalls:function(){return s.a.getState().invertedCalls},marketSettleOrders:function(){return s.a.getState().marketSettleOrders},marketData:function(){return s.a.getState().marketData},totals:function(){return s.a.getState().totals},activeMarketHistory:function(){return s.a.getState().activeMarketHistory},bucketSize:function(){return s.a.getState().bucketSize},buckets:function(){return s.a.getState().buckets},lowestCallPrice:function(){return s.a.getState().lowestCallPrice},feedPrice:function(){return s.a.getState().feedPrice},currentAccount:function(){return o.a.getState().currentAccount},myActiveAccounts:function(){return o.a.getState().myActiveAccounts},viewSettings:function(){return i.a.getState().viewSettings},settings:function(){return i.a.getState().settings},exchange:function(){return i.a.getState().exchange},starredMarkets:function(){return i.a.getState().starredMarkets},marketDirections:function(){return i.a.getState().marketDirections},marketStats:function(){return s.a.getState().marketStats},marketReady:function(){return s.a.getState().marketReady},backedCoins:function(){return l.a.getState().backedCoins.get("OPEN",[])},bridgeCoins:function(){return l.a.getState().bridgeCoins},miniDepthChart:function(){return i.a.getState().viewSettings.get("miniDepthChart",!0)},dataFeed:function(){return new pt},trackedGroupsConfig:function(){return s.a.getState().trackedGroupsConfig},currentGroupOrderLimit:function(){return s.a.getState().currentGroupLimit}}},n.a.createElement(pa,{history:this.props.history,location:this.props.location,quoteAsset:e[0],baseAsset:e[1]}))}}]),t}(),sa=Object(m.EmitterInstance)(),oa=void 0,ia=void 0,la=void 0,ca=void 0,ua=void 0,pa=function(e){function t(e){ta(this,t);var a=aa(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={sub:null},a._subToMarket=a._subToMarket.bind(a),a}return ra(t,n.a.Component),ea(t,[{key:"componentWillMount",value:function(){var e=this;null!==this.props.quoteAsset&&null!==this.props.baseAsset&&(this.props.quoteAsset.toJS&&this.props.baseAsset.toJS&&this._subToMarket(this.props),sa.on("cancel-order",ia=P.a.cancelLimitOrderSuccess),sa.on("close-call",oa=P.a.closeCallOrderSuccess),sa.on("call-order-update",la=function(t){var a=t.call_price.base.asset_id,r=t.call_price.quote.asset_id,n=e.props.baseAsset.get("id"),s=e.props.quoteAsset.get("id");a!==n&&a!==s||r!==n&&r!==s||P.a.callOrderUpdate(t)}),sa.on("bitasset-update",ca=P.a.feedUpdate),sa.on("settle-order-update",ua=function(t){var a=market_utils.isMarketAsset(e.props.quoteAsset,e.props.baseAsset),r=a.isMarketAsset,n=a.marketAsset;r&&n.id===t.balance.asset_id&&P.a.settleOrderUpdate(n.id)}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(null!==e.quoteAsset&&null!==e.baseAsset){if(e.baseAsset&&e.baseAsset.getIn(["bitasset","is_prediction_market"])&&this.props.history.push("/market/"+e.baseAsset.get("symbol")+"_"+e.quoteAsset.get("symbol")),e.quoteAsset&&e.baseAsset&&!this.state.sub)return this._subToMarket(e);if(e.quoteAsset.get("symbol")!==this.props.quoteAsset.get("symbol")||e.baseAsset.get("symbol")!==this.props.baseAsset.get("symbol")){var a=this.state.sub.split("_");P.a.unSubscribeMarket(a[0],a[1]).then(function(){t._subToMarket(e)})}}}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.quoteAsset,a=e.baseAsset;null!==t&&null!==a&&(P.a.unSubscribeMarket(t.get("id"),a.get("id")),sa&&(sa.off("cancel-order",ia),sa.off("close-call",oa),sa.off("call-order-update",la),sa.off("bitasset-update",ca),sa.off("settle-order-update",ua)))}},{key:"_subToMarket",value:function(e,t,a){var r=e.quoteAsset,n=e.baseAsset,s=e.bucketSize,o=e.currentGroupOrderLimit;t&&(s=t),a&&(o=a),r.get("id")&&n.get("id")&&(P.a.subscribeMarket.defer(n,r,s,o),this.setState({sub:r.get("id")+"_"+n.get("id")}))}},{key:"render",value:function(){return null===this.props.quoteAsset||null===this.props.baseAsset?n.a.createElement(Xt.a,{subtitle:"market_not_found_subtitle"}):n.a.createElement(Yt,$t({},this.props,{sub:this.state.sub,subToMarket:this._subToMarket}))}}]),t}();pa.propTypes={currentAccount:R.a.ChainAccount.isRequired,quoteAsset:R.a.ChainAsset.isRequired,baseAsset:R.a.ChainAsset.isRequired,coreAsset:R.a.ChainAsset.isRequired},pa.defaultProps={currentAccount:"1.2.3",coreAsset:"1.3.0"},pa=Object(L.a)(pa,{show_loader:!0});t.default=na}}]);
//# sourceMappingURL=exchange.js.map