{"version":3,"file":"deposit-withdraw.be9e04b03d32e077e877.js","sources":["webpack:///deposit-withdraw.be9e04b03d32e077e877.js"],"sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{2008:function(e,t,a){\"use strict\";var n=a(0),s=a.n(n),i=a(98),o=a(39),r=a(46),l=a(197),c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),c(t,[{key:\"render\",value:function(){var e=this.props.asset.get(\"id\"),t=this.props.account.getIn([\"balances\",e]);return t?s.a.createElement(l.a,{balance:t,replace:this.props.replace}):s.a.createElement(\"span\",null,\"0Â \",s.a.createElement(i.a,{name:this.props.asset.get(\"symbol\"),replace:this.props.replace}))}}]),t}();u.propTypes={account:o.a.ChainAccount.isRequired,asset:o.a.ChainAsset.isRequired},u.defaultProps={autosubscribe:!1},t.a=Object(r.a)(u)},2069:function(e,t,a){\"use strict\";(function(e){var n=a(322),s=a(0),i=a.n(s),o=a(3),r=a.n(o),l=a(39),c=a(46),u=a(14),p=a(197),d=a(9),m=a.n(d),h=a(109),_=a(36),f=a(80),y=a(12),g=a(106),w=a(27),v=a(11),b=a(1),E=a.n(b),k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var C=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={isConfirmationModalVisible:!1,withdraw_amount:t.props.amount_to_withdraw,withdraw_address:f.a.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:f.a.getLast(e.output_wallet_type),memo:\"\",withdraw_address_first:!0,empty_withdraw_value:!1,from_account:e.account,fee_asset_id:\"1.3.0\",feeStatus:{}},t._validateAddress(t.state.withdraw_address,e),t._checkBalance=t._checkBalance.bind(t),t._updateFee=Object(n.a)(t._updateFee.bind(t),250),t.showConfirmationModal=t.showConfirmationModal.bind(t),t.hideConfirmationModal=t.hideConfirmationModal.bind(t),t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.a.Component),k(a,[{key:\"componentWillMount\",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:\"componentWillUnmount\",value:function(){this.unMounted=!0}},{key:\"componentWillReceiveProps\",value:function(e){var t=this;e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:\"1.3.0\",feeAmount:new w.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:\"showConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!0})}},{key:\"hideConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!1})}},{key:\"_updateFee\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.fee_asset_id,n=t.from_account,s=this._getAvailableAssets(t).fee_asset_types;if(1===s.length&&s[0]!==a&&(a=s[0]),!n)return null;Object(g.b)({accountID:n.get(\"id\"),feeID:a,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:this.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkBalance)})}},{key:\"_checkFeeStatus\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.from_account;if(a){var n=this._getAvailableAssets(t).fee_asset_types,s={},i=[];n.forEach(function(n){i.push(Object(g.b)({accountID:a.get(\"id\"),feeID:n,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:e.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}))}),Promise.all(i).then(function(a){n.forEach(function(e,t){s[e]=a[t]}),u.a.are_equal_shallow(t.feeStatus,s)||e.setState({feeStatus:s}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:\"onMemoChanged\",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:\"onWithdrawAmountChange\",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},this._checkBalance)}},{key:\"onSelectChanged\",value:function(e){var t=f.a.get(this.props.output_wallet_type)[e];f.a.setLast({wallet:this.props.output_wallet_type,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"onWithdrawAddressChanged\",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"_validateAddress\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(f.m)({url:a.url,walletType:a.output_wallet_type,newAddress:e}).then(function(a){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:a})})}},{key:\"_checkBalance\",value:function(){var e=this.state,t=e.feeAmount,a=e.withdraw_amount,n=this.props,s=n.asset,i=n.balance;if(i&&t){var o=Object(g.a)(a,s,t,i);if(null!==o)return this.setState({balanceError:!o}),o}}},{key:\"onSubmit\",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(f.a.has(this.props.output_wallet_type)){var t=f.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:a})}f.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=this.state.feeAmount,i=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\")),o=void 0!==this.props.gateFee?parseFloat(String.prototype.replace.call(this.props.gateFee,/,/g,\"\")):0,r=new w.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:i}),l=new w.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:0});void 0!==this.props.balance&&(l=r.clone(this.props.balance.get(\"balance\")));var c=new w.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:o});r.plus(c),l.lt(r)&&(r=l),_.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),r.getAmount(),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,s?s.asset_id:\"1.3.0\"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else this.showConfirmationModal()}},{key:\"onSubmitConfirmation\",value:function(){if(this.hideConfirmationModal(),f.a.has(this.props.output_wallet_type)){var t=f.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:a})}f.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=u.a.get_asset_precision(n.get(\"precision\")),i=String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\"),o=this.state.feeAmount;_.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),parseInt(i*s,10),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,o?o.asset_id:\"1.3.0\")}},{key:\"onDropDownList\",value:function(){f.a.has(this.props.output_wallet_type)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:\"getWithdrawModalId\",value:function(){return\"confirmation\"}},{key:\"onAccountBalance\",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get(\"balances\").toJS()).includes(this.props.asset.get(\"id\"))){var t=new w.a({amount:this.props.balance.get(\"balance\"),asset_id:this.props.asset.get(\"id\"),precision:this.props.asset.get(\"precision\")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:\"setNestedRef\",value:function(e){this.nestedRef=e}},{key:\"onFeeChanged\",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get(\"id\")},this._updateFee)}},{key:\"_getAvailableAssets\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,a=e.feeStatus;var n=[];if(!t||!t.get(\"balances\"))return{fee_asset_types:n};var s=e.from_account.get(\"balances\").toJS();for(var i in n=Object.keys(s).sort(u.a.sortID),s){var o=y.ChainStore.getObject(i),r=y.ChainStore.getObject(s[i]);if(r&&0===r.get(\"balance\")&&-1!==n.indexOf(i)&&n.splice(n.indexOf(i),1),o){var l=!1;try{l=new w.i({base:new w.a(o.getIn([\"options\",\"core_exchange_rate\",\"base\"]).toJS()),quote:new w.a(o.getIn([\"options\",\"core_exchange_rate\",\"quote\"]).toJS())}).isValid()}catch(e){l=!1}\"1.3.0\"===o.get(\"id\")||l||n.splice(n.indexOf(i),1)}}return{fee_asset_types:n=n.filter(function(e){return function(e){return void 0===a[e]||a[e]&&a[e].hasPoolBalance}(e)&&function(e){return void 0===a[e]||a[e]&&a[e].hasBalance}(e)})}}},{key:\"render\",value:function(){var e=this.state,t=e.withdraw_address_selected,a=e.memo,n=f.a.get(this.props.output_wallet_type),s=null,o=this.props.account.get(\"balances\").toJS(),l=Object.keys(o),c=null,u=null,d=null;this.state.options_is_valid&&(u=i.a.createElement(\"div\",{className:n.length?\"blocktrades-options\":\"blocktrades-disabled-options\"},n.map(function(e,t){return i.a.createElement(\"a\",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(c=i.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"gateway.valid_address\",coin_type:this.props.output_coin_type})),d=i.a.createElement(v.Modal,{closable:!1,footer:[i.a.createElement(v.Button,{key:\"submit\",type:\"primary\",onClick:this.onSubmitConfirmation.bind(this)},m.a.translate(\"modal.confirmation.accept\")),i.a.createElement(v.Button,{key:\"cancel\",style:{marginLeft:\"8px\"},onClick:this.hideConfirmationModal},m.a.translate(\"modal.confirmation.cancel\"))],visible:this.state.isConfirmationModalVisible,onCancel:this.hideConfirmationModal},i.a.createElement(\"label\",null,i.a.createElement(r.a,{content:\"modal.confirmation.title\"})))));var _=1,y=null;this.props.output_supports_memos&&(y=i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(\"label\",null,i.a.createElement(r.a,{component:\"span\",content:\"transfer.memo\"})),i.a.createElement(\"textarea\",{rows:\"3\",value:a,tabIndex:_++,onChange:this.onMemoChanged.bind(this)})));var g=this._getAvailableAssets().fee_asset_types;if(l.length>0){var w=this.props.asset.get(\"id\");if(w){var b=o[w];s=i.a.createElement(\"span\",{style:{borderBottom:\"#A09F9F 1px dotted\",cursor:\"pointer\"}},i.a.createElement(r.a,{component:\"span\",content:\"transfer.available\"}),\"Â :Â \",i.a.createElement(\"span\",{className:\"set-cursor\",onClick:this.onAccountBalance.bind(this)},b?i.a.createElement(p.a,{balance:o[w]}):0))}else s=\"No funds\"}else s=\"No funds\";var E=this.state.error||this.state.balanceError||!this.state.withdraw_amount;return i.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\",style:{paddingTop:0}},i.a.createElement(\"div\",{className:\"grid-container\"},i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(h.a,{label:\"modal.withdraw.amount\",amount:this.state.withdraw_amount,asset:this.props.asset.get(\"id\"),assets:[this.props.asset.get(\"id\")],placeholder:\"0.0\",onChange:this.onWithdrawAmountChange.bind(this),display_balance:s}),this.state.empty_withdraw_value?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.valid\"})):null,this.state.balanceError?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.insufficient\"})):null),this.state.feeAmount?i.a.createElement(\"div\",{className:\"content-block gate_fee\"},i.a.createElement(h.a,{refCallback:this.setNestedRef.bind(this),label:\"transfer.fee\",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:g,tabIndex:_++}),this.state.hasBalance?null:i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.noFeeBalance\"})),this.state.hasPoolBalance?null:i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.noPoolBalance\"}))):null,this.props.gateFee?i.a.createElement(\"div\",{className:\"amount-selector right-selector\",style:{paddingBottom:20}},i.a.createElement(\"label\",{className:\"left-label\"},i.a.createElement(r.a,{content:\"gateway.fee\"})),i.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},i.a.createElement(\"input\",{type:\"text\",disabled:!0,value:this.props.gateFee}),i.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},i.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},i.a.createElement(\"div\",null,this.props.output_coin_symbol))))):null,i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(\"label\",{className:\"left-label\"},i.a.createElement(r.a,{component:\"span\",content:\"modal.withdraw.address\"})),i.a.createElement(\"div\",{className:\"blocktrades-select-dropdown\"},i.a.createElement(\"div\",{className:\"inline-label\"},i.a.createElement(\"input\",{type:\"text\",value:t,tabIndex:\"4\",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:\"off\"}),i.a.createElement(\"span\",{onClick:this.onDropDownList.bind(this)},\"â¼\"))),i.a.createElement(\"div\",{className:\"blocktrades-position-options\"},u),c),y,i.a.createElement(\"div\",null,i.a.createElement(v.Button,{type:\"primary\",disabled:E,onClick:this.onSubmit.bind(this)},m.a.translate(\"modal.withdraw.submit\")),i.a.createElement(v.Button,{onClick:this.props.hideModal,style:{marginLeft:\"8px\"}},m.a.translate(\"account.perm.cancel\"))),d))}}]),a}();C.propTypes={account:l.a.ChainAccount.isRequired,issuer:l.a.ChainAccount.isRequired,asset:l.a.ChainAsset.isRequired,output_coin_name:E.a.string.isRequired,output_coin_symbol:E.a.string.isRequired,output_coin_type:E.a.string.isRequired,url:E.a.string,output_wallet_type:E.a.string,output_supports_memos:E.a.bool.isRequired,amount_to_withdraw:E.a.string,balance:l.a.ChainObject},t.a=Object(c.a)(C)}).call(this,a(120).Buffer)},2096:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return o}),a.d(t,\"c\",function(){return r}),a.d(t,\"a\",function(){return l});var n=a(59),s=a(42),i=new n.a(\"\");function o(e){var t=e.walletType,a=e.inputCoinType,n=e.outputCoinType,i=e.outputAddress,o=e.url,r=void 0===o?s.k.BASE:o,l=e.stateCallback,c={inputCoinType:a,outputCoinType:n,outputAddress:i},u=JSON.stringify(c);fetch(r+\"/wallets/\"+t+\"/new-deposit-address\",{method:\"post\",headers:new Headers({Accept:\"application/json\",\"Content-Type\":\"application/json\"}),body:u}).then(function(e){e.json().then(function(e){var t={address:e.inputAddress||\"unknown\",memo:e.inputMemo,error:e.error||null};l&&l(t)},function(e){l&&l({address:\"unknown\",memo:null})})},function(e){l&&l({address:\"unknown\",memo:null})}).catch(function(e){console.log(\"fetch error:\",e)})}function r(e){var t=e.url,a=void 0===t?s.k.BASE:t,n=e.walletType,i=e.newAddress;return i?fetch(a+\"/wallets/\"+n+\"/check-address\",{method:\"post\",headers:new Headers({Accept:\"application/json\",\"Content-Type\":\"application/json\"}),body:JSON.stringify({address:i})}).then(function(e){return e.json().then(function(e){return e.isValid})}).catch(function(e){console.log(\"validate error:\",e)}):new Promise(function(e){return e()})}var l={has:function(e){return i.has(\"history_address_\"+e)},set:function(e){var t=e.wallet,a=e.addresses;i.set(\"history_address_\"+t,a)},get:function(e){return i.get(\"history_address_\"+e,[])},setLast:function(e){var t=e.wallet,a=e.address;i.set(\"history_address_last_\"+t,a)},getLast:function(e){return i.get(\"history_address_last_\"+e,\"\")}}},2186:function(e,t,a){\"use strict\";(function(e){var n=a(322),s=a(9),i=a.n(s),o=a(0),r=a.n(o),l=a(3),c=a.n(l),u=a(39),p=a(46),d=a(2008),m=a(2069),h=a(570),_=a(14),f=a(36),y=a(74),g=a(42),w=a(106),v=a(27),b=a(80),E=a(1),k=a.n(E),C=a(11),S=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){s=!0,i=e}finally{try{!n&&r.return&&r.return()}finally{if(s)throw i}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),A=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function N(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function x(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function T(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=function(t){function a(e){N(this,a);var t=x(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={error:null,conversion_memo:null,feeStatus:{}},t._updateFee=Object(n.a)(t._updateFee.bind(t),150),t._checkFeeStatus=t._checkFeeStatus.bind(t),t._checkBalance=t._checkBalance.bind(t),t}return T(a,r.a.Component),A(a,[{key:\"_getFeeID\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this._getCurrentBalance(e);return e.account.get(\"balances\").has(\"1.3.0\")?\"1.3.0\":t?t.get(\"asset_type\"):\"1.3.0\"}},{key:\"componentWillMount\",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:\"componentWillUnmount\",value:function(){this.unMounted=!0}},{key:\"componentWillReceiveProps\",value:function(e){e.amount.equals(this.props.amount)&&e.account_id===this.props.account_id||this._updateFee()}},{key:\"_updateFee\",value:function(){var e=this,t=this._getFeeID();Object(b.i)(this.props).then(function(a){Object(w.b)({accountID:e.props.account_id,feeID:t,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:a.inputMemo}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkFeeStatus)})})}},{key:\"_checkFeeStatus\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.account;if(t){var a=Object.keys(this.props.account.get(\"balances\").toJS());a.length||(a=[\"1.3.0\"]);var n={},s=[];Object(b.i)(this.props).then(function(i){a.forEach(function(e){s.push(Object(w.b)({accountID:t.get(\"id\"),feeID:e,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:i.inputMemo}}))}),Promise.all(s).then(function(t){e.unMounted||(a.forEach(function(e,a){n[e]=t[a]}),_.a.are_equal_shallow(e.state.feeStatus,n)||e.setState({feeStatus:n}),e._checkBalance())}).catch(function(e){console.error(e)})})}}},{key:\"_getCurrentBalance\",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).balance}},{key:\"_checkBalance\",value:function(){var e=this.state.feeAmount,t=this.props,a=t.asset,n=t.amount,s=this._getCurrentBalance();if(s&&e){var i=Object(w.a)(n.getAmount({real:!0}),a,e,s);if(null!==i)return this.setState({balanceError:!i}),i}}},{key:\"onTrxIncluded\",value:function(e){e.included&&e.broadcasted_transaction?(y.a.unlisten(this.onTrxIncluded),y.a.reset()):e.closed&&(y.a.unlisten(this.onTrxIncluded),y.a.reset())}},{key:\"onConvert\",value:function(){var t=this,a=this.props,n=a.input_coin_type,s=a.output_coin_type,i=a.amount,o=this.state.balanceError;Object(b.i)(this.props).then(function(a){if(a.inputCoinType!=n||a.outputCoinType!=s)throw new Error(\"unexpected reply from initiate-trade\");n!=a.inputCoinType||s!=a.outputCoinType||o||(t.setState({conversion_memo:a.inputMemo}),t.setState({error:null}),f.a.transfer(t.props.account_id,\"1.2.32567\",i.getAmount(),t.props.asset.get(\"id\"),a.inputMemo?new e(a.inputMemo,\"utf-8\"):\"\",null,t._getFeeID()).then(function(){y.a.unlisten(t.onTrxIncluded),y.a.listen(t.onTrxIncluded)}).catch(function(e){var a=e.message?e.message.split(\"\\n\")[1]:null;console.log(\"error: \",e,a),t.setState({error:a})}))}).catch(function(){t.setState({conversion_memo:null})})}},{key:\"render\",value:function(){var e=\"button disabled\";return Object.keys(this.props.account_balances.toJS()).includes(this.props.asset.get(\"id\"))&&!this.state.balanceError&&this.state.hasBalance&&this.props.amount.getAmount()>0&&(e=\"button\"),r.a.createElement(\"span\",null,r.a.createElement(\"button\",{className:e,onClick:this.onConvert.bind(this)},r.a.createElement(c.a,{content:\"\"}),r.a.createElement(c.a,{content:\"gateway.convert_now\"})),this.state.balanceError?r.a.createElement(\"div\",{style:{paddingTop:15},className:\"has-error\"},r.a.createElement(c.a,{content:\"transfer.errors.insufficient\"})):null)}}]),a}();j.propTypes={balance:u.a.ChainObject,input_coin_type:k.a.string.isRequired,output_coin_type:k.a.string.isRequired,account_name:k.a.string.isRequired,account_id:k.a.string.isRequired,url:k.a.string.isRequired},j=Object(p.a)(j);var M=function(e){function t(){return N(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,r.a.Component),A(t,[{key:\"render\",value:function(){var e=r.a.createElement(j,{asset:this.props.asset,account:this.props.account,input_coin_type:this.props.input_coin_type,output_coin_type:this.props.output_coin_type,account_name:this.props.account_name,amount:new v.a({real:this.props.amount,asset_id:this.props.asset.get(\"id\"),precision:this.props.asset.get(\"precision\")}),account_id:this.props.account_id,account_balances:this.props.account_balances,url:this.props.url,balance:this.props.account.get(\"balances\").toJS()[this.props.asset.get(\"id\")]});return r.a.createElement(\"span\",null,e)}}]),t}();M.propTypes={asset:u.a.ChainAsset.isRequired,input_coin_type:k.a.string.isRequired,output_coin_type:k.a.string.isRequired,account_name:k.a.string.isRequired,account_id:k.a.string.isRequired,url:k.a.string.isRequired},M=Object(p.a)(M);var I=function(e){function t(){return N(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,r.a.Component),A(t,[{key:\"getWithdrawModalId\",value:function(){return\"withdraw_asset_\"+this.props.gateway+\"_bridge\"}},{key:\"onWithdraw\",value:function(){this.props.showModal()}},{key:\"render\",value:function(){var e=\"button disabled\";return Object.keys(this.props.account.get(\"balances\").toJS()).includes(this.props.asset.get(\"id\"))&&this.props.amount_to_withdraw&&!(this.props.amount_to_withdraw.indexOf(\" \")>=0)&&!isNaN(this.props.amount_to_withdraw)&&this.props.amount_to_withdraw>0&&this.props.amount_to_withdraw<=this.props.balance.toJS().balance/_.a.get_asset_precision(this.props.asset.get(\"precision\"))&&(e=\"button\"),r.a.createElement(\"span\",null,r.a.createElement(\"span\",null,r.a.createElement(\"button\",{className:e,onClick:this.onWithdraw.bind(this)},r.a.createElement(c.a,{content:\"\"}),r.a.createElement(c.a,{content:\"gateway.withdraw_now\"}),\" \")),r.a.createElement(C.Modal,{closable:!1,onCancel:this.props.hideModal,title:i.a.translate(\"gateway.withdraw_coin\",{coin:this.props.output_coin_name,symbol:this.props.output_coin_symbol}),footer:null,visible:this.props.visible,overlay:!0},r.a.createElement(m.a,{hideModal:this.props.hideModal,key:\"\"+this.props.key,account:this.props.account.get(\"name\"),issuer:this.props.issuer,asset:this.props.asset.get(\"id\"),output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,url:this.props.url,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get(\"balances\").toJS()[this.props.asset.get(\"id\")]})))}}]),t}();I.propTypes={balance:u.a.ChainObject,url:k.a.string.isRequired},I=Object(p.a)(I);var B=function(e){function t(){return N(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,r.a.Component),A(t,[{key:\"render\",value:function(){var e=r.a.createElement(I,{visible:this.props.visible,hideModal:this.props.hideModal,showModal:this.props.showModal,key:this.props.key,account:this.props.account,issuer:this.props.issuer,asset:this.props.asset,output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,url:this.props.url,gateway:this.props.gateway,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get(\"balances\").toJS()[this.props.asset.get(\"id\")]});return r.a.createElement(\"span\",null,e)}}]),t}();B.propTypes={account:u.a.ChainAccount.isRequired,asset:u.a.ChainAsset.isRequired,output_coin_type:k.a.string.isRequired,url:k.a.string.isRequired},B=Object(p.a)(B);var P=function(e){function t(e){N(this,t);var a=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.refresh_interval=12e4,a.deposit_address_cache=new h.a,a.coin_info_request_states={request_in_progress:0,request_complete:1,request_failed:2},a.estimation_directions={output_from_input:0,input_from_output:1},a.state={isModalVisible:!1,coin_symbol:\"btc\",key_for_withdrawal_dialog:\"btc\",supports_output_memos:\"\",url:g.b.BASE,error:null,deposit_input_coin_type:null,deposit_output_coin_type:null,input_address_and_memo:null,deposit_estimated_input_amount:a.props.initial_deposit_estimated_input_amount||\"1.0\",deposit_estimated_output_amount:null,deposit_limit:null,deposit_error:null,failed_calculate_deposit:null,withdraw_input_coin_type:null,withdraw_output_coin_type:null,withdraw_estimated_input_amount:a.props.initial_withdraw_estimated_input_amount||\"1.0\",withdraw_estimated_output_amount:null,withdraw_limit:null,withdraw_error:null,failed_calculate_withdraw:null,conversion_input_coin_type:null,conversion_output_coin_type:null,conversion_estimated_input_amount:a.props.initial_conversion_estimated_input_amount||\"1.0\",conversion_estimated_output_amount:null,conversion_limit:null,conversion_error:null,failed_calculate_conversion:null,coin_info_request_state:a.coin_info_request_states.request_in_progress,input_address_requests_in_progress:{},deposit_estimate_direction:a.estimation_directions.output_from_input,deposit_limit_cache:{},deposit_limit_requests_in_progress:{},coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null,conversion_memo:null,announcements:[]},a.showModal=a.showModal.bind(a),a.hideModal=a.hideModal.bind(a),a}return T(t,r.a.Component),A(t,[{key:\"showModal\",value:function(){this.setState({isModalVisible:!0})}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1})}},{key:\"urlConnection\",value:function(e,t){var a=this;this.setState({url:e});var n=fetch(e+\"/announcements/enabled/trade\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()});Promise.resolve(n).then(function(e){e.sort(function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}),a.setState({announcements:e})}).catch(function(e){a.setState({announcements:[]})});var s=fetch(e+\"/coins\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}),i=fetch(e+\"/wallets\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}),o=fetch(e+\"/trading-pairs\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}),r=fetch(e+\"/active-wallets\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()});Promise.all([s,i,o,r]).then(function(e){var t=S(e,4),n=t[0],s=(t[1],t[2]),i=t[3],o={};n.forEach(function(e){return o[e.coinType]=e});var r={},l={},c={};s.forEach(function(e){var t=o[e.inputCoinType],a=o[e.outputCoinType];t.backingCoinType!=e.outputCoinType&&a&&a.backingCoinType!=e.inputCoinType&&t&&0==t.restricted&&0==a.restricted&&-1!=i.indexOf(t.walletType)&&-1!=i.indexOf(a.walletType)&&(\"bitshares2\"!=t.walletType&&\"bitshares2\"==a.walletType?(r[e.inputCoinType]=r[e.inputCoinType]||[],r[e.inputCoinType].push(e.outputCoinType)):\"bitshares2\"==t.walletType&&\"bitshares2\"!=a.walletType?(l[e.inputCoinType]=l[e.inputCoinType]||[],l[e.inputCoinType].push(e.outputCoinType)):\"bitshares2\"==t.walletType&&\"bitshares2\"==a.walletType&&(c[e.inputCoinType]=c[e.inputCoinType]||[],c[e.inputCoinType].push(e.outputCoinType)))});var u=null,p=null,d=Object.keys(r);if(d.forEach(function(e){r[e].sort()}),d.length){u=a.props.initial_deposit_input_coin_type&&a.props.initial_deposit_input_coin_type in r?a.props.initial_deposit_input_coin_type:d[0];var m=r[u];p=a.props.initial_deposit_output_coin_type&&-1!=m.indexOf(a.props.initial_deposit_output_coin_type)?a.props.initial_deposit_output_coin_type:m[0]}var h=null,_=null,f=null,y=null,g=Object.keys(l);if(g.forEach(function(e){l[e].sort()}),g.length){h=a.props.initial_withdraw_input_coin_type&&a.props.initial_withdraw_input_coin_type in l?a.props.initial_withdraw_input_coin_type:g[0];var w=l[h];_=a.props.initial_withdraw_output_coin_type&&-1!=w.indexOf(a.props.initial_withdraw_output_coin_type)?a.props.initial_withdraw_output_coin_type:w[0]}var v=Object.keys(c);if(v.forEach(function(e){c[e].sort()}),v.length){f=a.props.initial_conversion_input_coin_type&&a.props.initial_conversion_input_coin_type in c?a.props.initial_conversion_input_coin_type:v[0];var b=c[f];y=a.props.initial_conversion_output_coin_type&&-1!=b.indexOf(a.props.initial_conversion_output_coin_type)?a.props.initial_conversion_output_coin_type:b[0]}var E=a.getCachedOrGeneratedInputAddress(u,p),k=a.getCachedOrFreshDepositLimit(\"deposit\",u,p),C=a.getAndUpdateOutputEstimate(\"deposit\",u,p,a.state.deposit_estimated_input_amount),A=a.getAndUpdateOutputEstimate(\"withdraw\",h,_,a.state.withdraw_estimated_input_amount),O=a.getCachedOrFreshDepositLimit(\"withdraw\",h,_),N=a.getAndUpdateOutputEstimate(\"conversion\",f,y,a.state.conversion_estimated_input_amount),x=a.getCachedOrFreshDepositLimit(\"conversion\",f,y);a.unMounted||a.setState({coin_info_request_state:a.coin_info_request_states.request_complete,coins_by_type:o,allowed_mappings_for_deposit:r,allowed_mappings_for_withdraw:l,allowed_mappings_for_conversion:c,deposit_input_coin_type:u,deposit_output_coin_type:p,input_address_and_memo:E,deposit_limit:k,deposit_estimated_output_amount:C,deposit_estimate_direction:a.estimation_directions.output_from_input,withdraw_input_coin_type:h,withdraw_output_coin_type:_,withdraw_limit:O,withdraw_estimated_output_amount:A,conversion_input_coin_type:f,conversion_output_coin_type:y,conversion_limit:x,conversion_estimated_output_amount:N,withdraw_estimate_direction:a.estimation_directions.output_from_input,conversion_estimate_direction:a.estimation_directions.output_from_input,supports_output_memos:o.btc.supportsOutputMemos})}).catch(function(e){a.setState({coin_info_request_state:t,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:\"updateEstimates\",value:function(){if(this.state.deposit_input_coin_type&&this.state.deposit_output_coin_type){var e=this.getCachedOrGeneratedInputAddress(this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),t=this.getCachedOrFreshDepositLimit(\"deposit\",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),a=this.state.deposit_estimated_input_amount,n=this.state.deposit_estimated_output_amount;this.state.deposit_estimate_direction==this.estimation_directions.output_from_input?n=this.getAndUpdateOutputEstimate(\"deposit\",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,a):a=this.getAndUpdateInputEstimate(\"deposit\",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,n);var s=this.getCachedOrFreshDepositLimit(\"withdraw\",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type),i=this.state.withdraw_estimated_input_amount,o=this.state.withdraw_estimated_output_amount;this.state.withdraw_estimate_direction==this.estimation_directions.output_from_input?o=this.getAndUpdateOutputEstimate(\"withdraw\",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,i):i=this.getAndUpdateinputEstimate(\"withdraw\",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,o);var r=this.getCachedOrFreshDepositLimit(\"conversion\",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type),l=this.state.conversion_estimated_input_amount,c=this.state.conversion_estimated_output_amount;this.state.conversion_estimate_direction==this.estimation_directions.output_from_input?c=this.getAndUpdateOutputEstimate(\"conversion\",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,l):l=this.getAndUpdateinputEstimate(\"conversion\",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,c),this.setState({input_address_and_memo:e,deposit_limit:t,deposit_estimated_input_amount:a,deposit_estimated_output_amount:n,withdraw_limit:s,withdraw_estimated_input_amount:i,withdraw_estimated_output_amount:o,conversion_limit:r,conversion_estimated_input_amount:l,conversion_estimated_output_amount:c,key_for_withdrawal_dialog:i})}}},{key:\"componentWillMount\",value:function(){var e=this,t=this.state.url;this.urlConnection(t,0);var a=fetch(t+\"/coins\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}),n=fetch(t+\"/trading-pairs\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}),s=fetch(t+\"/active-wallets\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()});Promise.all([a,n,s]).then(function(e){var t=S(e,3),a=t[0],n=t[1],s=t[2],i={};a.forEach(function(e){return i[e.coinType]=e}),n.forEach(function(e){var t=i[e.inputCoinType],a=i[e.outputCoinType];a&&a.backingCoinType!=e.inputCoinType&&t&&t.backingCoinType!=e.outputCoinType&&-1!=s.indexOf(t.walletType)&&s.indexOf(a.walletType)})}).catch(function(t){e.urlConnection(\"https://api.blocktrades.info/v2\",2),e.setState({coin_info_request_state:0,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:\"componentDidMount\",value:function(){this.update_timer=setInterval(this.updateEstimates.bind(this),this.refresh_interval)}},{key:\"componentWillUnmount\",value:function(){clearInterval(this.update_timer),this.unMounted=!0}},{key:\"getCachedInputAddress\",value:function(e,t,a){var n=this.props.account.get(\"name\");return this.deposit_address_cache.getCachedInputAddress(this.props.gateway,n,e,t)}},{key:\"cacheInputAddress\",value:function(e,t,a,n){var s=this.props.account.get(\"name\");this.deposit_address_cache.cacheInputAddress(this.props.gateway,s,e,t,a,n)}},{key:\"getCachedOrGeneratedInputAddress\",value:function(e,t){var a=this,n=this.getCachedInputAddress(e,t);if(n)return n;if(this.state.input_address_requests_in_progress[e]=this.state.input_address_requests_in_progress[e]||{},this.state.input_address_requests_in_progress[e][t])return null;var s=JSON.stringify({inputCoinType:e,outputCoinType:t,outputAddress:this.props.account.get(\"name\")});return this.state.input_address_requests_in_progress[e][t]=!0,fetch(this.state.url+\"/simple-api/initiate-trade\",{method:\"post\",headers:new Headers({Accept:\"application/json\",\"Content-Type\":\"application/json\"}),body:s}).then(function(n){n.json().then(function(n){if(console.assert(n.inputCoinType==e,\"unexpected reply from initiate-trade\"),console.assert(n.outputCoinType==t,\"unexpected reply from initiate-trade\"),n.inputCoinType!=e||n.outputCoinType!=t)throw Error(\"unexpected reply from initiate-trade\");a.cacheInputAddress(n.inputCoinType,n.outputCoinType,n.inputAddress,n.inputMemo),delete a.state.input_address_requests_in_progress[e][t],a.state.deposit_input_coin_type==n.inputCoinType&&a.state.deposit_output_coin_type==n.outputCoinType&&a.setState({input_address_and_memo:{address:n.inputAddress,memo:n.inputMemo}})},function(n){delete a.state.input_address_requests_in_progress[e][t],a.state.deposit_input_coin_type==e&&a.state.deposit_output_coin_type==t&&a.setState({input_address_and_memo:{address:\"error generating address\",memo:null}})})},function(n){delete a.state.input_address_requests_in_progress[e][t],a.state.deposit_input_coin_type==e&&a.state.deposit_output_coin_type==t&&a.setState({input_address_and_memo:{address:\"error generating address\",memo:null}})}),null}},{key:\"getCachedDepositLimit\",value:function(e,t){if(this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]){var a=this.state.deposit_limit_cache[e][t];if(new Date-a.timestamp<this.refresh_interval)return a;delete this.state.deposit_limit_cache[e][t]}return null}},{key:\"cacheDepositLimit\",value:function(e,t,a){a.timestamp=new Date,this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]=a}},{key:\"getCachedOrFreshDepositLimit\",value:function(e,t,a){var n=this,s=this.getCachedDepositLimit(t,a);if(s)return s;this.state.deposit_limit_requests_in_progress[t]=this.state.input_address_requests_in_progress[t]||{},this.state.deposit_limit_requests_in_progress[t][a]=!0;var i=this.state.url+\"/deposit-limits?inputCoinType=\"+encodeURIComponent(t)+\"&outputCoinType=\"+encodeURIComponent(a);return fetch(i,{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}).then(function(s){if(!n.unMounted){if(console.assert(s.inputCoinType==t&&s.outputCoinType==a,\"unexpected reply from deposit-limits\"),s.inputCoinType!=t||s.outputCoinType!=a)throw Error(\"unexpected reply from deposit-limits\");var i={timestamp:new Date,limit:s.depositLimit};n.cacheDepositLimit(t,a,i),delete n.state.deposit_limit_requests_in_progress[t][a],n.state[e+\"_input_coin_type\"]==t&&n.state[e+\"_output_coin_type\"]==a&&n.setState(O({},e+\"_limit\",i))}},function(e){delete n.state.deposit_limit_requests_in_progress[t][a]}),null}},{key:\"getAndUpdateOutputEstimate\",value:function(e,t,a,n){var s=this;if(!this.unMounted){\"deposit\"==e&&this.setState({failed_calculate_deposit:null}),\"withdraw\"==e&&this.setState({failed_calculate_withdraw:null}),\"conversion\"==e&&this.setState({failed_calculate_conversion:null});var i=this.state.url+\"/estimate-output-amount?inputAmount=\"+encodeURIComponent(n)+\"&inputCoinType=\"+encodeURIComponent(t)+\"&outputCoinType=\"+encodeURIComponent(a);return fetch(i,{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}).then(function(i){if(!s.unMounted)if(i.error){if(s.state[e+\"_input_coin_type\"]==t&&s.state[e+\"_output_coin_type\"]==a&&s.state[e+\"_estimated_input_amount\"]==n&&s.state[e+\"_estimate_direction\"]==s.estimation_directions.output_from_input){var o=i.error.message;\"deposit\"==e&&s.setState({failed_calculate_deposit:\"Failed to calculate\"}),\"withdraw\"==e&&s.setState({failed_calculate_withdraw:\"Failed to calculate\"}),\"conversion\"==e&&s.setState({failed_calculate_conversion:\"Failed to calculate\"});o.startsWith(\"Internal Server Error: \")&&(o=o.substr(\"Internal Server Error: \".length)),s.setState(O({},e+\"_error\",o))}}else{var r;if(console.assert(i.inputCoinType==t&&i.outputCoinType==a&&i.inputAmount==n,\"unexpected reply from estimate-output-amount\"),i.inputCoinType!=t||i.outputCoinType!=a||i.inputAmount!=n)throw Error(\"unexpected reply from estimate-output-amount\");s.state[e+\"_input_coin_type\"]==t&&s.state[e+\"_output_coin_type\"]==a&&s.state[e+\"_estimated_input_amount\"]==n&&s.state[e+\"_estimate_direction\"]==s.estimation_directions.output_from_input&&s.setState((O(r={},e+\"_estimated_output_amount\",i.outputAmount),O(r,e+\"_error\",null),r))}},function(e){}),null}}},{key:\"getAndUpdateInputEstimate\",value:function(e,t,a,n){var s=this;if(!this.unMounted){\"deposit\"==e&&this.setState({failed_calculate_deposit:null}),\"withdraw\"==e&&this.setState({failed_calculate_withdraw:null}),\"conversion\"==e&&this.setState({failed_calculate_conversion:null});var i=this.state.url+\"/estimate-input-amount?outputAmount=\"+encodeURIComponent(n)+\"&inputCoinType=\"+encodeURIComponent(t)+\"&outputCoinType=\"+encodeURIComponent(a);return fetch(i,{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}).then(function(i){var o;s.unMounted||(console.assert(i.inputCoinType==t&&i.outputCoinType==a&&i.outputAmount==n,\"unexpected reply from estimate-input-amount\"),i.inputCoinType==t&&i.outputCoinType==a&&i.outputAmount==n||(\"deposit\"==e&&s.setState({failed_calculate_deposit:\"Failed to calculate\"}),\"withdraw\"==e&&s.setState({failed_calculate_withdraw:\"Failed to calculate\"}),\"conversion\"==e&&s.setState({failed_calculate_conversion:\"Failed to calculate\"})),s.state[e+\"_input_coin_type\"]==t&&s.state[e+\"_output_coin_type\"]==a&&s.state[e+\"_estimated_output_amount\"]==n&&s.state[e+\"_estimate_direction\"]==s.estimation_directions.input_from_output&&s.setState((O(o={},e+\"_estimated_input_amount\",i.inputAmount),O(o,\"key_for_withdrawal_dialog\",i.inputAmount),o)))},function(e){}),null}}},{key:\"onInputAmountChanged\",value:function(e,t){var a,n=t.target.value;\"\"==n&&(n=\"0\");var s=this.getAndUpdateOutputEstimate(e,this.state[e+\"_input_coin_type\"],this.state[e+\"_output_coin_type\"],n);this.setState((O(a={},e+\"_estimated_input_amount\",n),O(a,e+\"_estimated_output_amount\",s),O(a,e+\"_estimate_direction\",this.estimation_directions.output_from_input),O(a,\"key_for_withdrawal_dialog\",n),a))}},{key:\"onOutputAmountChanged\",value:function(e,t){var a,n=t.target.value;\"\"==n&&(n=\"0\");var s=this.getAndUpdateInputEstimate(e,this.state[e+\"_input_coin_type\"],this.state[e+\"_output_coin_type\"],n);this.setState((O(a={},e+\"_estimated_output_amount\",n),O(a,e+\"_estimated_input_amount\",s),O(a,e+\"_estimate_direction\",this.estimation_directions.input_from_output),a))}},{key:\"getWithdrawModalId\",value:function(){return\"withdraw_asset_\"+this.props.gateway+\"_bridge\"}},{key:\"onInputCoinTypeChanged\",value:function(e,t){var a,n=this,s=null,i=\"_estimated_output_amount\",o=t.target.value,r=this.state[\"allowed_mappings_for_\"+e][o],l=r[0];-1!=r.indexOf(this.state[e+\"_output_coin_type\"])&&(l=this.state[e+\"_output_coin_type\"]);var c=this.state.input_address_and_memo;\"deposit\"==e&&(c=this.getCachedOrGeneratedInputAddress(o,l));var u=this.getCachedOrFreshDepositLimit(e,o,l);this.state[e+\"_estimated_input_amount\"]?s=this.getAndUpdateOutputEstimate(e,o,l,this.state[e+\"_estimated_input_amount\"]):(s=this.getAndUpdateInputEstimate(e,o,l,this.state[e+\"_estimated_output_amount\"]),i=\"_estimated_input_amount\"),\"withdraw\"==e&&r.forEach(function(e){l===e&&n.setState({coin_symbol:o+\"input\",supports_output_memos:n.state.coins_by_type[e].supportsOutputMemos})}),this.setState((O(a={},e+\"_input_coin_type\",o),O(a,e+\"_output_coin_type\",l),O(a,\"input_address_and_memo\",c),O(a,e+\"_limit\",u),O(a,e+i,s),O(a,e+\"_estimate_direction\",this.estimation_directions.output_from_input),a))}},{key:\"onOutputCoinTypeChanged\",value:function(e,t){var a,n=this,s=null,i=\"_estimated_output_amount\",o=t.target.value,r=this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type];\"withdraw\"==e&&r.forEach(function(e){o===e&&n.setState({coin_symbol:o+\"output\",supports_output_memos:n.state.coins_by_type[e].supportsOutputMemos,key_for_withdrawal_dialog:o})});var l=this.state.input_address_and_memo;\"deposit\"==e&&(l=this.getCachedOrGeneratedInputAddress(this.state[e+\"_input_coin_type\"],o));var c=this.getCachedOrFreshDepositLimit(e,this.state[e+\"_input_coin_type\"],o);this.state[e+\"_estimated_input_amount\"]?s=this.getAndUpdateOutputEstimate(e,this.state[e+\"_input_coin_type\"],o,this.state[e+\"_estimated_input_amount\"]):(s=this.getAndUpdateInputEstimate(e,this.state[e+\"_input_coin_type\"],o,this.state[e+\"_estimated_output_amount\"]),i=\"_estimated_input_amount\"),this.setState((O(a={},e+\"_output_coin_type\",o),O(a,\"input_address_and_memo\",l),O(a,e+\"_limit\",c),O(a,e+i,s),O(a,e+\"_estimate_direction\",this.estimation_directions.output_from_input),a))}},{key:\"render\",value:function(){var e=this;if(!this.props.account||!this.props.issuer_account||!this.props.gateway)return r.a.createElement(\"div\",null);var t=void 0,a=void 0,n=void 0,s=void 0,i=void 0,o=void 0,l=void 0;if(this.state.coin_info_request_state==this.coin_info_request_states.request_failed)return r.a.createElement(\"div\",null,r.a.createElement(\"p\",null,\"Error connecting to blocktrades.us, please try again later\"));if(this.state.coin_info_request_state==this.coin_info_request_states.never_requested||this.state.coin_info_request_state==this.coin_info_request_states.request_in_progress)return r.a.createElement(\"div\",null,r.a.createElement(\"p\",null,\"Retrieving current trade data from blocktrades.us\"));var u=null,p=r.a.createElement(c.a,{content:\"gateway.calc\"});null!=this.state.failed_calculate_deposit&&(p=this.state.failed_calculate_deposit);var m=r.a.createElement(c.a,{content:\"gateway.calc\"});null!=this.state.failed_calculate_withdraw&&(m=this.state.failed_calculate_withdraw);var h=r.a.createElement(c.a,{content:\"gateway.calc\"});if(null!=this.state.failed_calculate_conversion&&(h=this.state.failed_calculate_conversion),Object.getOwnPropertyNames(this.state.allowed_mappings_for_deposit).length>0){var f=[];Object.keys(this.state.allowed_mappings_for_deposit).sort().forEach(function(t){f.push(r.a.createElement(\"option\",{key:t,value:t||\"\"},e.state.coins_by_type[t].symbol))});var y=r.a.createElement(\"select\",{style:{width:\"11rem\"},className:\"external-coin-types\",value:this.state.deposit_input_coin_type||\"\",onChange:this.onInputCoinTypeChanged.bind(this,\"deposit\")},f),g=[];this.state.allowed_mappings_for_deposit[this.state.deposit_input_coin_type].forEach(function(t){g.push(r.a.createElement(\"option\",{key:t,value:t||\"\"},e.state.coins_by_type[t].walletSymbol))});var w=r.a.createElement(\"select\",{style:{width:\"11rem\"},className:\"native-coin-types\",value:this.state.deposit_output_coin_type||\"\",onChange:this.onOutputCoinTypeChanged.bind(this,\"deposit\")},g),v=this.state.input_address_and_memo?this.state.input_address_and_memo:{address:\"unknown\",memo:null},b=this.state.deposit_estimated_input_amount,E=this.state.deposit_estimated_output_amount,k=b?r.a.createElement(\"input\",{style:{width:\"11rem\"},type:\"text\",value:b||\"\",onChange:this.onInputAmountChanged.bind(this,\"deposit\")}):p,C=E?r.a.createElement(\"input\",{style:{width:\"11rem\"},type:\"text\",value:E||\"\",onChange:this.onOutputAmountChanged.bind(this,\"deposit\")}):p,S=r.a.createElement(\"span\",null,\"updating\");this.state.deposit_limit&&(S=this.state.deposit_limit.limit?r.a.createElement(\"div\",{className:\"blocktrades-bridge\"},r.a.createElement(\"span\",{className:\"deposit-limit\"},r.a.createElement(c.a,{content:\"gateway.limit\",amount:_.a.format_number(this.state.deposit_limit.limit,8),symbol:this.state.coins_by_type[this.state.deposit_input_coin_type].walletSymbol}))):null);var A=null;this.state.deposit_error&&(A=r.a.createElement(\"div\",null,this.state.deposit_error)),n=r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null,r.a.createElement(c.a,{content:\"gateway.deposit\"})),r.a.createElement(\"th\",null,r.a.createElement(c.a,{content:\"gateway.balance\"})),r.a.createElement(\"th\",null,r.a.createElement(c.a,{content:\"gateway.deposit_to\",asset:this.state.deposit_input_coin_type}))));var O=null;O=v.memo?r.a.createElement(c.a,{unsafe:!0,content:\"gateway.address_with_memo\",address:v.address,memo:v.memo}):r.a.createElement(\"span\",null,v.address),a=r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(\"div\",{className:\"blocktrades-bridge\"},r.a.createElement(\"div\",{className:\"inline-block\"},r.a.createElement(\"div\",null,y),r.a.createElement(\"div\",null,k)),\"â\",r.a.createElement(\"div\",{className:\"inline-block\"},r.a.createElement(\"div\",null,w),r.a.createElement(\"div\",null,C)),r.a.createElement(\"div\",null,A))),r.a.createElement(\"td\",null,r.a.createElement(d.a,{account:this.props.account.get(\"name\"),asset:this.state.coins_by_type[this.state.deposit_output_coin_type].walletSymbol})),r.a.createElement(\"td\",null,O,r.a.createElement(\"br\",null),S)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_withdraw).length>0){this.state.coins_by_type[this.state.withdraw_input_coin_type].symbol;u=this.state.withdraw_estimated_input_amount;var N=[];Object.keys(this.state.allowed_mappings_for_withdraw).sort().forEach(function(t){N.push(r.a.createElement(\"option\",{key:t,value:t},e.state.coins_by_type[t].walletSymbol))});var x=r.a.createElement(\"select\",{style:{width:\"11rem\"},className:\"native-coin-types\",value:this.state.withdraw_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,\"withdraw\")},N),T=[];this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type].forEach(function(t){T.push(r.a.createElement(\"option\",{key:t,value:t},e.state.coins_by_type[t].symbol))});var j=r.a.createElement(\"select\",{style:{width:\"11rem\"},className:\"external-coin-types\",value:this.state.withdraw_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,\"withdraw\")},T),I=this.state.withdraw_estimated_input_amount,P=I?r.a.createElement(\"input\",{style:{width:\"11rem\"},type:\"text\",value:I||\"\",onChange:this.onInputAmountChanged.bind(this,\"withdraw\")}):m,D=this.state.withdraw_estimated_output_amount,F=D?r.a.createElement(\"input\",{style:{width:\"11rem\"},type:\"text\",value:D||\"\",onChange:this.onOutputAmountChanged.bind(this,\"withdraw\")}):m,R=r.a.createElement(B,{visible:this.state.isModalVisible,hideModal:this.hideModal,showModal:this.showModal,key:this.state.key_for_withdrawal_dialog,account:this.props.account.get(\"name\"),issuer:this.props.issuer_account.get(\"name\"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol,output_coin_name:this.state.coins_by_type[this.state.withdraw_output_coin_type].name,output_coin_symbol:this.state.coins_by_type[this.state.withdraw_output_coin_type].symbol,output_coin_type:this.state.withdraw_output_coin_type,output_supports_memos:this.state.supports_output_memos,amount_to_withdraw:u,url:this.state.url,gateway:this.props.gateway,output_wallet_type:this.state.coins_by_type[this.state.withdraw_output_coin_type].walletType}),q=null;this.state.withdraw_error&&(q=r.a.createElement(\"div\",null,this.state.withdraw_error));var W=r.a.createElement(\"span\",null,\"...\");this.state.withdraw_limit&&(W=this.state.withdraw_limit.limit?r.a.createElement(\"div\",{className:\"blocktrades-bridge\"},r.a.createElement(\"span\",{className:\"deposit-limit\"},r.a.createElement(c.a,{content:\"gateway.limit\",amount:_.a.format_number(this.state.withdraw_limit.limit,8),symbol:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol}))):r.a.createElement(\"div\",{className:\"blocktrades-bridge\"},r.a.createElement(\"span\",{className:\"deposit-limit\"},\"no limit\"))),i=r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null,r.a.createElement(c.a,{content:\"gateway.withdraw\"})),r.a.createElement(\"th\",null,r.a.createElement(c.a,{content:\"gateway.balance\"})),r.a.createElement(\"th\",null))),s=r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(\"div\",{className:\"blocktrades-bridge\"},r.a.createElement(\"div\",{className:\"inline-block\"},r.a.createElement(\"div\",null,x),r.a.createElement(\"div\",null,P)),\"â\",r.a.createElement(\"div\",{className:\"inline-block\"},r.a.createElement(\"div\",null,j),r.a.createElement(\"div\",null,F)),r.a.createElement(\"div\",null,q))),r.a.createElement(\"td\",null,r.a.createElement(d.a,{account:this.props.account.get(\"name\"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol})),r.a.createElement(\"td\",null,R,r.a.createElement(\"br\",null),W)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_conversion).length>0){var L=[];Object.keys(this.state.allowed_mappings_for_conversion).sort().forEach(function(t){L.push(r.a.createElement(\"option\",{key:t,value:t},e.state.coins_by_type[t].walletSymbol))});var U=r.a.createElement(\"select\",{style:{width:\"11rem\"},className:\"native-coin-types\",value:this.state.conversion_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,\"conversion\")},L),V=[];this.state.allowed_mappings_for_conversion[this.state.conversion_input_coin_type].forEach(function(t){V.push(r.a.createElement(\"option\",{key:t,value:t},e.state.coins_by_type[t].symbol))});var H=r.a.createElement(\"select\",{style:{width:\"11rem\"},className:\"external-coin-types\",value:this.state.conversion_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,\"conversion\")},V),J=this.state.conversion_estimated_input_amount,G=J?r.a.createElement(\"input\",{style:{width:\"11rem\"},type:\"text\",value:J||\"\",onChange:this.onInputAmountChanged.bind(this,\"conversion\")}):h,X=this.state.conversion_estimated_output_amount,z=X?r.a.createElement(\"input\",{style:{width:\"11rem\"},type:\"text\",value:X||\"\",onChange:this.onOutputAmountChanged.bind(this,\"conversion\")}):h,K=r.a.createElement(M,{asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol,account:this.props.account,input_coin_type:this.state.conversion_input_coin_type,output_coin_type:this.state.conversion_output_coin_type,account_name:this.props.account.get(\"name\"),amount:this.state.conversion_estimated_input_amount,account_id:this.props.account.get(\"id\"),account_balances:this.props.account.get(\"balances\"),url:this.state.url}),Q=null;this.state.conversion_error&&(Q=r.a.createElement(\"div\",null,this.state.conversion_error));var Y=r.a.createElement(\"span\",null,\"...\");this.state.conversion_limit&&(Y=this.state.conversion_limit.limit?r.a.createElement(\"div\",{className:\"blocktrades-bridge\"},r.a.createElement(\"span\",{className:\"deposit-limit\"},r.a.createElement(c.a,{content:\"gateway.limit\",amount:_.a.format_number(this.state.conversion_limit.limit,8),symbol:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol}))):r.a.createElement(\"div\",{className:\"blocktrades-bridge\"},r.a.createElement(\"span\",{className:\"deposit-limit\"},\"no limit\"))),l=r.a.createElement(\"thead\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"th\",null,r.a.createElement(c.a,{content:\"gateway.convert\"})),r.a.createElement(\"th\",null,r.a.createElement(c.a,{content:\"gateway.balance\"})),r.a.createElement(\"th\",null))),o=r.a.createElement(\"tbody\",null,r.a.createElement(\"tr\",null,r.a.createElement(\"td\",null,r.a.createElement(\"div\",{className:\"blocktrades-bridge\"},r.a.createElement(\"div\",{className:\"inline-block\"},r.a.createElement(\"div\",null,U),r.a.createElement(\"div\",null,G)),\"â\",r.a.createElement(\"div\",{className:\"inline-block\"},r.a.createElement(\"div\",null,H),r.a.createElement(\"div\",null,z)),r.a.createElement(\"div\",null,Q))),r.a.createElement(\"td\",null,r.a.createElement(d.a,{account:this.props.account.get(\"name\"),asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol})),r.a.createElement(\"td\",null,K,r.a.createElement(\"br\",null),Y)))}return this.state.announcements.length>0&&(t=r.a.createElement(\"div\",{className:\"blocktrades-announcements-container\"},this.state.announcements.map(function(e,t){var a=\"txtann info\";return 10===e.status?a=\"txtann error\":20===e.status?a=\"txtann warning\":30===e.status?a=\"txtann success\":40===e.status&&(a=\"txtann info\"),1===e.format&&e.message.replace(/\\r\\n|\\r|\\n/g,\"<br />\"),r.a.createElement(\"div\",{className:\"blocktrades-announcements \"+a,key:t},e.message)},this))),r.a.createElement(\"div\",null,r.a.createElement(\"div\",{style:{paddingBottom:15}},r.a.createElement(c.a,{component:\"h5\",content:\"gateway.bridge_text\"})),t,r.a.createElement(\"table\",{className:\"table\"},n,a,i,s,l,o))}}]),t}();P.propTypes={url:k.a.string,gateway:k.a.string,account:u.a.ChainAccount,issuer_account:u.a.ChainAccount,initial_deposit_input_coin_type:k.a.string,initial_deposit_output_coin_type:k.a.string,initial_deposit_estimated_input_amount:k.a.string,initial_withdraw_input_coin_type:k.a.string,initial_withdraw_output_coin_type:k.a.string,initial_withdraw_estimated_input_amount:k.a.string,initial_conversion_input_coin_type:k.a.string,initial_conversion_output_coin_type:k.a.string,initial_conversion_estimated_input_amount:k.a.string},t.a=Object(p.a)(P)}).call(this,a(120).Buffer)},2187:function(e,t,a){\"use strict\";(function(e){var n=a(322),s=a(0),i=a.n(s),o=a(3),r=a.n(o),l=a(39),c=a(46),u=a(14),p=a(197),d=a(9),m=a.n(d),h=a(109),_=a(36),f=a(80),y=a(12),g=a(106),w=a(27),v=a(11),b=a(1),E=a.n(b),k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var C=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={isConfirmationModalVisible:!1,withdraw_amount:t.props.amount_to_withdraw,withdraw_address:f.a.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:f.a.getLast(e.output_wallet_type),memo:\"\",withdraw_address_first:!0,empty_withdraw_value:!1,from_account:e.account,fee_asset_id:\"1.3.0\",feeStatus:{}},t._validateAddress(t.state.withdraw_address,e),t._checkBalance=t._checkBalance.bind(t),t._updateFee=Object(n.a)(t._updateFee.bind(t),250),t.showConfirmationModal=t.showConfirmationModal.bind(t),t.hideConfirmationModal=t.hideConfirmationModal.bind(t),t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.a.Component),k(a,[{key:\"componentWillMount\",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:\"componentWillUnmount\",value:function(){this.unMounted=!0}},{key:\"componentWillReceiveProps\",value:function(e){var t=this;e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:\"1.3.0\",feeAmount:new w.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:\"showConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!0})}},{key:\"hideConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!1})}},{key:\"_updateFee\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.fee_asset_id,n=t.from_account,s=this._getAvailableAssets(t).fee_asset_types;if(1===s.length&&s[0]!==a&&(a=s[0]),!n)return null;Object(g.b)({accountID:n.get(\"id\"),feeID:a,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:this.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkBalance)})}},{key:\"_checkFeeStatus\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.from_account;if(a){var n=this._getAvailableAssets(t).fee_asset_types,s={},i=[];n.forEach(function(n){i.push(Object(g.b)({accountID:a.get(\"id\"),feeID:n,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:e.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}))}),Promise.all(i).then(function(a){n.forEach(function(e,t){s[e]=a[t]}),u.a.are_equal_shallow(t.feeStatus,s)||e.setState({feeStatus:s}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:\"onMemoChanged\",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:\"onWithdrawAmountChange\",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},this._checkBalance)}},{key:\"onSelectChanged\",value:function(e){var t=f.a.get(this.props.output_wallet_type)[e];f.a.setLast({wallet:this.props.output_wallet_type,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"onWithdrawAddressChanged\",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"_validateAddress\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(f.m)({url:a.url,walletType:a.output_wallet_type,newAddress:e}).then(function(a){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:a})})}},{key:\"_checkBalance\",value:function(){var e=this.state,t=e.feeAmount,a=e.withdraw_amount,n=this.props,s=n.asset,i=n.balance;if(i&&t){var o=Object(g.a)(a,s,t,i);if(null!==o)return this.setState({balanceError:!o}),o}}},{key:\"onSubmit\",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(f.a.has(this.props.output_wallet_type)){var t=f.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:a})}f.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=this.state.feeAmount,i=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\")),o=void 0!==this.props.gateFee?parseFloat(String.prototype.replace.call(this.props.gateFee,/,/g,\"\")):0,r=new w.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:i}),l=new w.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:0});void 0!==this.props.balance&&(l=r.clone(this.props.balance.get(\"balance\")));var c=new w.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:o});r.plus(c),l.lt(r)&&(r=l),_.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),r.getAmount(),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,s?s.asset_id:\"1.3.0\"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else this.showConfirmationModal()}},{key:\"onSubmitConfirmation\",value:function(){if(this.hideConfirmationModal(),f.a.has(this.props.output_wallet_type)){var t=f.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:a})}f.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=u.a.get_asset_precision(n.get(\"precision\")),i=String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\"),o=this.state.feeAmount;_.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),parseInt(i*s,10),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,o?o.asset_id:\"1.3.0\")}},{key:\"onDropDownList\",value:function(){f.a.has(this.props.output_wallet_type)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:\"getWithdrawModalId\",value:function(){return\"confirmation\"}},{key:\"onAccountBalance\",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get(\"balances\").toJS()).includes(this.props.asset.get(\"id\"))){var t=new w.a({amount:this.props.balance.get(\"balance\"),asset_id:this.props.asset.get(\"id\"),precision:this.props.asset.get(\"precision\")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:\"setNestedRef\",value:function(e){this.nestedRef=e}},{key:\"onFeeChanged\",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get(\"id\")},this._updateFee)}},{key:\"_getAvailableAssets\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,a=e.feeStatus;var n=[];if(!t||!t.get(\"balances\"))return{fee_asset_types:n};var s=e.from_account.get(\"balances\").toJS();for(var i in n=Object.keys(s).sort(u.a.sortID),s){var o=y.ChainStore.getObject(i),r=y.ChainStore.getObject(s[i]);if(r&&0===r.get(\"balance\")&&-1!==n.indexOf(i)&&n.splice(n.indexOf(i),1),o){var l=!1;try{l=new w.i({base:new w.a(o.getIn([\"options\",\"core_exchange_rate\",\"base\"]).toJS()),quote:new w.a(o.getIn([\"options\",\"core_exchange_rate\",\"quote\"]).toJS())}).isValid()}catch(e){l=!1}\"1.3.0\"===o.get(\"id\")||l||n.splice(n.indexOf(i),1)}}return{fee_asset_types:n=n.filter(function(e){return function(e){return void 0===a[e]||a[e]&&a[e].hasPoolBalance}(e)&&function(e){return void 0===a[e]||a[e]&&a[e].hasBalance}(e)})}}},{key:\"render\",value:function(){var e=this.state,t=e.withdraw_address_selected,a=e.memo,n=f.a.get(this.props.output_wallet_type),s=null,o=this.props.account.get(\"balances\").toJS(),l=Object.keys(o),c=(this.getWithdrawModalId(),null),u=null,d=null;this.state.options_is_valid&&(u=i.a.createElement(\"div\",{className:n.length?\"blocktrades-options\":\"blocktrades-disabled-options\"},n.map(function(e,t){return i.a.createElement(\"a\",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(c=i.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"gateway.valid_address\",coin_type:this.props.output_coin_type})),d=i.a.createElement(v.Modal,{closable:!1,footer:[i.a.createElement(v.Button,{key:\"submit\",type:\"primary\",onClick:this.onSubmitConfirmation.bind(this)},m.a.translate(\"modal.confirmation.accept\")),i.a.createElement(v.Button,{key:\"cancel\",style:{marginLeft:\"8px\"},onClick:this.hideConfirmationModal},m.a.translate(\"modal.confirmation.cancel\"))],visible:this.state.isConfirmationModalVisible,onCancel:this.hideConfirmationModal},i.a.createElement(\"label\",null,i.a.createElement(r.a,{content:\"modal.confirmation.title\"})))));var _=1,y=null;this.props.output_supports_memos&&(y=i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(\"label\",null,i.a.createElement(r.a,{component:\"span\",content:\"transfer.memo\"})),i.a.createElement(\"textarea\",{rows:\"3\",value:a,tabIndex:_++,onChange:this.onMemoChanged.bind(this)})));var g=this._getAvailableAssets().fee_asset_types;if(l.length>0){var w=this.props.asset.get(\"id\");if(w){var b=o[w];s=i.a.createElement(\"span\",{style:{borderBottom:\"#A09F9F 1px dotted\",cursor:\"pointer\"}},i.a.createElement(r.a,{component:\"span\",content:\"transfer.available\"}),\"Â :Â \",i.a.createElement(\"span\",{className:\"set-cursor\",onClick:this.onAccountBalance.bind(this)},b?i.a.createElement(p.a,{balance:o[w]}):0))}else s=\"No funds\"}else s=\"No funds\";var E=this.state.error||this.state.balanceError||!this.state.withdraw_amount;return i.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\",style:{paddingTop:0}},i.a.createElement(\"div\",{className:\"grid-container\"},i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(h.a,{label:\"modal.withdraw.amount\",amount:this.state.withdraw_amount,asset:this.props.asset.get(\"id\"),assets:[this.props.asset.get(\"id\")],placeholder:\"0.0\",onChange:this.onWithdrawAmountChange.bind(this),display_balance:s}),this.state.empty_withdraw_value?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.valid\"})):null,this.state.balanceError?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.insufficient\"})):null),this.state.feeAmount?i.a.createElement(\"div\",{className:\"content-block gate_fee\"},i.a.createElement(h.a,{refCallback:this.setNestedRef.bind(this),label:\"transfer.fee\",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:g,tabIndex:_++}),this.state.hasBalance?null:i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.noFeeBalance\"})),this.state.hasPoolBalance?null:i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.noPoolBalance\"}))):null,this.props.gateFee?i.a.createElement(\"div\",{className:\"amount-selector right-selector\",style:{paddingBottom:20}},i.a.createElement(\"label\",{className:\"left-label\"},i.a.createElement(r.a,{content:\"gateway.fee\"})),i.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},i.a.createElement(\"input\",{type:\"text\",disabled:!0,value:this.props.gateFee}),i.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},i.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},i.a.createElement(\"div\",null,this.props.output_coin_symbol))))):null,i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(\"label\",{className:\"left-label\"},i.a.createElement(r.a,{component:\"span\",content:\"modal.withdraw.address\"})),i.a.createElement(\"div\",{className:\"blocktrades-select-dropdown\"},i.a.createElement(\"div\",{className:\"inline-label\"},i.a.createElement(\"input\",{type:\"text\",value:t,tabIndex:\"4\",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:\"off\"}),i.a.createElement(\"span\",{onClick:this.onDropDownList.bind(this)},\"â¼\"))),i.a.createElement(\"div\",{className:\"blocktrades-position-options\"},u),c),y,i.a.createElement(\"div\",null,i.a.createElement(v.Button,{type:\"primary\",disabled:E,onClick:this.onSubmit.bind(this)},m.a.translate(\"modal.withdraw.submit\")),i.a.createElement(v.Button,{onClick:this.props.hideModal,style:{marginLeft:\"8px\"}},m.a.translate(\"account.perm.cancel\"))),d))}}]),a}();C.propTypes={account:l.a.ChainAccount.isRequired,issuer:l.a.ChainAccount.isRequired,asset:l.a.ChainAsset.isRequired,output_coin_name:E.a.string.isRequired,output_coin_symbol:E.a.string.isRequired,output_coin_type:E.a.string.isRequired,url:E.a.string,output_wallet_type:E.a.string,output_supports_memos:E.a.bool.isRequired,amount_to_withdraw:E.a.string,balance:l.a.ChainObject},t.a=Object(c.a)(C)}).call(this,a(120).Buffer)},2188:function(e,t,a){\"use strict\";(function(e){var n=a(0),s=a.n(n),i=a(39),o=a(46),r=a(3),l=a.n(r),c=a(5),u=a.n(c),p=a(74),d=a(36),m=a(23),h=a(2008),_=a(14),f=(a(25),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}());var y=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t.state={action:e.viewSettings.get(\"bktAction\",\"deposit\"),min:50,max:1e5},t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.a.Component),f(a,[{key:\"_renderDeposits\",value:function(){}},{key:\"_renderWithdrawals\",value:function(){return s.a.createElement(\"form\",{onSubmit:this._onSubmit.bind(this)},s.a.createElement(\"div\",{style:{padding:\"20px 0\"}},s.a.createElement(l.a,{content:\"gateway.balance\"}),\": Â \",s.a.createElement(\"span\",{style:{fontWeight:\"bold\",color:\"#4A90E2\",textAlign:\"right\"}},s.a.createElement(h.a,{account:this.props.account.get(\"name\"),asset:this.props.asset.get(\"symbol\")}))),s.a.createElement(\"label\",null,s.a.createElement(l.a,{content:\"exchange.quantity\"}),s.a.createElement(\"input\",{ref:\"amount\",required:!0,id:\"amount\",type:\"number\",min:this.state.min,max:this.state.max})),s.a.createElement(\"label\",null,s.a.createElement(l.a,{content:\"gateway.iban\"}),s.a.createElement(\"input\",{ref:\"iban\",required:!0,id:\"iban\",type:\"text\"})),s.a.createElement(\"button\",{className:\"button\",type:\"submit\"},s.a.createElement(l.a,{content:\"gateway.withdraw_now\"})))}},{key:\"changeAction\",value:function(e){this.setState({action:e}),m.a.changeViewSetting({bktAction:e})}},{key:\"_onSubmit\",value:function(t){var a=this;t.preventDefault();var n=this.state,s=n.min,i=n.max,o=this.props,r=o.asset,l=o.account,c=o.bitKapital,u=parseInt(this.refs.amount.value,10),m=this.refs.iban.value;console.log(\"amount:\",u,\"iban:\",m);var h=_.a.get_asset_precision(r.get(\"precision\"));u<s||u>i||d.a.transfer(l.get(\"id\"),c.get(\"id\"),parseInt(u*h,10),r.get(\"id\"),new e(\"BOZDURMA - \"+m.toUpperCase(),\"utf-8\"),null,r.get(\"id\")).then(function(){p.a.unlisten(a.onTrxIncluded),p.a.listen(a.onTrxIncluded)})}},{key:\"onTrxIncluded\",value:function(e){e.included&&e.broadcasted_transaction?(p.a.unlisten(this.onTrxIncluded),p.a.reset()):e.closed&&(p.a.unlisten(this.onTrxIncluded),p.a.reset())}},{key:\"render\",value:function(){var e=this.props,t=(e.jianjolly,e.onay,e.account,this.state.action);return s.a.createElement(\"div\",{className:\"BitKapital\"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"div\",{style:{paddingBottom:15}},s.a.createElement(\"div\",{style:{marginRight:10},onClick:this.changeAction.bind(this,\"deposit\"),className:u()(\"button\",\"deposit\"===t?\"active\":\"outline\")},s.a.createElement(l.a,{content:\"gateway.deposit\"})),s.a.createElement(\"div\",{onClick:this.changeAction.bind(this,\"withdraw\"),className:u()(\"button\",\"withdraw\"===t?\"active\":\"outline\")},s.a.createElement(l.a,{content:\"gateway.withdraw\"}))),\"deposit\"===t?this._renderDeposits():this._renderWithdrawals()))}}]),a}();y.propTypes={jianjolly:i.a.ChainAccount.isRequired,onay:i.a.ChainAccount.isRequired,bitKapital:i.a.ChainAccount.isRequired,asset:i.a.ChainAsset.isRequired},y.defaultProps={jianjolly:\"1.2.126253\",bitKapital:\"1.2.130090\",onay:\"1.2.139289\",asset:\"KAPITAL\"},t.a=Object(o.a)(y)}).call(this,a(120).Buffer)},2189:function(e,t,a){\"use strict\";(function(e){var n=a(322),s=a(0),i=a.n(s),o=a(3),r=a.n(o),l=a(39),c=a(46),u=a(14),p=a(197),d=a(9),m=a.n(d),h=a(109),_=a(36),f=a(2190),y=a(12),g=a(106),w=a(27),v=a(1),b=a.n(v),E=a(11),k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var C=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={isConfirmationModalVisible:!1,withdraw_amount:t.props.amount_to_withdraw,withdraw_address:f.a.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:f.a.getLast(e.output_wallet_type),memo:\"\",withdraw_address_first:!0,empty_withdraw_value:!1,from_account:e.account,fee_asset_id:\"1.3.0\",feeStatus:{}},t._validateAddress(t.state.withdraw_address,e),t._checkBalance=t._checkBalance.bind(t),t._checkMinAmount=t._checkMinAmount.bind(t),t._updateFee=Object(n.a)(t._updateFee.bind(t),250),t.showConfirmationModal=t.showConfirmationModal.bind(t),t.hideConfirmationModal=t.hideConfirmationModal.bind(t),t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.a.Component),k(a,[{key:\"componentWillMount\",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:\"componentWillUnmount\",value:function(){this.unMounted=!0}},{key:\"componentWillReceiveProps\",value:function(e){var t=this;e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:\"1.3.0\",feeAmount:new w.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:\"showConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!0})}},{key:\"hideConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!1})}},{key:\"_updateFee\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.fee_asset_id,n=t.from_account,s=this._getAvailableAssets(t).fee_asset_types;if(1===s.length&&s[0]!==a&&(a=s[0]),!n)return null;Object(g.b)({accountID:n.get(\"id\"),feeID:a,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:this.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkBalance)})}},{key:\"_checkFeeStatus\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.from_account;if(a){var n=this._getAvailableAssets(t).fee_asset_types,s={},i=[];n.forEach(function(n){i.push(Object(g.b)({accountID:a.get(\"id\"),feeID:n,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:e.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}))}),Promise.all(i).then(function(a){n.forEach(function(e,t){s[e]=a[t]}),u.a.are_equal_shallow(t.feeStatus,s)||e.setState({feeStatus:s}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:\"onMemoChanged\",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:\"onWithdrawAmountChange\",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},function(){this._checkBalance,this._checkMinAmount()})}},{key:\"onSelectChanged\",value:function(e){var t=f.a.get(this.props.output_wallet_type)[e];f.a.setLast({wallet:this.props.output_wallet_type,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"onWithdrawAddressChanged\",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"_validateAddress\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(f.b)({url:a.url,walletType:a.output_wallet_type,newAddress:e}).then(function(a){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:a})})}},{key:\"_checkBalance\",value:function(){var e=this.state,t=e.feeAmount,a=e.withdraw_amount,n=this.props,s=n.asset,i=n.balance;if(i&&t){var o=Object(g.a)(a,s,t,i);if(null!==o)return this.setState({balanceError:!o}),o}}},{key:\"_checkMinAmount\",value:function(){var e=this.state.withdraw_amount;if(null!==e){var t=e<this.props.min_amount/u.a.get_asset_precision(this.props.asset_precision);return console.log(\"X\",e,this.props.min_amount/u.a.get_asset_precision(this.props.asset_precision)),this.setState({minAmountError:t}),t}}},{key:\"onSubmit\",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(f.a.has(this.props.output_wallet_type)){var t=f.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:a})}f.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=this.state.feeAmount,i=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\")),o=new w.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:i});_.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),o.getAmount(),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,s?s.asset_id:\"1.3.0\"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else this.showConfirmationModal()}},{key:\"onSubmitConfirmation\",value:function(){if(this.hideConfirmationModal(),f.a.has(this.props.output_wallet_type)){var t=f.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:a})}f.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=u.a.get_asset_precision(n.get(\"precision\")),i=String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\"),o=this.state.feeAmount;_.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),parseInt(i*s,10),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,o?o.asset_id:\"1.3.0\")}},{key:\"onDropDownList\",value:function(){f.a.has(this.props.output_wallet_type)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:\"getWithdrawModalId\",value:function(){return\"confirmation\"}},{key:\"onAccountBalance\",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get(\"balances\").toJS()).includes(this.props.asset.get(\"id\"))){var t=new w.a({amount:this.props.balance.get(\"balance\"),asset_id:this.props.asset.get(\"id\"),precision:this.props.asset.get(\"precision\")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:\"setNestedRef\",value:function(e){this.nestedRef=e}},{key:\"onFeeChanged\",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get(\"id\")},this._updateFee)}},{key:\"_getAvailableAssets\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,a=e.feeStatus;var n=[];if(!t||!t.get(\"balances\"))return{fee_asset_types:n};var s=e.from_account.get(\"balances\").toJS();for(var i in n=Object.keys(s).sort(u.a.sortID),s){var o=y.ChainStore.getObject(i),r=y.ChainStore.getObject(s[i]);if(r&&0===r.get(\"balance\")&&-1!==n.indexOf(i)&&n.splice(n.indexOf(i),1),o){var l=!1;try{l=new w.i({base:new w.a(o.getIn([\"options\",\"core_exchange_rate\",\"base\"]).toJS()),quote:new w.a(o.getIn([\"options\",\"core_exchange_rate\",\"quote\"]).toJS())}).isValid()}catch(e){l=!1}\"1.3.0\"===o.get(\"id\")||l||n.splice(n.indexOf(i),1)}}return{fee_asset_types:n=n.filter(function(e){return function(e){return void 0===a[e]||a[e]&&a[e].hasPoolBalance}(e)&&function(e){return void 0===a[e]||a[e]&&a[e].hasBalance}(e)})}}},{key:\"render\",value:function(){var e=this.state,t=e.withdraw_address_selected,a=e.memo,n=f.a.get(this.props.output_wallet_type),s=null,o=this.props.account.get(\"balances\").toJS(),l=Object.keys(o),c=(this.getWithdrawModalId(),null),d=null,_=null;this.state.options_is_valid&&(d=i.a.createElement(\"div\",{className:n.length?\"rudex-options\":\"rudex-disabled-options\"},n.map(function(e,t){return i.a.createElement(\"a\",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(c=i.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"gateway.valid_address\",coin_type:this.props.output_coin_type})),_=i.a.createElement(E.Modal,{closable:!1,footer:[i.a.createElement(E.Button,{key:\"submit\",type:\"primary\",onClick:this.onSubmitConfirmation.bind(this)},m.a.translate(\"modal.confirmation.accept\")),i.a.createElement(E.Button,{key:\"cancel\",style:{marginLeft:\"8px\"},onClick:this.hideConfirmationModal},m.a.translate(\"modal.confirmation.cancel\"))],visible:this.state.isConfirmationModalVisible,onCancel:this.hideConfirmationModal},i.a.createElement(\"label\",null,i.a.createElement(r.a,{content:\"modal.confirmation.title\"})))));var y=1,g=null;this.props.output_supports_memos&&(g=i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(\"label\",null,i.a.createElement(r.a,{component:\"span\",content:\"transfer.memo\"})),i.a.createElement(\"textarea\",{rows:\"3\",value:a,tabIndex:y++,onChange:this.onMemoChanged.bind(this)})));var w=this._getAvailableAssets().fee_asset_types;if(l.length>0){var v=this.props.asset.get(\"id\");if(v){var b=o[v];s=i.a.createElement(\"span\",{style:{borderBottom:\"#A09F9F 1px dotted\",cursor:\"pointer\"}},i.a.createElement(r.a,{component:\"span\",content:\"transfer.available\"}),\"Â :Â \",i.a.createElement(\"span\",{className:\"set-cursor\",onClick:this.onAccountBalance.bind(this)},b?i.a.createElement(p.a,{balance:o[v]}):0))}else s=\"No funds\"}else s=\"No funds\";return i.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\",style:{paddingTop:\"0px\"}},i.a.createElement(\"div\",{className:\"grid-container\"},i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(h.a,{label:\"modal.withdraw.amount\",amount:this.state.withdraw_amount,asset:this.props.asset.get(\"id\"),assets:[this.props.asset.get(\"id\")],placeholder:\"0.0\",onChange:this.onWithdrawAmountChange.bind(this),display_balance:s}),this.state.empty_withdraw_value?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.valid\"})):null,this.state.balanceError?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.insufficient\"})):null,this.state.minAmountError?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"gateway.rudex.min_amount_error\"})):null,i.a.createElement(\"p\",{className:\"no-margin\",style:{paddingTop:10}},i.a.createElement(\"b\",null,i.a.createElement(r.a,{content:\"gateway.rudex.min_amount\",minAmount:u.a.format_number(this.props.min_amount/u.a.get_asset_precision(this.props.asset_precision),this.props.asset_precision,!1),symbol:this.props.output_coin_symbol})))),this.state.feeAmount?i.a.createElement(\"div\",{className:\"content-block gate_fee\"},i.a.createElement(h.a,{refCallback:this.setNestedRef.bind(this),label:\"transfer.fee\",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:w,tabIndex:y++}),this.state.hasBalance?null:i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.noFeeBalance\"})),this.state.hasPoolBalance?null:i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.noPoolBalance\"}))):null,this.props.gateFee?i.a.createElement(\"div\",{className:\"amount-selector right-selector\",style:{paddingBottom:20}},i.a.createElement(\"label\",{className:\"left-label\"},i.a.createElement(r.a,{content:\"gateway.fee\"})),i.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},i.a.createElement(\"input\",{type:\"text\",disabled:!0,value:this.props.gateFee}),i.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},i.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},i.a.createElement(\"div\",null,this.props.output_coin_symbol))))):null,i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(\"label\",{className:\"left-label\"},i.a.createElement(r.a,{component:\"span\",content:\"modal.withdraw.address\"})),i.a.createElement(\"div\",{className:\"rudex-select-dropdown\"},i.a.createElement(\"div\",{className:\"inline-label\"},i.a.createElement(\"input\",{type:\"text\",value:t,tabIndex:\"4\",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:\"off\"}),i.a.createElement(\"span\",{onClick:this.onDropDownList.bind(this)},\"â¼\"))),i.a.createElement(\"div\",{className:\"rudex-position-options\"},d),c),g,i.a.createElement(\"div\",null,i.a.createElement(E.Button,{disabled:this.state.error||this.state.balanceError||this.state.minAmountError,type:\"primary\",onClick:this.onSubmit.bind(this)},m.a.translate(\"modal.withdraw.submit\")),i.a.createElement(E.Button,{onClick:this.props.hideModal,style:{marginLeft:\"8px\"}},m.a.translate(\"account.perm.cancel\"))),_))}}]),a}();C.propTypes={account:l.a.ChainAccount.isRequired,issuer:l.a.ChainAccount.isRequired,asset:l.a.ChainAsset.isRequired,output_coin_name:b.a.string.isRequired,output_coin_symbol:b.a.string.isRequired,output_coin_type:b.a.string.isRequired,url:b.a.string,output_wallet_type:b.a.string,output_supports_memos:b.a.bool.isRequired,amount_to_withdraw:b.a.string,balance:l.a.ChainObject,min_amount:b.a.number},t.a=Object(c.a)(C)}).call(this,a(120).Buffer)},2190:function(e,t,a){\"use strict\";a.d(t,\"b\",function(){return o}),a.d(t,\"a\",function(){return r});var n=a(59),s=a(42),i=new n.a(\"\");function o(e){var t=e.url,a=void 0===t?s.i.BASE:t,n=e.walletType,i=e.newAddress;return i?fetch(a+\"/wallets/\"+n+\"/check-address\",{method:\"post\",headers:new Headers({Accept:\"application/json\",\"Content-Type\":\"application/json\"}),body:JSON.stringify({address:i})}).then(function(e){return e.json().then(function(e){return e.isValid})}).catch(function(e){console.log(\"validate error:\",e)}):new Promise(function(e){return e()})}var r={has:function(e){return i.has(\"history_address_\"+e)},set:function(e){var t=e.wallet,a=e.addresses;i.set(\"history_address_\"+t,a)},get:function(e){return i.get(\"history_address_\"+e,[])},setLast:function(e){var t=e.wallet,a=e.address;i.set(\"history_address_last_\"+t,a)},getLast:function(e){return i.get(\"history_address_last_\"+e,\"\")}}},2191:function(e,t,a){\"use strict\";(function(e){var n=a(322),s=a(0),i=a.n(s),o=a(3),r=a.n(o),l=a(39),c=a(46),u=a(14),p=a(197),d=a(9),m=a.n(d),h=a(109),_=a(36),f=a(80),y=a(12),g=a(106),w=a(27),v=a(11),b=a(1),E=a.n(b),k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var C=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={isConfirmationModalVisible:!1,withdraw_amount:t.props.amount_to_withdraw,withdraw_address:f.a.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:f.a.getLast(e.output_wallet_type),memo:\"\",withdraw_address_first:!0,empty_withdraw_value:!1,from_account:e.account,fee_asset_id:\"1.3.0\",feeStatus:{}},t._validateAddress(t.state.withdraw_address,e),t._checkBalance=t._checkBalance.bind(t),t._updateFee=Object(n.a)(t._updateFee.bind(t),250),t.showConfirmationModal=t.showConfirmationModal.bind(t),t.hideConfirmationModal=t.hideConfirmationModal.bind(t),t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.a.Component),k(a,[{key:\"showConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!0})}},{key:\"hideConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!1})}},{key:\"componentWillMount\",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:\"componentWillUnmount\",value:function(){this.unMounted=!0}},{key:\"componentWillReceiveProps\",value:function(e){var t=this;e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:\"1.3.0\",feeAmount:new w.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:\"_updateFee\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.fee_asset_id,n=t.from_account,s=this._getAvailableAssets(t).fee_asset_types;if(1===s.length&&s[0]!==a&&(a=s[0]),!n)return null;Object(g.b)({accountID:n.get(\"id\"),feeID:a,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:this.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkBalance)})}},{key:\"_checkFeeStatus\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.from_account;if(a){var n=this._getAvailableAssets(t).fee_asset_types,s={},i=[];n.forEach(function(n){i.push(Object(g.b)({accountID:a.get(\"id\"),feeID:n,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:e.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}))}),Promise.all(i).then(function(a){n.forEach(function(e,t){s[e]=a[t]}),u.a.are_equal_shallow(t.feeStatus,s)||e.setState({feeStatus:s}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:\"onMemoChanged\",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:\"onWithdrawAmountChange\",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},this._checkBalance)}},{key:\"onSelectChanged\",value:function(e){var t=f.a.get(this.props.output_wallet_type)[e];f.a.setLast({wallet:this.props.output_wallet_type,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"onWithdrawAddressChanged\",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"_validateAddress\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(f.m)({url:a.url,walletType:a.output_wallet_type,newAddress:e}).then(function(a){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:a})})}},{key:\"_checkBalance\",value:function(){var e=this.state,t=e.feeAmount,a=e.withdraw_amount,n=this.props,s=n.asset,i=n.balance;if(i&&t){var o=Object(g.a)(a,s,t,i);if(null!==o)return this.setState({balanceError:!o}),o}}},{key:\"onSubmit\",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(f.a.has(this.props.output_wallet_type)){var t=f.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:a})}f.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=this.state.feeAmount,i=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\")),o=void 0!==this.props.gateFee?parseFloat(String.prototype.replace.call(this.props.gateFee,/,/g,\"\")):0,r=new w.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:i}),l=new w.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:0});void 0!==this.props.balance&&(l=r.clone(this.props.balance.get(\"balance\")));var c=new w.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:o});r.plus(c),l.lt(r)&&(r=l),_.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),r.getAmount(),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,s?s.asset_id:\"1.3.0\"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else this.showConfirmationModal()}},{key:\"onSubmitConfirmation\",value:function(){if(this.hideConfirmationModal(),f.a.has(this.props.output_wallet_type)){var t=f.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:a})}f.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=u.a.get_asset_precision(n.get(\"precision\")),i=String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\"),o=this.state.feeAmount;_.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),parseInt(i*s,10),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,o?o.asset_id:\"1.3.0\")}},{key:\"onDropDownList\",value:function(){f.a.has(this.props.output_wallet_type)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:\"getWithdrawModalId\",value:function(){return\"confirmation\"}},{key:\"onAccountBalance\",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get(\"balances\").toJS()).includes(this.props.asset.get(\"id\"))){var t=new w.a({amount:this.props.balance.get(\"balance\"),asset_id:this.props.asset.get(\"id\"),precision:this.props.asset.get(\"precision\")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:\"setNestedRef\",value:function(e){this.nestedRef=e}},{key:\"onFeeChanged\",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get(\"id\")},this._updateFee)}},{key:\"_getAvailableAssets\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,a=e.feeStatus;var n=[];if(!t||!t.get(\"balances\"))return{fee_asset_types:n};var s=e.from_account.get(\"balances\").toJS();for(var i in n=Object.keys(s).sort(u.a.sortID),s){var o=y.ChainStore.getObject(i),r=y.ChainStore.getObject(s[i]);if(r&&0===r.get(\"balance\")&&-1!==n.indexOf(i)&&n.splice(n.indexOf(i),1),o){var l=!1;try{l=new w.i({base:new w.a(o.getIn([\"options\",\"core_exchange_rate\",\"base\"]).toJS()),quote:new w.a(o.getIn([\"options\",\"core_exchange_rate\",\"quote\"]).toJS())}).isValid()}catch(e){l=!1}\"1.3.0\"===o.get(\"id\")||l||n.splice(n.indexOf(i),1)}}return{fee_asset_types:n=n.filter(function(e){return function(e){return void 0===a[e]||a[e]&&a[e].hasPoolBalance}(e)&&function(e){return void 0===a[e]||a[e]&&a[e].hasBalance}(e)})}}},{key:\"render\",value:function(){var e=this.state,t=e.withdraw_address_selected,a=e.memo,n=f.a.get(this.props.output_wallet_type),s=null,o=this.props.account.get(\"balances\").toJS(),l=Object.keys(o),c=(this.getWithdrawModalId(),null),u=null,d=null;this.state.options_is_valid&&(u=i.a.createElement(\"div\",{className:n.length?\"blocktrades-options\":\"blocktrades-disabled-options\"},n.map(function(e,t){return i.a.createElement(\"a\",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(c=i.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"gateway.valid_address\",coin_type:this.props.output_coin_type})),d=i.a.createElement(v.Modal,{closable:!1,footer:[i.a.createElement(v.Button,{key:\"submit\",type:\"primary\",onClick:this.onSubmitConfirmation.bind(this)},m.a.translate(\"modal.confirmation.accept\")),i.a.createElement(v.Button,{key:\"cancel\",style:{marginLeft:\"8px\"},onClick:this.hideConfirmationModal},m.a.translate(\"modal.confirmation.cancel\"))],visible:this.state.isConfirmationModalVisible,onCancel:this.hideConfirmationModal},i.a.createElement(\"label\",null,i.a.createElement(r.a,{content:\"modal.confirmation.title\"})))));var _=1,y=null;this.props.output_supports_memos&&(y=i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(\"label\",null,i.a.createElement(r.a,{component:\"span\",content:\"transfer.memo\"})),i.a.createElement(\"textarea\",{rows:\"3\",value:a,tabIndex:_++,onChange:this.onMemoChanged.bind(this)})));var g=this._getAvailableAssets().fee_asset_types;if(l.length>0){var w=this.props.asset.get(\"id\");if(w){var b=o[w];s=i.a.createElement(\"span\",{style:{borderBottom:\"#A09F9F 1px dotted\",cursor:\"pointer\"}},i.a.createElement(r.a,{component:\"span\",content:\"transfer.available\"}),\"Â :Â \",i.a.createElement(\"span\",{className:\"set-cursor\",onClick:this.onAccountBalance.bind(this)},b?i.a.createElement(p.a,{balance:o[w]}):0))}else s=\"No funds\"}else s=\"No funds\";var E=this.state.error||this.state.balanceError||!this.state.withdraw_amount;return i.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\",style:{paddingTop:0}},i.a.createElement(\"div\",{className:\"grid-container\"},i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(h.a,{label:\"modal.withdraw.amount\",amount:this.state.withdraw_amount,asset:this.props.asset.get(\"id\"),assets:[this.props.asset.get(\"id\")],placeholder:\"0.0\",onChange:this.onWithdrawAmountChange.bind(this),display_balance:s}),this.state.empty_withdraw_value?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.valid\"})):null,this.state.balanceError?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.insufficient\"})):null),this.state.feeAmount?i.a.createElement(\"div\",{className:\"content-block gate_fee\"},i.a.createElement(h.a,{refCallback:this.setNestedRef.bind(this),label:\"transfer.fee\",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:g,tabIndex:_++}),this.state.hasBalance?null:i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.noFeeBalance\"})),this.state.hasPoolBalance?null:i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.noPoolBalance\"}))):null,this.props.gateFee?i.a.createElement(\"div\",{className:\"amount-selector right-selector\",style:{paddingBottom:20}},i.a.createElement(\"label\",{className:\"left-label\"},i.a.createElement(r.a,{content:\"gateway.fee\"})),i.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},i.a.createElement(\"input\",{type:\"text\",disabled:!0,value:this.props.gateFee}),i.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},i.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},i.a.createElement(\"div\",null,this.props.output_coin_symbol))))):null,i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(\"label\",{className:\"left-label\"},i.a.createElement(r.a,{component:\"span\",content:\"modal.withdraw.address\"})),i.a.createElement(\"div\",{className:\"blocktrades-select-dropdown\"},i.a.createElement(\"div\",{className:\"inline-label\"},i.a.createElement(\"input\",{type:\"text\",value:t,tabIndex:\"4\",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:\"off\"}),i.a.createElement(\"span\",{onClick:this.onDropDownList.bind(this)},\"â¼\"))),i.a.createElement(\"div\",{className:\"blocktrades-position-options\"},u),c),y,i.a.createElement(\"div\",null,i.a.createElement(v.Button,{type:\"primary\",disabled:E,onClick:this.onSubmit.bind(this)},m.a.translate(\"modal.withdraw.submit\")),i.a.createElement(v.Button,{onClick:this.props.hideModal,style:{marginLeft:\"8px\"}},m.a.translate(\"account.perm.cancel\"))),d))}}]),a}();C.propTypes={account:l.a.ChainAccount.isRequired,issuer:l.a.ChainAccount.isRequired,asset:l.a.ChainAsset.isRequired,output_coin_name:E.a.string.isRequired,output_coin_symbol:E.a.string.isRequired,output_coin_type:E.a.string.isRequired,url:E.a.string,output_wallet_type:E.a.string,output_supports_memos:E.a.bool.isRequired,amount_to_withdraw:E.a.string,balance:l.a.ChainObject},t.a=Object(c.a)(C)}).call(this,a(120).Buffer)},2214:function(e,t){},2215:function(e,t){},2273:function(e,t,a){\"use strict\";(function(e){var n=a(322),s=a(0),i=a.n(s),o=a(3),r=a.n(o),l=a(39),c=a(46),u=a(14),p=a(197),d=a(9),m=a.n(d),h=a(109),_=a(36),f=a(2096),y=a(12),g=a(106),w=a(27),v=a(11),b=a(1),E=a.n(b),k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var C=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={isConfirmationModalVisible:!1,withdraw_amount:t.props.amount_to_withdraw,withdraw_address:f.a.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:f.a.getLast(e.output_wallet_type),memo:\"\",withdraw_address_first:!0,empty_withdraw_value:!1,from_account:e.account,fee_asset_id:\"1.3.0\",feeStatus:{}},t._validateAddress(t.state.withdraw_address,e),t._checkBalance=t._checkBalance.bind(t),t._checkMinAmount=t._checkMinAmount.bind(t),t._updateFee=Object(n.a)(t._updateFee.bind(t),250),t.showConfirmationModal=t.showConfirmationModal.bind(t),t.hideConfirmationModal=t.hideConfirmationModal.bind(t),t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.a.Component),k(a,[{key:\"componentWillMount\",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:\"componentWillUnmount\",value:function(){this.unMounted=!0}},{key:\"componentWillReceiveProps\",value:function(e){var t=this;e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:\"1.3.0\",feeAmount:new w.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:\"showConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!0})}},{key:\"hideConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!1})}},{key:\"_updateFee\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.fee_asset_id,n=t.from_account,s=this._getAvailableAssets(t).fee_asset_types;if(1===s.length&&s[0]!==a&&(a=s[0]),!n)return null;Object(g.b)({accountID:n.get(\"id\"),feeID:a,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:this.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkBalance)})}},{key:\"_checkFeeStatus\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.from_account;if(a){var n=this._getAvailableAssets(t).fee_asset_types,s={},i=[];n.forEach(function(n){i.push(Object(g.b)({accountID:a.get(\"id\"),feeID:n,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:e.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}))}),Promise.all(i).then(function(a){n.forEach(function(e,t){s[e]=a[t]}),u.a.are_equal_shallow(t.feeStatus,s)||e.setState({feeStatus:s}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:\"onMemoChanged\",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:\"onWithdrawAmountChange\",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},function(){this._checkBalance,this._checkMinAmount()})}},{key:\"onSelectChanged\",value:function(e){var t=f.a.get(this.props.output_wallet_type)[e];f.a.setLast({wallet:this.props.output_wallet_type,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"onWithdrawAddressChanged\",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"_validateAddress\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(f.c)({url:a.url,walletType:a.output_wallet_type,newAddress:e}).then(function(a){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:a})})}},{key:\"_checkBalance\",value:function(){var e=this.state,t=e.feeAmount,a=e.withdraw_amount,n=this.props,s=n.asset,i=n.balance;if(i&&t){var o=Object(g.a)(a,s,t,i);if(null!==o)return this.setState({balanceError:!o}),o}}},{key:\"_checkMinAmount\",value:function(){var e=this.state.withdraw_amount;if(null!==e){var t=e<this.props.min_amount/u.a.get_asset_precision(this.props.asset_precision);return this.setState({minAmountError:t}),t}}},{key:\"onSubmit\",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(f.a.has(this.props.output_wallet_type)){var t=f.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:a})}f.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=this.state.feeAmount,i=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\")),o=new w.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:i});_.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),o.getAmount(),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,s?s.asset_id:\"1.3.0\"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else this.showConfirmationModal()}},{key:\"onSubmitConfirmation\",value:function(){if(this.hideConfirmationModal(),f.a.has(this.props.output_wallet_type)){var t=f.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),f.a.set({wallet:this.props.output_wallet_type,addresses:a})}f.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=u.a.get_asset_precision(n.get(\"precision\")),i=String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\"),o=this.state.feeAmount;_.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),parseInt(i*s,10),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,o?o.asset_id:\"1.3.0\")}},{key:\"onDropDownList\",value:function(){f.a.has(this.props.output_wallet_type)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:\"getWithdrawModalId\",value:function(){return\"confirmation\"}},{key:\"onAccountBalance\",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get(\"balances\").toJS()).includes(this.props.asset.get(\"id\"))){var t=new w.a({amount:this.props.balance.get(\"balance\"),asset_id:this.props.asset.get(\"id\"),precision:this.props.asset.get(\"precision\")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:\"setNestedRef\",value:function(e){this.nestedRef=e}},{key:\"onFeeChanged\",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get(\"id\")},this._updateFee)}},{key:\"_getAvailableAssets\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,a=e.feeStatus;var n=[];if(!t||!t.get(\"balances\"))return{fee_asset_types:n};var s=e.from_account.get(\"balances\").toJS();for(var i in n=Object.keys(s).sort(u.a.sortID),s){var o=y.ChainStore.getObject(i),r=y.ChainStore.getObject(s[i]);if(r&&0===r.get(\"balance\")&&-1!==n.indexOf(i)&&n.splice(n.indexOf(i),1),o){var l=!1;try{l=new w.i({base:new w.a(o.getIn([\"options\",\"core_exchange_rate\",\"base\"]).toJS()),quote:new w.a(o.getIn([\"options\",\"core_exchange_rate\",\"quote\"]).toJS())}).isValid()}catch(e){l=!1}\"1.3.0\"===o.get(\"id\")||l||n.splice(n.indexOf(i),1)}}return{fee_asset_types:n=n.filter(function(e){return function(e){return void 0===a[e]||a[e]&&a[e].hasPoolBalance}(e)&&function(e){return void 0===a[e]||a[e]&&a[e].hasBalance}(e)})}}},{key:\"render\",value:function(){var e=this.state,t=e.withdraw_address_selected,a=e.memo,n=f.a.get(this.props.output_wallet_type),s=null,o=this.props.account.get(\"balances\").toJS(),l=Object.keys(o),c=(this.getWithdrawModalId(),null),d=null,_=null;this.state.options_is_valid&&(d=i.a.createElement(\"div\",{className:n.length?\"rudex-options\":\"rudex-disabled-options\"},n.map(function(e,t){return i.a.createElement(\"a\",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(c=i.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"gateway.valid_address\",coin_type:this.props.output_coin_type})),_=i.a.createElement(v.Modal,{closable:!1,footer:[i.a.createElement(v.Button,{key:\"submit\",type:\"primary\",onClick:this.onSubmitConfirmation.bind(this)},m.a.translate(\"modal.confirmation.accept\")),i.a.createElement(v.Button,{key:\"cancel\",style:{marginLeft:\"8px\"},onClick:this.hideConfirmationModal},m.a.translate(\"modal.confirmation.cancel\"))],visible:this.state.isConfirmationModalVisible,onCancel:this.hideConfirmationModal},i.a.createElement(\"label\",null,i.a.createElement(r.a,{content:\"modal.confirmation.title\"})))));var y=1,g=null;this.props.output_supports_memos&&(g=i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(\"label\",null,i.a.createElement(r.a,{component:\"span\",content:\"transfer.memo\"})),i.a.createElement(\"textarea\",{rows:\"3\",value:a,tabIndex:y++,onChange:this.onMemoChanged.bind(this)})));var w=this._getAvailableAssets().fee_asset_types;if(l.length>0){var b=this.props.asset.get(\"id\");if(b){var E=o[b];s=i.a.createElement(\"span\",{style:{borderBottom:\"#A09F9F 1px dotted\",cursor:\"pointer\"}},i.a.createElement(r.a,{component:\"span\",content:\"transfer.available\"}),\"Â :Â \",i.a.createElement(\"span\",{className:\"set-cursor\",onClick:this.onAccountBalance.bind(this)},E?i.a.createElement(p.a,{balance:o[b]}):0))}else s=\"No funds\"}else s=\"No funds\";var k=u.a.format_number(this.props.min_amount/u.a.get_asset_precision(this.props.asset_precision),this.props.asset_precision,!1),C=this.props.withdraw_fee?u.a.format_number(this.props.withdraw_fee/u.a.get_asset_precision(this.props.asset_precision),this.props.asset_precision,!1):null;return i.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\",style:{paddingTop:0}},i.a.createElement(\"div\",{className:\"grid-container\"},i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(h.a,{label:\"modal.withdraw.amount\",amount:this.state.withdraw_amount,asset:this.props.asset.get(\"id\"),assets:[this.props.asset.get(\"id\")],placeholder:\"0.0\",onChange:this.onWithdrawAmountChange.bind(this),display_balance:s}),this.state.empty_withdraw_value?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.valid\"})):null,this.state.balanceError?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.insufficient\"})):null,this.state.minAmountError?i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"gateway.xbtsx.min_amount_error\"})):null,i.a.createElement(\"p\",{className:\"no-margin\",style:{paddingTop:10}},i.a.createElement(\"b\",null,i.a.createElement(r.a,{content:\"gateway.xbtsx.min_amount\",minAmount:k,symbol:this.props.output_coin_symbol})))),this.state.feeAmount?i.a.createElement(\"div\",{className:\"content-block gate_fee\"},i.a.createElement(h.a,{refCallback:this.setNestedRef.bind(this),label:\"transfer.fee\",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:w,tabIndex:y++}),this.state.hasBalance?null:i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.noFeeBalance\"})),this.state.hasPoolBalance?null:i.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},i.a.createElement(r.a,{content:\"transfer.errors.noPoolBalance\"}))):null,C?i.a.createElement(\"div\",{className:\"amount-selector right-selector\",style:{paddingBottom:20}},i.a.createElement(\"label\",{className:\"left-label\"},i.a.createElement(r.a,{content:\"gateway.fee\"})),i.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},i.a.createElement(\"input\",{type:\"text\",disabled:!0,value:C}),i.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},i.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},i.a.createElement(\"div\",null,this.props.output_coin_symbol))))):null,i.a.createElement(\"div\",{className:\"content-block\"},i.a.createElement(\"label\",{className:\"left-label\"},i.a.createElement(r.a,{component:\"span\",content:\"modal.withdraw.address\"})),i.a.createElement(\"div\",{className:\"rudex-select-dropdown\"},i.a.createElement(\"div\",{className:\"inline-label\"},i.a.createElement(\"input\",{type:\"text\",spellcheck:\"false\",value:t,tabIndex:\"4\",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:\"off\"}),i.a.createElement(\"span\",{onClick:this.onDropDownList.bind(this)},\"â¼\"))),i.a.createElement(\"div\",{className:\"rudex-position-options\"},d),c),g,i.a.createElement(\"div\",null,i.a.createElement(v.Button,{type:\"primary\",disabled:this.state.error||this.state.balanceError||this.state.minAmountError,onClick:this.onSubmit.bind(this)},m.a.translate(\"modal.withdraw.submit\")),i.a.createElement(v.Button,{onClick:this.props.hideModal,style:{marginLeft:\"8px\"}},m.a.translate(\"account.perm.cancel\"))),_))}}]),a}();C.propTypes={account:l.a.ChainAccount.isRequired,issuer:l.a.ChainAccount.isRequired,asset:l.a.ChainAsset.isRequired,output_coin_name:E.a.string.isRequired,output_coin_symbol:E.a.string.isRequired,output_coin_type:E.a.string.isRequired,url:E.a.string,output_wallet_type:E.a.string,output_supports_memos:E.a.bool.isRequired,amount_to_withdraw:E.a.string,balance:l.a.ChainObject,min_amount:E.a.number,withdraw_fee:E.a.number},t.a=Object(c.a)(C,{keep_updating:!0})}).call(this,a(120).Buffer)},2274:function(e,t,a){\"use strict\";(function(e){var n=a(339),s=a.n(n),i=a(0),o=a.n(i),r=a(3),l=a.n(r),c=a(39),u=a(46),p=a(14),d=a(197),m=a(9),h=a.n(m),_=a(109),f=a(36),y=a(80),g=a(12),w=a(106),v=a(27),b=a(11),E=a(74),k=a(1),C=a.n(k),S=a(126),A=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var O=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.onTrxIncluded=function(e){e.included&&e.broadcasted_transaction?(t.unMounted||t.setState({transferring:!0}),t.props.hideModal()):e.closed&&(t.unMounted||t.setState({transferring:!1}))},t.state={isConfirmationModalVisible:!1,withdraw_amount:t.props.amount_to_withdraw,withdraw_address:y.a.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:y.a.getLast(e.output_wallet_type),memo:\"\",withdraw_address_first:!0,empty_withdraw_value:!1,from_account:e.account,fee_asset_id:\"1.3.0\",feeStatus:{}},t._validateAddress(t.state.withdraw_address,e),t._checkBalance=t._checkBalance.bind(t),t._updateFee=s()(t._updateFee.bind(t),250),t.showConfirmationModal=t.showConfirmationModal.bind(t),t.hideConfirmationModal=t.hideConfirmationModal.bind(t),t}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,o.a.Component),A(a,[{key:\"showConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!0})}},{key:\"hideConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!1})}},{key:\"componentWillMount\",value:function(){this._updateFee(),this._checkFeeStatus(),E.a.listen(this.onTrxIncluded)}},{key:\"componentWillUnmount\",value:function(){this.unMounted=!0,E.a.unlisten(this.onTrxIncluded)}},{key:\"componentWillReceiveProps\",value:function(e){var t=this;e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:\"1.3.0\",feeAmount:new v.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:\"_updateFee\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.fee_asset_id,n=t.from_account,s=this._getAvailableAssets(t).fee_asset_types;if(1===s.length&&s[0]!==a&&(a=s[0]),!n)return null;Object(w.b)({accountID:n.get(\"id\"),feeID:a,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:this.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkBalance)})}},{key:\"_checkFeeStatus\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.from_account;if(a){var n=this._getAvailableAssets(t).fee_asset_types,s={},i=[];n.forEach(function(n){i.push(Object(w.b)({accountID:a.get(\"id\"),feeID:n,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:e.props.output_coin_type+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}))}),Promise.all(i).then(function(a){n.forEach(function(e,t){s[e]=a[t]}),p.a.are_equal_shallow(t.feeStatus,s)||e.setState({feeStatus:s}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:\"onMemoChanged\",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:\"onWithdrawAmountChange\",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},this._checkBalance)}},{key:\"onSelectChanged\",value:function(e){var t=y.a.get(this.props.output_wallet_type)[e];y.a.setLast({wallet:this.props.output_wallet_type,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"onWithdrawAddressChanged\",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"_validateAddress\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(y.m)({url:a.url,walletType:a.output_wallet_type,output_coin_type:a.output_coin_type,newAddress:e}).then(function(a){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:a})})}},{key:\"_checkBalance\",value:function(){var e=this.state,t=e.feeAmount,a=e.withdraw_amount,n=this.props,s=n.asset,i=n.balance;if(i&&t){var o=Object(w.a)(a,s,t,i);if(null!==o)return this.setState({balanceError:!o}),o}}},{key:\"onSubmit\",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(y.a.has(this.props.output_wallet_type)){var t=y.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),y.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),y.a.set({wallet:this.props.output_wallet_type,addresses:a})}y.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=this.state.feeAmount,i=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\")),o=void 0!==this.props.gateFee?parseFloat(String.prototype.replace.call(this.props.gateFee,/,/g,\"\")):0,r=new v.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:i}),l=new v.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:0});void 0!==this.props.balance&&(l=r.clone(this.props.balance.get(\"balance\")));var c=new v.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:o});r.plus(c),l.lt(r)&&(r=l),f.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),r.getAmount(),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,s?s.asset_id:\"1.3.0\"),this.setState({empty_withdraw_value:!1,transferring:!0})}else this.setState({empty_withdraw_value:!0});else this.showConfirmationModal()}},{key:\"onSubmitConfirmation\",value:function(){if(this.hideConfirmationModal(),y.a.has(this.props.output_wallet_type)){var t=y.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),y.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var a=[];a.push(this.state.withdraw_address),y.a.set({wallet:this.props.output_wallet_type,addresses:a})}y.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var n=this.props.asset,s=this.state.feeAmount,i=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\")),o=void 0!==this.props.gateFee?parseFloat(String.prototype.replace.call(this.props.gateFee,/,/g,\"\")):0,r=new v.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:i}),l=new v.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:0});void 0!==this.props.balance&&(l=r.clone(this.props.balance.get(\"balance\")));var c=new v.a({asset_id:n.get(\"id\"),precision:n.get(\"precision\"),real:o});r.plus(c),l.lt(r)&&(r=l),f.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),r.getAmount(),n.get(\"id\"),this.props.output_coin_type+\":\"+this.state.withdraw_address+(this.state.memo?\":\"+new e(this.state.memo,\"utf-8\"):\"\"),null,s?s.asset_id:\"1.3.0\")}},{key:\"onDropDownList\",value:function(){y.a.has(this.props.output_wallet_type)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:\"onAccountBalance\",value:function(){var e=this.state.feeAmount,t=this.props,a=t.asset,n=t.account,s=t.balance,i=t.gateFee;if(Object.keys(n.get(\"balances\").toJS()).includes(a.get(\"id\"))){var o=new v.a({amount:s.get(\"balance\"),asset_id:a.get(\"id\"),precision:a.get(\"precision\")});if(o.asset_id===e.asset_id&&o.minus(e),i){var r=new v.a({asset_id:a.get(\"id\"),precision:a.get(\"precision\"),real:i});o.minus(r)}this.setState({withdraw_amount:o.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:\"setNestedRef\",value:function(e){this.nestedRef=e}},{key:\"onFeeChanged\",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get(\"id\")},this._updateFee)}},{key:\"_getAvailableAssets\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,a=e.feeStatus;var n=[];if(!t||!t.get(\"balances\"))return{fee_asset_types:n};var s=e.from_account.get(\"balances\").toJS();for(var i in n=Object.keys(s).sort(p.a.sortID),s){var o=g.ChainStore.getObject(i),r=g.ChainStore.getObject(s[i]);if(r&&0===r.get(\"balance\")&&-1!==n.indexOf(i)&&n.splice(n.indexOf(i),1),o){var l=!1;try{l=new v.i({base:new v.a(o.getIn([\"options\",\"core_exchange_rate\",\"base\"]).toJS()),quote:new v.a(o.getIn([\"options\",\"core_exchange_rate\",\"quote\"]).toJS())}).isValid()}catch(e){l=!1}\"1.3.0\"===o.get(\"id\")||l||n.splice(n.indexOf(i),1)}}return{fee_asset_types:n=n.filter(function(e){return function(e){return void 0===a[e]||a[e]&&a[e].hasPoolBalance}(e)&&function(e){return void 0===a[e]||a[e]&&a[e].hasBalance}(e)})}}},{key:\"render\",value:function(){var e=this.state,t=e.withdraw_address_selected,a=e.memo,n=y.a.get(this.props.output_wallet_type),s=null,i=this.props.account.get(\"balances\").toJS(),r=Object.keys(i),c=null,u=null,p=null;this.state.options_is_valid&&(u=o.a.createElement(\"div\",{className:n.length?\"blocktrades-options\":\"blocktrades-disabled-options\"},n.map(function(e,t){return o.a.createElement(\"a\",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(c=o.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},o.a.createElement(l.a,{content:\"gateway.valid_address\",coin_type:S.a.replaceAssetSymbol(this.props.output_coin_symbol)})),p=o.a.createElement(b.Modal,{closable:!1,footer:[o.a.createElement(b.Button,{key:\"submit\",type:\"primary\",onClick:this.onSubmitConfirmation.bind(this)},h.a.translate(\"modal.confirmation.accept\")),o.a.createElement(b.Button,{key:\"cancel\",style:{marginLeft:\"8px\"},onClick:this.hideConfirmationModal},h.a.translate(\"modal.confirmation.cancel\"))],visible:this.state.isConfirmationModalVisible,onCancel:this.hideConfirmationModal},o.a.createElement(\"p\",null,o.a.createElement(l.a,{content:\"modal.confirmation.title\"})))));var m=1,f=null;this.props.output_supports_memos&&(f=o.a.createElement(\"div\",{className:\"content-block\"},o.a.createElement(\"label\",null,o.a.createElement(l.a,{component:\"span\",content:\"transfer.memo\"})),o.a.createElement(\"textarea\",{rows:\"3\",value:a,tabIndex:m++,onChange:this.onMemoChanged.bind(this)})));var g=this._getAvailableAssets().fee_asset_types;if(r.length>0){var w=this.props.asset.get(\"id\");if(w){var v=i[w];s=o.a.createElement(\"span\",{style:{borderBottom:\"#A09F9F 1px dotted\",cursor:\"pointer\"}},o.a.createElement(l.a,{component:\"span\",content:\"transfer.available\"}),\"Â :Â \",o.a.createElement(\"span\",{className:\"set-cursor\",onClick:this.onAccountBalance.bind(this)},v?o.a.createElement(d.a,{balance:i[w]}):0))}else s=\"No funds\"}else s=\"No funds\";var E=this.state.error||this.state.balanceError||!this.state.withdraw_amount||this.state.transferring;return o.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\",style:{paddingTop:\"0px\"}},o.a.createElement(\"div\",{className:\"grid-container\"},o.a.createElement(\"div\",{className:\"content-block\"},o.a.createElement(_.a,{label:\"modal.withdraw.amount\",amount:this.state.withdraw_amount,asset:this.props.asset.get(\"id\"),assets:[this.props.asset.get(\"id\")],placeholder:\"0.0\",onChange:this.onWithdrawAmountChange.bind(this),display_balance:s}),this.state.empty_withdraw_value?o.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},o.a.createElement(l.a,{content:\"transfer.errors.valid\"})):null,this.state.balanceError?o.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},o.a.createElement(l.a,{content:\"transfer.errors.insufficient\"})):null),this.state.feeAmount?o.a.createElement(\"div\",{className:\"content-block gate_fee\"},o.a.createElement(_.a,{refCallback:this.setNestedRef.bind(this),label:\"transfer.fee\",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:g,tabIndex:m++}),this.state.hasBalance?null:o.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},o.a.createElement(l.a,{content:\"transfer.errors.noFeeBalance\"})),this.state.hasPoolBalance?null:o.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},o.a.createElement(l.a,{content:\"transfer.errors.noPoolBalance\"}))):null,this.props.gateFee?o.a.createElement(\"div\",{className:\"amount-selector right-selector\",style:{paddingBottom:20}},o.a.createElement(\"label\",{className:\"left-label\"},o.a.createElement(l.a,{content:\"gateway.fee\"})),o.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},o.a.createElement(\"input\",{type:\"text\",disabled:!0,value:this.props.gateFee}),o.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},o.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},o.a.createElement(\"div\",null,S.a.replaceAssetSymbol(this.props.output_coin_symbol)))))):null,o.a.createElement(\"div\",{className:\"content-block\"},o.a.createElement(\"label\",{className:\"left-label\"},o.a.createElement(l.a,{component:\"span\",content:\"modal.withdraw.address\"})),o.a.createElement(\"div\",{className:\"blocktrades-select-dropdown\"},o.a.createElement(\"div\",{className:\"inline-label\"},o.a.createElement(\"input\",{type:\"text\",value:t,tabIndex:\"4\",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:\"off\"}),o.a.createElement(\"span\",{onClick:this.onDropDownList.bind(this)},\"â¼\"))),o.a.createElement(\"div\",{className:\"blocktrades-position-options\"},u),c),f,o.a.createElement(\"div\",null,o.a.createElement(b.Button,{type:\"primary\",disabled:E,onClick:this.onSubmit.bind(this)},h.a.translate(\"modal.withdraw.submit\")),o.a.createElement(b.Button,{onClick:this.props.hideModal,style:{marginLeft:\"8px\"}},h.a.translate(\"account.perm.cancel\"))),p))}}]),a}();O.propTypes={account:c.a.ChainAccount.isRequired,issuer:c.a.ChainAccount.isRequired,asset:c.a.ChainAsset.isRequired,output_coin_name:C.a.string.isRequired,output_coin_symbol:C.a.string.isRequired,output_coin_type:C.a.string.isRequired,url:C.a.string,gateFee:C.a.number,output_wallet_type:C.a.string,output_supports_memos:C.a.bool.isRequired,amount_to_withdraw:C.a.string,balance:c.a.ChainObject},t.a=Object(u.a)(O,{keep_updating:!0})}).call(this,a(120).Buffer)},2304:function(e,t,a){\"use strict\";a.r(t);var n=a(0),s=a.n(n),i=a(28),o=a(89),r=a(132),l=a(14),c=a(3),u=a.n(c),p=a(39),d=a(46),m=a(12),h=a(2069),_=a(2008),f=a(98),y=a(138),g=a(80),w=a(42),v=a(41),b=a(15),E=a.n(b),k=a(1),C=a.n(k),S=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var A=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a._handleCopy=a._handleCopy.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),S(t,[{key:\"componentDidMount\",value:function(){this.childRef&&(this.node=E.a.findDOMNode(this.childRef)),this.node&&this.node.addEventListener&&this.node.addEventListener(\"copy\",this._handleCopy)}},{key:\"componentWillUnmount\",value:function(){this.node&&this.node.removeEventListener&&this.node.removeEventListener(\"copy\",this._handleCopy)}},{key:\"_handleCopy\",value:function(e){!1!==this.props.disableCopy&&(this.props.replaceCopyText&&e.clipboardData.setData(\"text/plain\",this.props.replaceCopyText),e.preventDefault())}},{key:\"render\",value:function(){var e=this;return s.a.createElement(\"span\",{ref:function(t){return e.childRef=t}},this.props.children)}}]),t}();A.propTypes={disableCopy:C.a.bool,replaceCopyText:C.a.string};var O=A,N=a(9),x=a.n(N),T=a(2048),j=a.n(T),M=a(11),I=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var B=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n={blocktrades:w.b.BASE,openledger:w.h.BASE};return a.state={isModalVisible:!1,receive_address:null,url:e.url||n[e.gateway],loading:!1,emptyAddressDeposit:!1},a.addDepositAddress=a.addDepositAddress.bind(a),a.showModal=a.showModal.bind(a),a.hideModal=a.hideModal.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),I(t,[{key:\"showModal\",value:function(){this.setState({isModalVisible:!0})}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1})}},{key:\"_getDepositObject\",value:function(){return{inputCoinType:this.props.deposit_coin_type,outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get(\"name\"),url:this.state.url,stateCallback:this.addDepositAddress}}},{key:\"componentWillMount\",value:function(){Object(g.j)({coin:this.props.receive_coin_type,account:this.props.account.get(\"name\"),stateCallback:this.addDepositAddress})}},{key:\"componentWillReceiveProps\",value:function(e){e.account!==this.props.account&&Object(g.j)({coin:e.receive_coin_type,account:e.account.get(\"name\"),stateCallback:this.addDepositAddress})}},{key:\"addDepositAddress\",value:function(e){e.error&&(\"no_address\"===e.error.message?this.setState({emptyAddressDeposit:!0}):this.setState({emptyAddressDeposit:!1})),this.setState({receive_address:e}),this.setState({loading:!1}),this.setState({receive_address:e})}},{key:\"requestDepositAddressLoad\",value:function(){this.setState({loading:!0,emptyAddressDeposit:!1}),Object(g.l)(this._getDepositObject())}},{key:\"getWithdrawModalId\",value:function(){return\"withdraw_asset_\"+this.props.issuer_account.get(\"name\")+\"_\"+this.props.receive_asset.get(\"symbol\")}},{key:\"onWithdraw\",value:function(){this.showModal()}},{key:\"render\",value:function(){var e=\"deposit\"===this.props.action,t=s.a.createElement(v.a,null);if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return t;var a=this.props.account.get(\"balances\"),n=this.props.gateFee;this.props.receive_asset.get(\"symbol\");if(this.props.deprecated_in_favor_of){var i=!1,o=a.get(this.props.receive_asset.get(\"id\"));if(o){var r=m.ChainStore.getObject(o);if(r)0!=r.get(\"balance\")&&(i=!0)}if(!i)return t}var l=this.state.receive_address,c=this.state.emptyAddressDeposit,p=this.state.loading;if(!l)return s.a.createElement(\"div\",{style:{margin:\"3rem\"}},s.a.createElement(v.a,{type:\"three-bounce\"}));var d=this.getWithdrawModalId(),g=null,w=null,b=null,E=\"\",k=void 0;if(this.props.deposit_account){g=s.a.createElement(\"span\",null,this.props.deposit_account),w=this.props.deposit_account,E=this.props.receive_coin_type+\":\"+this.props.account.get(\"name\"),b=s.a.createElement(\"span\",null,E);var C=this.props.deposit_coin_type+\":\"}else{w=l&&l.address||\"\",l.memo?(k=l.memo,E=l.address,g=s.a.createElement(\"span\",null,l.address),b=s.a.createElement(\"span\",null,l.memo)):(E=l.address,g=s.a.createElement(\"span\",null,l.address));C=\"\"}return!this.props.isAvailable||e&&!this.props.deposit_account&&!l||l&&\"unknown\"===l.address?s.a.createElement(\"div\",null,s.a.createElement(u.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable\",component:\"h4\"})):e?s.a.createElement(\"div\",{className:\"Blocktrades__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_deposit\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},this.props.deposit_asset)),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_receive\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(f.a,{name:this.props.receive_asset.get(\"symbol\"),replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.intermediate\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.issuer_account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.your_account\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),replace:!1}))))))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_inst\"}),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.deposit_to\",asset:this.props.deposit_asset}),\":\"),s.a.createElement(\"label\",{className:\"fz_12 left-label\"},s.a.createElement(u.a,{content:\"gateway.deposit_notice_delay\"})),s.a.createElement(\"div\",null,c?s.a.createElement(u.a,{content:\"gateway.please_generate_address\"}):s.a.createElement(O,{replaceCopyText:x.a.translate(\"gateway.use_copy_button\")},g),s.a.createElement(\"div\",null,b&&s.a.createElement(\"span\",null,\"memo: \",b)),s.a.createElement(\"div\",{className:\"button-group\",style:{paddingTop:10}},g?s.a.createElement(j.a,{text:w},s.a.createElement(\"div\",{className:\"button\"},s.a.createElement(u.a,{content:\"gateway.copy_address\"}))):null,k?s.a.createElement(j.a,{text:k},s.a.createElement(\"div\",{className:\"button\"},s.a.createElement(u.a,{content:\"gateway.copy_memo\"}))):null,s.a.createElement(\"button\",{className:\"button spinner-button-circle\",onClick:this.requestDepositAddressLoad.bind(this)},p?s.a.createElement(v.a,{type:\"circle\"}):null,s.a.createElement(u.a,{content:\"gateway.generate_new\"}))),s.a.createElement(u.a,{className:\"has-error fz_14\",component:\"p\",content:\"gateway.min_deposit_warning_amount\",minDeposit:2*this.props.gateFee,coin:this.props.deposit_asset}),s.a.createElement(u.a,{className:\"has-error fz_14\",component:\"p\",content:\"gateway.min_deposit_warning_asset\",minDeposit:2*this.props.gateFee,coin:this.props.deposit_asset})))):s.a.createElement(\"div\",{className:\"Blocktrades__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_withdraw\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(f.a,{name:this.props.receive_asset.get(\"symbol\"),replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_receive\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},this.props.deposit_asset)),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.intermediate\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.issuer_account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),replace:!1}))))))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_inst\"}),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.withdraw_to\",asset:this.props.deposit_asset}),\":\"),s.a.createElement(\"div\",{className:\"button-group\",style:{paddingTop:20}},s.a.createElement(\"button\",{className:\"button success\",style:{fontSize:\"1.3rem\"},onClick:this.onWithdraw.bind(this)},s.a.createElement(u.a,{content:\"gateway.withdraw_now\"}),\" \"))),s.a.createElement(M.Modal,{onCancel:this.hideModal,title:x.a.translate(\"gateway.withdraw_coin\",{coin:this.props.deposit_asset_name,symbol:this.props.deposit_asset}),footer:null,visible:this.state.isModalVisible,id:d,overlay:!0},s.a.createElement(h.a,{hideModal:this.hideModal,showModal:this.showModal,account:this.props.account.get(\"name\"),issuer:this.props.issuer_account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),url:this.state.url,output_coin_name:this.props.deposit_asset_name,gateFee:n,output_coin_symbol:this.props.deposit_asset,output_coin_type:this.props.deposit_coin_type,output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:C,modal_id:d,balance:this.props.account.get(\"balances\").toJS()[this.props.receive_asset.get(\"id\")]})))}}]),t}();B.propTypes={url:C.a.string,gateway:C.a.string,deposit_coin_type:C.a.string,deposit_asset_name:C.a.string,deposit_account:C.a.string,receive_coin_type:C.a.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,deposit_asset:C.a.string,deposit_wallet_type:C.a.string,receive_asset:p.a.ChainAsset,deprecated_in_favor_of:p.a.ChainAsset,deprecated_message:C.a.string,action:C.a.string,supports_output_memos:C.a.bool.isRequired},B.defaultProps={autosubscribe:!1};var P=Object(d.a)(B),D=a(25),F=a(23),R=a(2007),q=a(13),W=a.n(q),L=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var U=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=e.viewSettings.get(e.provider+\"Action\",\"deposit\");return a.state={activeCoin:a._getActiveCoin(e,{action:n}),action:n},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),L(t,[{key:\"_getActiveCoin\",value:function(e,t){var a=e.viewSettings.get(\"activeCoin_\"+e.provider+\"_\"+t.action,null),n=null;return\"blocktrades\"==e.provider&&\"deposit\"==t.action&&(n=\"BTC\"),\"openledger\"==e.provider&&\"deposit\"==t.action&&(n=\"BTC\"),\"blocktrades\"==e.provider&&\"withdraw\"==t.action&&(n=\"TRADE.BTC\"),\"openledger\"==e.provider&&\"withdraw\"==t.action&&(n=\"OPEN.BTC\"),a||n}},{key:\"componentWillReceiveProps\",value:function(e){e.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(e,this.state.action)})}},{key:\"onSelectCoin\",value:function(e){this.setState({activeCoin:e.target.value});var t={};t[\"activeCoin_\"+this.props.provider+\"_\"+this.state.action]=e.target.value,F.a.changeViewSetting(t)}},{key:\"changeAction\",value:function(e){var t=this._getActiveCoin(this.props,{action:e});this.setState({action:e,activeCoin:t}),F.a.changeViewSetting(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},this.props.provider+\"Action\",e))}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.coins,n=t.account,i=t.provider,o=this.state,r=o.activeCoin,l=o.action;if(!a.length)return s.a.createElement(v.a,null);var c=a.filter(function(e){return!(!e||!e.symbol)&&(\"deposit\"===l?e.depositAllowed:e.withdrawalAllowed)}),p=c.map(function(e){var t=\"deposit\"===l?e.backingCoinType.toUpperCase():e.symbol;return s.a.createElement(\"option\",{value:t,key:e.symbol},t)}).filter(function(e){return null!==e}),d=c.filter(function(e){return\"deposit\"===l?e.backingCoinType.toUpperCase()===r:e.symbol===r})[0];d||(d=c[0]);var m={blocktrades:{name:\"blocktrades\",id:\"1.2.32567\",support:\"support@blocktrades.us\"},openledger:{name:d.intermediateAccount,id:\"1.2.96397\",support:\"https://dex.openledger.io\"}}[i],h=\"deposit\"===this.state.action;return s.a.createElement(\"div\",{style:this.props.style},s.a.createElement(\"div\",{className:\"grid-block no-margin vertical medium-horizontal no-padding\"},s.a.createElement(\"div\",{className:\"medium-4\"},s.a.createElement(\"div\",null,s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.choose_\"+l}),\":\",\" \"),s.a.createElement(\"select\",{className:\"external-coin-types bts-select\",onChange:this.onSelectCoin.bind(this),value:r},p))),s.a.createElement(\"div\",{className:\"medium-6 medium-offset-1\"},s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.gateway_text\"}),\":\"),s.a.createElement(\"div\",{style:{paddingBottom:15}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},s.a.createElement(\"li\",{className:\"deposit\"===l?\"is-active\":\"\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"deposit\")},s.a.createElement(u.a,{content:\"gateway.deposit\"}))),s.a.createElement(\"li\",{className:\"withdraw\"===l?\"is-active\":\"\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"withdraw\")},s.a.createElement(u.a,{content:\"gateway.withdraw\"}))))))),d?s.a.createElement(\"div\",null,s.a.createElement(\"div\",{style:{marginBottom:15}},s.a.createElement(P,{key:i+\".\"+d.symbol,gateway:i,issuer_account:m.name,account:n,deposit_asset:d.backingCoinType.toUpperCase(),deposit_asset_name:d.name,deposit_coin_type:d.backingCoinType.toLowerCase(),deposit_account:d.depositAccount,deposit_wallet_type:d.walletType,gateFee:d.gateFee,receive_asset:d.symbol,receive_coin_type:d.symbol.toLowerCase(),supports_output_memos:d.supportsMemos,isAvailable:d.isAvailable,action:this.state.action}),s.a.createElement(\"label\",{className:\"left-label\"},\"Support\"),s.a.createElement(\"div\",null,s.a.createElement(u.a,{content:\"gateway.support_block\"}),s.a.createElement(\"br\",null),s.a.createElement(\"br\",null),s.a.createElement(\"a\",{href:(-1===m.support.indexOf(\"@\")?\"\":\"mailto:\")+m.support,rel:\"noopener noreferrer\"},m.support))),d&&d.symbol?s.a.createElement(R.b,{asset:d.symbol,fromAccount:h?m.id:this.props.account.get(\"id\"),to:h?this.props.account.get(\"id\"):m.id},function(t){var a=t.asset,n=t.to,i=t.fromAccount;return s.a.createElement(R.a,{accountsList:W.a.List([e.props.account.get(\"id\")]),limit:10,compactView:!0,fullHeight:!0,filter:\"transfer\",title:s.a.createElement(u.a,{content:\"gateway.recent_\"+e.state.action}),customFilter:{fields:[\"to\",\"from\",\"asset_id\"],values:{to:n.get(\"id\"),from:i.get(\"id\"),asset_id:a.get(\"id\")}}})}):null):null)}}]),t}(),V=Object(i.a)(U,{listenTo:function(){return[D.a]},getProps:function(){return{viewSettings:D.a.getState().viewSettings}}}),H=a(18),J=a(573),G=a(574),X=a.n(G),z=a(114),K=a.n(z),Q=a(197),Y=a(109),Z=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var $=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={deposit_amount:null,deposit_info:null,deposit_error:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Z(t,[{key:\"onDepositAmountChange\",value:function(e){var t=e.amount;e.asset;this.setState({deposit_amount:t})}},{key:\"onSubmitDeposit\",value:function(){var e=this,t=this.props.receive_asset,a=(l.a.get_asset_precision(t.get(\"precision\")),this.state.deposit_amount.replace(/,/g,\"\"));console.log(\"deposit_amount: \",a);var n={jsonrpc:\"2.0\",method:\"getDepositAccount\",params:{bitsharesAccountName:this.props.account.get(\"name\"),currency:this.props.deposit_asset,amount:a},id:1};fetch(this.props.rpc_url,{method:\"POST\",headers:new Headers({Accept:\"application/json\",\"content-type\":\"application/x-www-form-urlencoded\"}),body:\"rq=\"+encodeURIComponent(JSON.stringify(n))}).then(function(e){return e.json()}).then(function(t){\"result\"in t?e.setState({deposit_info:t.result}):\"error\"in json_reponse&&\"message\"in t.error?e.setState({deposit_error:t.error.message}):e.setState({deposit_error:\"Unable to approve deposit, please contact OpenLedger or try again later\"})}).catch(function(t){e.setState({deposit_error:\"Unable to approve deposit, please contact OpenLedger or try again later\"})})}},{key:\"onClose\",value:function(){this.setState({deposit_amount:null,deposit_info:null,deposit_error:null}),K.a.publish(this.props.modal_id,\"close\")}},{key:\"render\",value:function(){if(this.state.deposit_error)return s.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\"},s.a.createElement(\"div\",{className:\"grid-container\"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"h3\",null,\"Deposit Error\")),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"p\",null,this.state.deposit_error)),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"input\",{type:\"submit\",className:\"button\",onClick:this.onClose.bind(this),value:\"Close\"}))));if(this.state.deposit_info){if(\"link\"in this.state.deposit_info)return s.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\"},s.a.createElement(\"div\",{className:\"grid-container\"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"h3\",null,\"Deposit Information\")),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"p\",null,\"Click\",\" \",s.a.createElement(\"a\",{href:this.state.deposit_info.link,rel:\"noopener noreferrer\",target:\"_blank\"},\"here\"),\" \",\"for deposit instructions\")),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"input\",{type:\"submit\",className:\"button\",onClick:this.onClose.bind(this),value:\"Close\"}))));var e=[];for(var t in this.state.deposit_info)this.state.deposit_info.hasOwnProperty(t)&&e.push(s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,t),s.a.createElement(\"td\",null,this.state.deposit_info[t])));return s.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\"},s.a.createElement(\"div\",{className:\"grid-container\"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"h3\",null,\"Deposit Information\")),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,e))),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"input\",{type:\"submit\",className:\"button\",onClick:this.onClose.bind(this),value:x.a.translate(\"account.perm.cancel\")}))))}return s.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\"},s.a.createElement(\"div\",{className:\"grid-container\"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"h3\",null,\"Deposit \",this.props.deposit_asset)),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(Y.a,{label:\"modal.deposit.amount\",amount:this.state.deposit_amount,asset:this.props.receive_asset.get(\"id\"),assets:[this.props.receive_asset.get(\"id\")],placeholder:\"0.0\",onChange:this.onDepositAmountChange.bind(this),display_balance:null})),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"input\",{type:\"submit\",className:\"button\",onClick:this.onSubmitDeposit.bind(this),value:x.a.translate(\"modal.deposit.submit\")}),s.a.createElement(\"input\",{type:\"submit\",className:\" button\",onClick:this.onClose.bind(this),value:x.a.translate(\"account.perm.cancel\")}))))}}]),t}();$.propTypes={account:p.a.ChainAccount.isRequired,issuer_account:p.a.ChainAccount.isRequired,deposit_asset:C.a.string,receive_asset:p.a.ChainAsset.isRequired,rpc_url:C.a.string};var ee=Object(d.a)($),te=a(36),ae=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ne=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={withdraw_amount:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ae(t,[{key:\"onWithdrawAmountChange\",value:function(e){var t=e.amount;e.asset;this.setState({withdraw_amount:t})}},{key:\"onSubmit\",value:function(){var e=this,t=this.props.receive_asset,a=l.a.get_asset_precision(t.get(\"precision\")),n=this.state.withdraw_amount.replace(/,/g,\"\"),s={jsonrpc:\"2.0\",method:\"getMemoForFiatWithdrawal\",params:{bitsharesAccountName:this.props.account.get(\"name\"),currency:this.props.deposit_asset,amount:n},id:1};fetch(this.props.rpc_url,{method:\"POST\",headers:new Headers({Accept:\"application/json\",\"content-type\":\"application/x-www-form-urlencoded\"}),body:\"rq=\"+encodeURIComponent(JSON.stringify(s))}).then(function(e){return e.json()}).then(function(s){if(!(\"result\"in s))throw\"error\"in s&&\"message\"in s.error?json_repsonse.error.message:\"Unable to approve withdrawal, please contact OpenLedger or try again later\";te.a.transfer(e.props.account.get(\"id\"),e.props.issuer_account.get(\"id\"),parseInt(n*a,10),t.get(\"id\"),s.result)}).catch(function(e){alert(e)})}},{key:\"render\",value:function(){var e=null,t=this.props.account.get(\"balances\").toJS();if(Object.keys(t).length>0){var a=this.props.receive_asset.get(\"id\");e=a?s.a.createElement(\"span\",null,s.a.createElement(u.a,{component:\"span\",content:\"transfer.available\"}),\":\",\" \",s.a.createElement(Q.a,{balance:t[a]})):\"No funds\"}else e=\"No funds\";return s.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\"},s.a.createElement(\"div\",{className:\"grid-container\"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"h3\",null,\"Withdraw \",this.props.deposit_asset)),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(Y.a,{label:\"modal.withdraw.amount\",amount:this.state.withdraw_amount,asset:this.props.receive_asset.get(\"id\"),assets:[this.props.receive_asset.get(\"id\")],placeholder:\"0.0\",onChange:this.onWithdrawAmountChange.bind(this),display_balance:e})),s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"input\",{type:\"submit\",className:\"button\",onClick:this.onSubmit.bind(this),value:x.a.translate(\"modal.withdraw.submit\")}),s.a.createElement(X.a,{close:this.props.modal_id},s.a.createElement(\"div\",{className:\"button\"},s.a.createElement(u.a,{content:\"account.perm.cancel\"}))))))}}]),t}();ne.propTypes={account:p.a.ChainAccount.isRequired,issuer_account:p.a.ChainAccount.isRequired,deposit_asset:C.a.string,receive_asset:p.a.ChainAsset.isRequired,rpc_url:C.a.string};var se=Object(d.a)(ne),ie=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function oe(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function re(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function le(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ce=function(e){function t(e){oe(this,t);var a=re(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return le(t,s.a.Component),ie(t,[{key:\"getWithdrawModalId\",value:function(){return\"withdraw_fiat_openledger_\"+this.props.receive_asset.get(\"symbol\")}},{key:\"getDepositModalId\",value:function(){return\"deposit_fiat_openledger_\"+this.props.receive_asset.get(\"symbol\")}},{key:\"onWithdraw\",value:function(){K.a.publish(this.getWithdrawModalId(),\"open\")}},{key:\"onDeposit\",value:function(){K.a.publish(this.getDepositModalId(),\"open\")}},{key:\"render\",value:function(){if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return s.a.createElement(\"tr\",{style:{display:\"none\"}},s.a.createElement(\"td\",null),s.a.createElement(\"td\",null),s.a.createElement(\"td\",null),s.a.createElement(\"td\",null));H.a.getWallet();var e=this.props.account.get(\"balances\"),t=(this.props.receive_asset.get(\"symbol\"),e.toJS());if(Object.keys(t).length>0){var a=this.props.receive_asset.get(\"id\");a&&s.a.createElement(\"span\",null,s.a.createElement(u.a,{component:\"span\",content:\"transfer.available\"}),\":\",\" \",s.a.createElement(Q.a,{balance:t[a]}))}var n=this.getDepositModalId(),i=this.getWithdrawModalId(),o=null;o=this.props.deposit_allowed?s.a.createElement(\"td\",null,s.a.createElement(\"button\",{className:\"button outline\",onClick:this.onDeposit.bind(this)},\" \",s.a.createElement(u.a,{content:\"gateway.deposit\"}),\" \"),s.a.createElement(J.a,{id:n,overlay:!0},s.a.createElement(X.a,{close:n},s.a.createElement(\"a\",{href:\"#\",className:\"close-button\"},\"Ã\")),s.a.createElement(\"br\",null),s.a.createElement(\"div\",{className:\"grid-block vertical\"},s.a.createElement(ee,{account:this.props.account.get(\"name\"),issuer_account:this.props.issuer_account.get(\"name\"),receive_asset:this.props.receive_asset.get(\"symbol\"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:n})))):s.a.createElement(\"td\",null,\"Click\",\" \",s.a.createElement(\"a\",{href:\"https://openledger.info/v/\",rel:\"noopener noreferrer\",target:\"_blank\"},\"here\"),\" \",\"to register for deposits of \",this.props.deposit_asset);var r=null;return r=this.props.withdraw_allowed?s.a.createElement(\"td\",null,s.a.createElement(\"button\",{className:\"button outline\",onClick:this.onWithdraw.bind(this)},\" \",s.a.createElement(u.a,{content:\"gateway.withdraw\"}),\" \"),s.a.createElement(J.a,{id:i,overlay:!0},s.a.createElement(X.a,{close:i},s.a.createElement(\"a\",{href:\"#\",className:\"close-button\"},\"Ã\")),s.a.createElement(\"br\",null),s.a.createElement(\"div\",{className:\"grid-block vertical\"},s.a.createElement(se,{account:this.props.account.get(\"name\"),issuer_account:this.props.issuer_account.get(\"name\"),receive_asset:this.props.receive_asset.get(\"symbol\"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:i})))):s.a.createElement(\"td\",null,\"Click\",\" \",s.a.createElement(\"a\",{href:\"https://openledger.info/v/\",rel:\"noopener noreferrer\",target:\"_blank\"},\"here\"),\" \",\"to register for withdrawals of \",this.props.deposit_asset),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,this.props.deposit_asset),o,s.a.createElement(\"td\",null,s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\")})),r)}}]),t}();ce.propTypes={url:C.a.string,gateway:C.a.string,deposit_coin_type:C.a.string,deposit_asset_name:C.a.string,deposit_account:C.a.string,receive_coin_type:C.a.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,deposit_asset:C.a.string,receive_asset:p.a.ChainAsset,deposit_allowed:C.a.bool,withdraw_allowed:C.a.bool},ce=Object(d.a)(ce);var ue=function(e){function t(e){oe(this,t);var a=re(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={allowedFiatCurrencies:{deposit:[],withdraw:[]}};var n={jsonrpc:\"2.0\",id:1,method:\"isValidatedForFiat\",params:{bitsharesAccountName:a.props.account.get(\"name\")}};return fetch(a.props.rpc_url,{method:\"POST\",headers:new Headers({Accept:\"application/json\",\"content-type\":\"application/x-www-form-urlencoded\"}),body:\"rq=\"+encodeURIComponent(JSON.stringify(n))}).then(function(e){return e.json()}).then(function(e){\"result\"in e&&a.setState({allowedFiatCurrencies:e.result})}).catch(function(e){a.setState({allowedFiatCurrencies:{deposit:[],withdraw:[]}})}),a}return le(t,s.a.Component),ie(t,[{key:\"componentWillUnmount\",value:function(){clearInterval(this.update_timer)}},{key:\"render\",value:function(){return this.props.account&&this.props.issuer_account,s.a.createElement(\"div\",null)}}]),t}();ue.propTypes={rpc_url:C.a.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount};var pe=ue=Object(d.a)(ue),de=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var me=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={current_status:\"never_loaded\",withdrawals:null,deposits:null,error:null},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),de(t,[{key:\"onShowOpenLedgerTransactionHistory\",value:function(){var e=this,t={jsonrpc:\"2.0\",method:\"getRequestsList\",params:{bitsharesAccountName:this.props.account.get(\"name\")},id:1};fetch(this.props.rpc_url,{method:\"POST\",headers:new Headers({Accept:\"application/json\",\"content-type\":\"application/x-www-form-urlencoded\"}),body:\"rq=\"+encodeURIComponent(JSON.stringify(t))}).then(function(e){return e.json()}).then(function(t){if(!(\"result\"in t))throw\"error\"in t&&\"message\"in t.error?json_repsonse.error.message:\"Unexpected response\";e.setState({current_status:\"loaded\",withdrawals:t.result.withdrawals,deposits:t.result.deposits,error:null})}).catch(function(t){e.setState({current_status:\"error\",withdrawals:null,deposits:null,error:\"Error getting transaction history: \"+t})})}},{key:\"render\",value:function(){if(!this.props.account)return null;var e=null;if(\"loaded\"===this.state.current_status){var t=[];if(this.state.withdrawals.length){for(var a=0;a<this.state.withdrawals.length;++a)t.push(s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,this.state.withdrawals[a].amount,\" \",this.state.withdrawals[a].currency),s.a.createElement(\"td\",null,this.state.withdrawals[a].status)));e=s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"openledger.withdraw_amount\"})),s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"openledger.status\"})))),s.a.createElement(\"tbody\",null,t))}else e=s.a.createElement(u.a,{component:\"p\",content:\"openledger.withdraw_none\"})}var n=null;if(\"loaded\"===this.state.current_status)if(this.state.deposits.length){var i=[];for(a=0;a<this.state.deposits.length;++a)i.push(s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,this.state.deposits[a].amount,\" \",this.state.deposits[a].currency),s.a.createElement(\"td\",null,s.a.createElement(\"a\",{href:this.state.deposits[a].link,rel:\"noopener noreferrer\",target:\"_blank\"},\"link\")),s.a.createElement(\"td\",null,this.state.deposits[a].status)));n=s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"openledger.deposit_amount\"})),s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"openledger.deposit_details\"})),s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"openledger.status\"})))),s.a.createElement(\"tbody\",null,i))}else n=s.a.createElement(u.a,{component:\"p\",content:\"openledger.deposit_none\"});var o=null;if(\"error\"===this.state.current_status)o=s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"button\",{className:\"button outline\",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)},s.a.createElement(u.a,{content:\"openledger.retry\"})),s.a.createElement(\"p\",null,this.state.error));else if(\"loading\"===this.state.current_status)o=s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"button\",{className:\"button outline\",onClick:this.onShowOpenLedgerTransactionHistory.bind(this),disabled:\"true\"},s.a.createElement(u.a,{content:\"openledger.show_transaction_history\"})),s.a.createElement(u.a,{component:\"p\",content:\"openledger.loading\"}));else{var r=\"never_loaded\"===this.state.current_status?s.a.createElement(u.a,{content:\"openledger.show_transaction_history\"}):s.a.createElement(u.a,{content:\"openledger.refresh_transaction_history\"});o=s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"br\",null),s.a.createElement(u.a,{component:\"h4\",content:\"openledger.header_transaction_history\"}),s.a.createElement(\"button\",{className:\"button outline\",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)},r),e,n)}return o}}]),t}();me.propTypes={rpc_url:C.a.string,account:p.a.ChainAccount};var he=Object(d.a)(me),_e=a(2186),fe=a(2187),ye=a(59),ge=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var we=new ye.a(\"__bts__\"),ve=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.current_citadel_address_cache_version_string=\"2\"}return ge(e,[{key:\"getIndexForDepositKeyInExchange\",value:function(e,t,a){return[this.current_citadel_address_cache_version_string,e,t,a].reduce(function(e,t){return e.concat(\"[\",t,\"]\")},\"\")}},{key:\"getCachedInputAddress\",value:function(e,t,a,n){var s=H.a.getWallet(),i=this.getIndexForDepositKeyInExchange(t,a,n);if(s){s.deposit_keys=s.deposit_keys||{},s.deposit_keys[e]=s.deposit_keys[e]||{},s.deposit_keys[e][i]=s.deposit_keys[e][i]||[];var o=s.deposit_keys[e][i].length;return o?s.deposit_keys[e][i][o-1]:null}var r=we.get(\"deposit_keys\",{});r[e]=r[e]||{},r[e][i]=r[e][i]||[];var l=r[e][i].length;return l?r[e][i][l-1]:null}},{key:\"cacheInputAddress\",value:function(e,t,a,n,s,i){if(s){var o=H.a.getWallet(),r=this.getIndexForDepositKeyInExchange(t,a,n);if(o)delete o.deposit_keys.undefined,Object.keys(o.deposit_keys||{}).forEach(function(e){for(var t in o.deposit_keys[e])if(o.deposit_keys[e][t]&&o.deposit_keys[e][t].length)for(var a=o.deposit_keys[e][t].length-1;a>=0;a--)o.deposit_keys[e][t][a]&&\"unknown\"===o.deposit_keys[e][t][a].address&&o.deposit_keys[e][t].splice(a,1)}),o.deposit_keys=o.deposit_keys||{},o.deposit_keys[e]=o.deposit_keys[e]||{},o.deposit_keys[e][r]=o.deposit_keys[e][r]||[],o.deposit_keys[e][r].push({address:s,memo:i}),H.a._updateWallet();else{var l=we.get(\"deposit_keys\",{});l[e]=l[e]||{},l[e][r]=l[e][r]||[],l[e][r].push({address:s,memo:i}),we.set(\"deposit_keys\",l)}}}}]),e}(),be=(a(74),a(106)),Ee=a(27),ke=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){s=!0,i=e}finally{try{!n&&r.return&&r.return()}finally{if(s)throw i}}return a}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),Ce=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function Se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ae(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Oe(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function Ne(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var xe=function(e){function t(){return Ae(this,t),Oe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ne(t,s.a.Component),Ce(t,[{key:\"getWithdrawModalId\",value:function(){return\"withdraw_asset_\"+this.props.gateway+\"_bridge\"}},{key:\"onWithdraw\",value:function(){this.props.showModal()}},{key:\"render\",value:function(){var e=this.getWithdrawModalId(),t=\"button disabled\";return Object.keys(this.props.account.get(\"balances\").toJS()).includes(this.props.asset.get(\"id\"))&&this.props.amount_to_withdraw&&!(this.props.amount_to_withdraw.indexOf(\" \")>=0)&&!isNaN(this.props.amount_to_withdraw)&&this.props.amount_to_withdraw>0&&this.props.amount_to_withdraw<=this.props.balance.toJS().balance/l.a.get_asset_precision(this.props.asset.get(\"precision\"))&&(t=\"button\"),s.a.createElement(\"span\",null,s.a.createElement(\"span\",null,s.a.createElement(\"button\",{className:t,onClick:this.onWithdraw.bind(this)},s.a.createElement(u.a,{content:\"\"}),s.a.createElement(u.a,{content:\"gateway.withdraw_now\"}),\" \")),s.a.createElement(M.Modal,{title:x.a.translate(\"gateway.withdraw_coin\",{coin:this.props.output_coin_name,symbol:this.props.output_coin_symbol}),visible:this.props.visible,onCancel:this.props.hideModal,footer:null},s.a.createElement(fe.a,{showModal:this.props.showModal,hideModal:this.props.hideModal,key:\"\"+this.props.key,account:this.props.account.get(\"name\"),issuer:this.props.issuer,asset:this.props.asset.get(\"id\"),output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,modal_id:e,url:this.props.url,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get(\"balances\").toJS()[this.props.asset.get(\"id\")]})))}}]),t}();xe.propTypes={balance:p.a.ChainObject,url:C.a.string.isRequired},xe=Object(d.a)(xe);var Te=function(e){function t(){return Ae(this,t),Oe(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ne(t,s.a.Component),Ce(t,[{key:\"render\",value:function(){var e=s.a.createElement(xe,{showModal:this.props.showModal,hideModal:this.props.hideModal,visible:this.props.visible,key:this.props.key,account:this.props.account,issuer:this.props.issuer,asset:this.props.asset,output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,url:this.props.url,gateway:this.props.gateway,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get(\"balances\").toJS()[this.props.asset.get(\"id\")]});return s.a.createElement(\"span\",null,e)}}]),t}();Te.propTypes={account:p.a.ChainAccount.isRequired,asset:p.a.ChainAsset.isRequired,output_coin_type:C.a.string.isRequired,url:C.a.string.isRequired},Te=Object(d.a)(Te);var je=function(e){function t(e){Ae(this,t);var a=Oe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.refresh_interval=12e4,a.deposit_address_cache=new ve,a.coin_info_request_states={request_in_progress:0,request_complete:1,request_failed:2},a.estimation_directions={output_from_input:0,input_from_output:1},a.state={isModalVisible:!1,coin_symbol:\"xmr\",key_for_withdrawal_dialog:\"xmr\",supports_output_memos:\"\",url:w.c.BASE,error:null,deposit_input_coin_type:null,deposit_output_coin_type:null,input_address_and_memo:null,deposit_estimated_input_amount:a.props.initial_deposit_estimated_input_amount||\"1.0\",deposit_estimated_output_amount:null,deposit_limit:null,deposit_error:null,failed_calculate_deposit:null,withdraw_input_coin_type:null,withdraw_output_coin_type:null,withdraw_estimated_input_amount:a.props.initial_withdraw_estimated_input_amount||\"1.0\",withdraw_estimated_output_amount:null,withdraw_limit:null,withdraw_error:null,failed_calculate_withdraw:null,coin_info_request_state:a.coin_info_request_states.request_in_progress,input_address_requests_in_progress:{},deposit_estimate_direction:a.estimation_directions.output_from_input,deposit_limit_cache:{},deposit_limit_requests_in_progress:{},coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,announcements:[]},a.showModal=a.showModal.bind(a),a.hideModal=a.hideModal.bind(a),a}return Ne(t,s.a.Component),Ce(t,[{key:\"showModal\",value:function(){this.setState({isModalVisible:!0})}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1})}},{key:\"urlConnection\",value:function(e,t){var a=this;this.setState({url:e});var n=fetch(e+\"/coins\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}),s=fetch(e+\"/wallets\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}),i=fetch(e+\"/trading-pairs\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}),o=fetch(e+\"/active-wallets\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()});Promise.all([n,s,i,o]).then(function(e){var t=ke(e,4),n=t[0],s=(t[1],t[2]),i=t[3],o={};n.forEach(function(e){return o[e.coinType]=e});var r={},l={};s.forEach(function(e){var t=o[e.inputCoinType],a=o[e.outputCoinType];(t.backingCoinType!=e.outputCoinType||a.backingCoinType!=e.inputCoinType&&0==t.restricted&&0==a.restricted)&&-1!=i.indexOf(t.walletType)&&-1!=i.indexOf(a.walletType)&&(\"bitshares2\"!=t.walletType&&\"bitshares2\"==a.walletType?(r[e.inputCoinType]=r[e.inputCoinType]||[],r[e.inputCoinType].push(e.outputCoinType)):(l[e.inputCoinType]=l[e.inputCoinType]||[],l[e.inputCoinType].push(e.outputCoinType)))});var c=null,u=null,p=Object.keys(r);if(p.forEach(function(e){r[e].sort()}),p.length){c=a.props.initial_deposit_input_coin_type&&a.props.initial_deposit_input_coin_type in r?a.props.initial_deposit_input_coin_type:p[0];var d=r[c];u=a.props.initial_deposit_output_coin_type&&-1!=d.indexOf(a.props.initial_deposit_output_coin_type)?a.props.initial_deposit_output_coin_type:d[0]}var m=null,h=null,_=Object.keys(l);if(_.forEach(function(e){l[e].sort()}),_.length){m=a.props.initial_withdraw_input_coin_type&&a.props.initial_withdraw_input_coin_type in l?a.props.initial_withdraw_input_coin_type:_[0];var f=l[m];h=a.props.initial_withdraw_output_coin_type&&-1!=f.indexOf(a.props.initial_withdraw_output_coin_type)?a.props.initial_withdraw_output_coin_type:f[0]}var y=a.getCachedOrGeneratedInputAddress(c,u),g=a.getCachedOrFreshDepositLimit(\"deposit\",c,u),w=a.getAndUpdateOutputEstimate(\"deposit\",c,u,a.state.deposit_estimated_input_amount),v=a.getAndUpdateOutputEstimate(\"withdraw\",m,h,a.state.withdraw_estimated_input_amount),b=a.getCachedOrFreshDepositLimit(\"withdraw\",m,h);a.unMounted||a.setState({coin_info_request_state:a.coin_info_request_states.request_complete,coins_by_type:o,allowed_mappings_for_deposit:r,allowed_mappings_for_withdraw:l,deposit_input_coin_type:c,deposit_output_coin_type:u,input_address_and_memo:y,deposit_limit:g,deposit_estimated_output_amount:w,deposit_estimate_direction:a.estimation_directions.output_from_input,withdraw_input_coin_type:m,withdraw_output_coin_type:h,withdraw_limit:b,withdraw_estimated_output_amount:v,withdraw_estimate_direction:a.estimation_directions.output_from_input,supports_output_memos:o.xmr.supportsOutputMemos})}).catch(function(e){a.setState({coin_info_request_state:t,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null})})}},{key:\"updateEstimates\",value:function(){if(this.state.deposit_input_coin_type&&this.state.deposit_output_coin_type){var e=this.getCachedOrGeneratedInputAddress(this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),t=this.getCachedOrFreshDepositLimit(\"deposit\",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),a=this.state.deposit_estimated_input_amount,n=this.state.deposit_estimated_output_amount;this.state.deposit_estimate_direction==this.estimation_directions.output_from_input?n=this.getAndUpdateOutputEstimate(\"deposit\",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,a):a=this.getAndUpdateInputEstimate(\"deposit\",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,n);var s=this.getCachedOrFreshDepositLimit(\"withdraw\",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type),i=this.state.withdraw_estimated_input_amount,o=this.state.withdraw_estimated_output_amount;this.state.withdraw_estimate_direction==this.estimation_directions.output_from_input?o=this.getAndUpdateOutputEstimate(\"withdraw\",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,i):i=this.getAndUpdateinputEstimate(\"withdraw\",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,o),this.setState({input_address_and_memo:e,deposit_limit:t,deposit_estimated_input_amount:a,deposit_estimated_output_amount:n,withdraw_limit:s,withdraw_estimated_input_amount:i,withdraw_estimated_output_amount:o,key_for_withdrawal_dialog:i})}}},{key:\"componentWillMount\",value:function(){var e=this,t=this.state.url;this.urlConnection(t,0);var a=fetch(t+\"/coins\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}),n=fetch(t+\"/trading-pairs\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}),s=fetch(t+\"/active-wallets\",{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()});Promise.all([a,n,s]).then(function(e){var t=ke(e,3),a=t[0],n=t[1],s=t[2],i={};a.forEach(function(e){return i[e.coinType]=e}),n.forEach(function(e){var t=i[e.inputCoinType],a=i[e.outputCoinType];t.backingCoinType!=e.outputCoinType&&a.backingCoinType!=e.inputCoinType&&-1!=s.indexOf(t.walletType)&&s.indexOf(a.walletType)})}).catch(function(t){e.urlConnection(\"https://citadel.li/trade\",2),e.setState({coin_info_request_state:0,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null})})}},{key:\"componentDidMount\",value:function(){this.update_timer=setInterval(this.updateEstimates.bind(this),this.refresh_interval)}},{key:\"componentWillUnmount\",value:function(){clearInterval(this.update_timer),this.unMounted=!0}},{key:\"getCachedInputAddress\",value:function(e,t,a){var n=this.props.account.get(\"name\");return this.deposit_address_cache.getCachedInputAddress(this.props.gateway,n,e,t)}},{key:\"cacheInputAddress\",value:function(e,t,a,n){var s=this.props.account.get(\"name\");this.deposit_address_cache.cacheInputAddress(this.props.gateway,s,e,t,a,n)}},{key:\"getCachedOrGeneratedInputAddress\",value:function(e,t){var a=this,n=this.getCachedInputAddress(e,t);if(n)return n;if(this.state.input_address_requests_in_progress[e]=this.state.input_address_requests_in_progress[e]||{},this.state.input_address_requests_in_progress[e][t])return null;var s=JSON.stringify({inputCoinType:e,outputCoinType:t,outputAddress:this.props.account.get(\"name\")});return this.state.input_address_requests_in_progress[e][t]=!0,fetch(this.state.url+\"/simple-api/initiate-trade\",{method:\"post\",headers:new Headers({Accept:\"application/json\",\"Content-Type\":\"application/json\"}),body:s}).then(function(n){n.json().then(function(n){if(console.assert(n.inputCoinType==e,\"unexpected reply from initiate-trade\"),console.assert(n.outputCoinType==t,\"unexpected reply from initiate-trade\"),n.inputCoinType!=e||n.outputCoinType!=t)throw Error(\"unexpected reply from initiate-trade\");a.cacheInputAddress(n.inputCoinType,n.outputCoinType,n.inputAddress,n.inputMemo),delete a.state.input_address_requests_in_progress[e][t],a.state.deposit_input_coin_type==n.inputCoinType&&a.state.deposit_output_coin_type==n.outputCoinType&&a.setState({input_address_and_memo:{address:n.inputAddress,memo:n.inputMemo}})},function(n){delete a.state.input_address_requests_in_progress[e][t],a.state.deposit_input_coin_type==e&&a.state.deposit_output_coin_type==t&&a.setState({input_address_and_memo:{address:\"error generating address\",memo:null}})})},function(n){delete a.state.input_address_requests_in_progress[e][t],a.state.deposit_input_coin_type==e&&a.state.deposit_output_coin_type==t&&a.setState({input_address_and_memo:{address:\"error generating address\",memo:null}})}),null}},{key:\"getCachedDepositLimit\",value:function(e,t){if(this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]){var a=this.state.deposit_limit_cache[e][t];if(new Date-a.timestamp<this.refresh_interval)return a;delete this.state.deposit_limit_cache[e][t]}return null}},{key:\"cacheDepositLimit\",value:function(e,t,a){a.timestamp=new Date,this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]=a}},{key:\"getCachedOrFreshDepositLimit\",value:function(e,t,a){var n=this,s=this.getCachedDepositLimit(t,a);if(s)return s;this.state.deposit_limit_requests_in_progress[t]=this.state.input_address_requests_in_progress[t]||{},this.state.deposit_limit_requests_in_progress[t][a]=!0;var i=this.state.url+\"/deposit-limits?inputCoinType=\"+encodeURIComponent(t)+\"&outputCoinType=\"+encodeURIComponent(a);return fetch(i,{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}).then(function(s){if(!n.unMounted){if(console.assert(s.inputCoinType==t&&s.outputCoinType==a,\"unexpected reply from deposit-limits\"),s.inputCoinType!=t||s.outputCoinType!=a)throw Error(\"unexpected reply from deposit-limits\");var i={timestamp:new Date,limit:s.depositLimit};n.cacheDepositLimit(t,a,i),delete n.state.deposit_limit_requests_in_progress[t][a],n.state[e+\"_input_coin_type\"]==t&&n.state[e+\"_output_coin_type\"]==a&&n.setState(Se({},e+\"_limit\",i))}},function(e){delete n.state.deposit_limit_requests_in_progress[t][a]}),null}},{key:\"getAndUpdateOutputEstimate\",value:function(e,t,a,n){var s=this;if(!this.unMounted){\"deposit\"==e&&this.setState({failed_calculate_deposit:null}),\"withdraw\"==e&&this.setState({failed_calculate_withdraw:null});var i=this.state.url+\"/estimate-output-amount?inputAmount=\"+encodeURIComponent(n)+\"&inputCoinType=\"+encodeURIComponent(t)+\"&outputCoinType=\"+encodeURIComponent(a);return fetch(i,{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}).then(function(i){if(!s.unMounted)if(i.error){if(s.state[e+\"_input_coin_type\"]==t&&s.state[e+\"_output_coin_type\"]==a&&s.state[e+\"_estimated_input_amount\"]==n&&s.state[e+\"_estimate_direction\"]==s.estimation_directions.output_from_input){var o=i.error.message;\"deposit\"==e&&s.setState({failed_calculate_deposit:\"Failed to calculate\"}),\"withdraw\"==e&&s.setState({failed_calculate_withdraw:\"Failed to calculate\"});o.startsWith(\"Internal Server Error: \")&&(o=o.substr(\"Internal Server Error: \".length)),s.setState(Se({},e+\"_error\",o))}}else{var r,l;if(console.assert(i.inputCoinType==t&&i.outputCoinType==a&&i.inputAmount==n,\"unexpected reply from estimate-output-amount\"),i.inputCoinType!=t||i.outputCoinType!=a||i.inputAmount!=n)s.setState((Se(r={},e+\"_estimated_output_amount\",i.outputAmount),Se(r,e+\"_error\",null),r));if(s.state[e+\"_input_coin_type\"]==t&&s.state[e+\"_output_coin_type\"]==a&&s.state[e+\"_estimated_input_amount\"]==n&&s.state[e+\"_estimate_direction\"]==s.estimation_directions.output_from_input)s.setState((Se(l={},e+\"_estimated_output_amount\",i.outputAmount),Se(l,e+\"_error\",null),l))}},function(e){}),null}}},{key:\"getAndUpdateInputEstimate\",value:function(e,t,a,n){var s=this;if(!this.unMounted){\"deposit\"==e&&this.setState({failed_calculate_deposit:null}),\"withdraw\"==e&&this.setState({failed_calculate_withdraw:null});var i=this.state.url+\"/estimate-input-amount?outputAmount=\"+encodeURIComponent(n)+\"&inputCoinType=\"+encodeURIComponent(t)+\"&outputCoinType=\"+encodeURIComponent(a);return fetch(i,{method:\"get\",headers:new Headers({Accept:\"application/json\"})}).then(function(e){return e.json()}).then(function(i){var o;s.unMounted||(console.assert(i.inputCoinType==t&&i.outputCoinType==a&&i.outputAmount==n,\"unexpected reply from estimate-input-amount\"),i.inputCoinType==t&&i.outputCoinType==a&&i.outputAmount==n||(\"deposit\"==e&&s.setState({failed_calculate_deposit:\"Failed to calculate\"}),\"withdraw\"==e&&s.setState({failed_calculate_withdraw:\"Failed to calculate\"})),s.state[e+\"_input_coin_type\"]==t&&s.state[e+\"_output_coin_type\"]==a&&s.state[e+\"_estimated_output_amount\"]==n&&s.state[e+\"_estimate_direction\"]==s.estimation_directions.input_from_output&&s.setState((Se(o={},e+\"_estimated_input_amount\",i.inputAmount),Se(o,\"key_for_withdrawal_dialog\",i.inputAmount),o)))},function(e){}),null}}},{key:\"onInputAmountChanged\",value:function(e,t){var a,n=t.target.value;\"\"==n&&(n=\"0\");var s=this.getAndUpdateOutputEstimate(e,this.state[e+\"_input_coin_type\"],this.state[e+\"_output_coin_type\"],n);this.setState((Se(a={},e+\"_estimated_input_amount\",n),Se(a,e+\"_estimated_output_amount\",s),Se(a,e+\"_estimate_direction\",this.estimation_directions.output_from_input),Se(a,\"key_for_withdrawal_dialog\",n),a))}},{key:\"onOutputAmountChanged\",value:function(e,t){var a,n=t.target.value;\"\"==n&&(n=\"0\");var s=this.getAndUpdateInputEstimate(e,this.state[e+\"_input_coin_type\"],this.state[e+\"_output_coin_type\"],n);this.setState((Se(a={},e+\"_estimated_output_amount\",n),Se(a,e+\"_estimated_input_amount\",s),Se(a,e+\"_estimate_direction\",this.estimation_directions.input_from_output),a))}},{key:\"getWithdrawModalId\",value:function(){return\"withdraw_asset_\"+this.props.gateway+\"_bridge\"}},{key:\"onWithdraw\",value:function(){this.showModal()}},{key:\"onInputCoinTypeChanged\",value:function(e,t){var a,n=this,s=null,i=\"_estimated_output_amount\",o=t.target.value,r=this.state[\"allowed_mappings_for_\"+e][o],l=r[0];-1!=r.indexOf(this.state[e+\"_output_coin_type\"])&&(l=this.state[e+\"_output_coin_type\"]);var c=this.state.input_address_and_memo;\"deposit\"==e&&(c=this.getCachedOrGeneratedInputAddress(o,l));var u=this.getCachedOrFreshDepositLimit(e,o,l);this.state[e+\"_estimated_input_amount\"]?s=this.getAndUpdateOutputEstimate(e,o,l,this.state[e+\"_estimated_input_amount\"]):(s=this.getAndUpdateInputEstimate(e,o,l,this.state[e+\"_estimated_output_amount\"]),i=\"_estimated_input_amount\"),\"withdraw\"==e&&r.forEach(function(e){l===e&&n.setState({coin_symbol:o+\"input\",supports_output_memos:n.state.coins_by_type[e].supportsOutputMemos})}),this.setState((Se(a={},e+\"_input_coin_type\",o),Se(a,e+\"_output_coin_type\",l),Se(a,\"input_address_and_memo\",c),Se(a,e+\"_limit\",u),Se(a,e+i,s),Se(a,e+\"_estimate_direction\",this.estimation_directions.output_from_input),a))}},{key:\"onOutputCoinTypeChanged\",value:function(e,t){var a,n=this,s=null,i=\"_estimated_output_amount\",o=t.target.value,r=this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type];\"withdraw\"==e&&r.forEach(function(e){o===e&&n.setState({coin_symbol:o+\"output\",supports_output_memos:n.state.coins_by_type[e].supportsOutputMemos,key_for_withdrawal_dialog:o})});var l=this.state.input_address_and_memo;\"deposit\"==e&&(l=this.getCachedOrGeneratedInputAddress(this.state[e+\"_input_coin_type\"],o));var c=this.getCachedOrFreshDepositLimit(e,this.state[e+\"_input_coin_type\"],o);this.state[e+\"_estimated_input_amount\"]?s=this.getAndUpdateOutputEstimate(e,this.state[e+\"_input_coin_type\"],o,this.state[e+\"_estimated_input_amount\"]):(s=this.getAndUpdateInputEstimate(e,this.state[e+\"_input_coin_type\"],o,this.state[e+\"_estimated_output_amount\"]),i=\"_estimated_input_amount\"),this.setState((Se(a={},e+\"_output_coin_type\",o),Se(a,\"input_address_and_memo\",l),Se(a,e+\"_limit\",c),Se(a,e+i,s),Se(a,e+\"_estimate_direction\",this.estimation_directions.output_from_input),a))}},{key:\"render\",value:function(){var e=this;if(!this.props.account||!this.props.issuer_account||!this.props.gateway)return s.a.createElement(\"div\",null);var t=void 0,a=void 0,n=void 0,i=void 0,o=void 0;if(this.state.coin_info_request_state==this.coin_info_request_states.request_failed)return s.a.createElement(\"div\",null,s.a.createElement(\"p\",null,\"Error connecting to citadel.li, please try again later\"));if(this.state.coin_info_request_state==this.coin_info_request_states.never_requested||this.state.coin_info_request_state==this.coin_info_request_states.request_in_progress)return s.a.createElement(\"div\",null,s.a.createElement(\"p\",null,\"Retrieving current trade data from citadel.li\"));var r=null,c=s.a.createElement(u.a,{content:\"gateway.calc\"});null!=this.state.failed_calculate_deposit&&(c=this.state.failed_calculate_deposit);var p=s.a.createElement(u.a,{content:\"gateway.calc\"});null!=this.state.failed_calculate_withdraw&&(p=this.state.failed_calculate_withdraw);s.a.createElement(u.a,{content:\"gateway.calc\"});if(null!=this.state.failed_calculate_conversion&&this.state.failed_calculate_conversion,Object.getOwnPropertyNames(this.state.allowed_mappings_for_deposit).length>0){var d=[];Object.keys(this.state.allowed_mappings_for_deposit).sort().forEach(function(t){d.push(s.a.createElement(\"option\",{key:t,value:t||\"\"},e.state.coins_by_type[t].symbol))});var m=s.a.createElement(\"select\",{style:{width:\"11rem\"},className:\"external-coin-types\",value:this.state.deposit_input_coin_type||\"\",onChange:this.onInputCoinTypeChanged.bind(this,\"deposit\")},d),h=[];this.state.allowed_mappings_for_deposit[this.state.deposit_input_coin_type].forEach(function(t){h.push(s.a.createElement(\"option\",{key:t,value:t||\"\"},e.state.coins_by_type[t].walletSymbol))});var f=s.a.createElement(\"select\",{style:{width:\"11rem\"},className:\"native-coin-types\",value:this.state.deposit_output_coin_type||\"\",onChange:this.onOutputCoinTypeChanged.bind(this,\"deposit\")},h),y=this.state.input_address_and_memo?this.state.input_address_and_memo:{address:\"unknown\",memo:null},g=this.state.deposit_estimated_input_amount,w=this.state.deposit_estimated_output_amount,v=g?s.a.createElement(\"input\",{style:{width:\"11rem\"},type:\"text\",value:g||\"\",onChange:this.onInputAmountChanged.bind(this,\"deposit\")}):c,b=w?s.a.createElement(\"input\",{style:{width:\"11rem\"},type:\"text\",value:w||\"\",onChange:this.onOutputAmountChanged.bind(this,\"deposit\")}):c,E=s.a.createElement(\"span\",null,\"updating\");this.state.deposit_limit&&(E=this.state.deposit_limit.limit?s.a.createElement(\"div\",{className:\"blocktrades-bridge\"},s.a.createElement(\"span\",{className:\"deposit-limit\"},s.a.createElement(u.a,{content:\"gateway.limit\",amount:l.a.format_number(this.state.deposit_limit.limit,8),symbol:this.state.coins_by_type[this.state.deposit_input_coin_type].walletSymbol}))):null);var k=null;this.state.deposit_error&&(k=s.a.createElement(\"div\",null,this.state.deposit_error)),n=s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"gateway.deposit\"})),s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"gateway.balance\"})),s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"gateway.deposit_to\",asset:this.state.deposit_input_coin_type}))));var C=null;C=y.memo?s.a.createElement(u.a,{unsafe:!0,content:\"gateway.address_with_memo\",address:y.address,memo:y.memo}):s.a.createElement(\"span\",null,y.address),a=s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(\"div\",{className:\"blocktrades-bridge\",style:{display:\"flex\",alignItems:\"center\"}},s.a.createElement(\"div\",{className:\"inline-block\"},s.a.createElement(\"div\",null,m),s.a.createElement(\"div\",null,v)),\"â\",s.a.createElement(\"div\",{className:\"inline-block\"},s.a.createElement(\"div\",null,f),s.a.createElement(\"div\",null,b)),s.a.createElement(\"div\",null,k))),s.a.createElement(\"td\",null,s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.state.coins_by_type[this.state.deposit_output_coin_type].walletSymbol})),s.a.createElement(\"td\",{style:{wordBreak:\"break-all\"}},C,s.a.createElement(\"br\",null),E)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_withdraw).length>0){this.getWithdrawModalId();this.state.coins_by_type[this.state.withdraw_input_coin_type].symbol;r=this.state.withdraw_estimated_input_amount;var S=[];Object.keys(this.state.allowed_mappings_for_withdraw).sort().forEach(function(t){S.push(s.a.createElement(\"option\",{key:t,value:t},e.state.coins_by_type[t].walletSymbol))});var A=s.a.createElement(\"select\",{style:{width:\"11rem\"},className:\"native-coin-types\",value:this.state.withdraw_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,\"withdraw\")},S),O=[];this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type].forEach(function(t){O.push(s.a.createElement(\"option\",{key:t,value:t},e.state.coins_by_type[t].symbol))});var N=s.a.createElement(\"select\",{style:{width:\"11rem\"},className:\"external-coin-types\",value:this.state.withdraw_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,\"withdraw\")},O),x=this.state.withdraw_estimated_input_amount,T=x?s.a.createElement(\"input\",{style:{width:\"11rem\"},type:\"text\",value:x||\"\",onChange:this.onInputAmountChanged.bind(this,\"withdraw\")}):p,j=this.state.withdraw_estimated_output_amount,M=j?s.a.createElement(\"input\",{style:{width:\"11rem\"},type:\"text\",value:j||\"\",onChange:this.onOutputAmountChanged.bind(this,\"withdraw\")}):p,I=s.a.createElement(Te,{showModal:this.showModal,hideModal:this.hideModal,visible:this.state.isModalVisible,key:this.state.key_for_withdrawal_dialog,account:this.props.account.get(\"name\"),issuer:this.props.issuer_account.get(\"name\"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol,output_coin_name:this.state.coins_by_type[this.state.withdraw_output_coin_type].name,output_coin_symbol:this.state.coins_by_type[this.state.withdraw_output_coin_type].symbol,output_coin_type:this.state.withdraw_output_coin_type,output_supports_memos:this.state.supports_output_memos,amount_to_withdraw:r,url:this.state.url,gateway:this.props.gateway,output_wallet_type:this.state.coins_by_type[this.state.withdraw_output_coin_type].walletType}),B=null;this.state.withdraw_error&&(B=s.a.createElement(\"div\",null,this.state.withdraw_error));var P=s.a.createElement(\"span\",null,\"...\");this.state.withdraw_limit&&(P=this.state.withdraw_limit.limit?s.a.createElement(\"div\",{className:\"blocktrades-bridge\"},s.a.createElement(\"span\",{className:\"deposit-limit\"},s.a.createElement(u.a,{content:\"gateway.limit\",amount:l.a.format_number(this.state.withdraw_limit.limit,8),symbol:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol}))):s.a.createElement(\"div\",{className:\"blocktrades-bridge\"},s.a.createElement(\"span\",{className:\"deposit-limit\"},\"no limit\"))),o=s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"gateway.withdraw\"})),s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"gateway.balance\"})),s.a.createElement(\"th\",null))),i=s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(\"div\",{className:\"blocktrades-bridge\"},s.a.createElement(\"div\",{className:\"inline-block\"},s.a.createElement(\"div\",null,A),s.a.createElement(\"div\",null,T)),\"â\",s.a.createElement(\"div\",{className:\"inline-block\"},s.a.createElement(\"div\",null,N),s.a.createElement(\"div\",null,M)),s.a.createElement(\"div\",null,B))),s.a.createElement(\"td\",null,s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol})),s.a.createElement(\"td\",null,I,s.a.createElement(\"br\",null),P)))}return this.state.announcements.length>0&&(t=s.a.createElement(\"div\",{className:\"blocktrades-announcements-container\"},this.state.announcements.map(function(e,t){var a=\"txtann info\";return 10===e.status?a=\"txtann error\":20===e.status?a=\"txtann warning\":30===e.status?a=\"txtann success\":40===e.status&&(a=\"txtann info\"),1===e.format&&e.message.replace(/\\r\\n|\\r|\\n/g,\"<br />\"),s.a.createElement(\"div\",{className:\"blocktrades-announcements \"+a,key:t},e.message)},this))),s.a.createElement(\"div\",null,s.a.createElement(\"div\",{style:{paddingBottom:15}},s.a.createElement(u.a,{component:\"h5\",content:\"gateway.bridge_text\"})),t,s.a.createElement(\"table\",{className:\"table\"},n,a,o,i))}}]),t}();je.propTypes={url:C.a.string,gateway:C.a.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,initial_deposit_input_coin_type:C.a.string,initial_deposit_output_coin_type:C.a.string,initial_deposit_estimated_input_amount:C.a.string,initial_withdraw_input_coin_type:C.a.string,initial_withdraw_output_coin_type:C.a.string,initial_withdraw_estimated_input_amount:C.a.string};var Me=Object(d.a)(je),Ie=a(21),Be=a(2188),Pe=a(2189),De=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Fe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.current_rudex_address_cache_version_string=\"1\"}return De(e,[{key:\"getIndexForDepositKeyInExchange\",value:function(e,t,a){return[this.current_rudex_address_cache_version_string,e,t,a].reduce(function(e,t){return e.concat(\"[\",t,\"]\")},\"\")}},{key:\"getCachedInputAddress\",value:function(e,t,a,n){var s=H.a.getWallet();if(!s)return null;s.deposit_keys=s.deposit_keys||{},s.deposit_keys[e]=s.deposit_keys[e]||{};var i=this.getIndexForDepositKeyInExchange(t,a,n);s.deposit_keys[e][i]=s.deposit_keys[e][i]||[];var o=s.deposit_keys[e][i].length;return o?s.deposit_keys[e][i][o-1]:null}},{key:\"cacheInputAddress\",value:function(e,t,a,n,s,i){var o=H.a.getWallet();if(!o)return null;o.deposit_keys=o.deposit_keys||{},o.deposit_keys[e]=o.deposit_keys[e]||{};var r=this.getIndexForDepositKeyInExchange(t,a,n);o.deposit_keys[e][r]=o.deposit_keys[e][r]||[],o.deposit_keys[e][r].push({address:s,memo:i}),H.a._updateWallet()}}]),e}(),Re=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var qe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.deposit_address_cache=new Fe,a.state={isModalVisible:!1,receive_address:null},a.addDepositAddress=a.addDepositAddress.bind(a),a.showModal=a.showModal.bind(a),a.hideModal=a.hideModal.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Re(t,[{key:\"showModal\",value:function(){this.setState({isModalVisible:!0})}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1})}},{key:\"_getDepositObject\",value:function(){return{inputCoinType:this.props.deposit_coin_type,outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get(\"name\"),stateCallback:this.addDepositAddress}}},{key:\"addDepositAddress\",value:function(e){var t=this.props.account.get(\"name\");this.deposit_address_cache.cacheInputAddress(this.props.gateway,t,this.props.deposit_coin_type,this.props.receive_coin_type,e.address,e.memo),this.setState({receive_address:e})}},{key:\"getWithdrawModalId\",value:function(){return\"withdraw_asset_\"+this.props.issuer_account.get(\"name\")+\"_\"+this.props.receive_asset.get(\"symbol\")}},{key:\"onWithdraw\",value:function(){this.showModal()}},{key:\"render\",value:function(){var e=s.a.createElement(\"div\",{style:{display:\"none\",minHeight:150}});if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return e;var t=this.props.account.get(\"balances\");if(this.props.deprecated_in_favor_of){var a=!1,n=t.get(this.props.receive_asset.get(\"id\"));if(n){var i=m.ChainStore.getObject(n);if(i)0!=i.get(\"balance\")&&(a=!0)}if(!a)return e}var o=this.state.receive_address;if(!o){var r=this.props.account.get(\"name\");o=this.deposit_address_cache.getCachedInputAddress(this.props.gateway,r,this.props.deposit_coin_type,this.props.receive_coin_type)}var c=this.getWithdrawModalId(),p=null,d=null,h=\"\",g=void 0;if(this.props.deposit_account){p=s.a.createElement(\"span\",null,this.props.deposit_account),h=this.props.deposit_account,g=\"dex:\"+this.props.account.get(\"name\"),d=s.a.createElement(\"span\",null,g);var w=this.props.deposit_coin_type+\":\"}else{o.memo?(g=o.memo,h=o.address,p=s.a.createElement(\"span\",null,o.address),d=s.a.createElement(\"span\",null,o.memo)):(h=o.address,p=s.a.createElement(\"span\",null,o.address));w=\"\"}return\"deposit\"===this.props.action?s.a.createElement(\"div\",{className:\"rudex__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_deposit\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},this.props.deposit_asset)),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_receive\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(f.a,{name:this.props.receive_asset.get(\"symbol\"),replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.intermediate\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.issuer_account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.your_account\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),replace:!1}))))))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_inst\"}),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.deposit_to\",asset:this.props.deposit_asset}),\":\"),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(\"b\",null,s.a.createElement(u.a,{content:\"gateway.rudex.min_amount\",minAmount:l.a.format_number(this.props.min_amount/l.a.get_asset_precision(this.props.asset_precision),this.props.asset_precision,!1),symbol:this.props.deposit_coin_type}))),s.a.createElement(\"div\",{style:{padding:\"10px 0\",fontSize:\"1.1rem\"}},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,\"ADDRESS:\",\" \",s.a.createElement(\"b\",null,s.a.createElement(O,{replaceCopyText:x.a.translate(\"gateway.use_copy_button\")},p)))),d?s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(O,{replaceCopyText:x.a.translate(\"gateway.use_copy_button\")},\"MEMO: \",s.a.createElement(\"b\",null,d)))):null)),s.a.createElement(\"div\",{className:\"button-group\",style:{paddingTop:10}},p?s.a.createElement(j.a,{text:h},s.a.createElement(\"div\",{className:\"button\"},\"Copy address\")):null,g?s.a.createElement(j.a,{text:g},s.a.createElement(\"div\",{className:\"button\"},\"Copy memo\")):null)))):s.a.createElement(\"div\",{className:\"rudex__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_withdraw\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(f.a,{name:this.props.receive_asset.get(\"symbol\"),replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_receive\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},this.props.deposit_asset)),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.intermediate\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.issuer_account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),replace:!1}))))))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_inst\"}),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.withdraw_to\",asset:this.props.deposit_asset}),\":\"),s.a.createElement(\"div\",{className:\"button-group\",style:{paddingTop:20}},s.a.createElement(\"button\",{className:\"button success\",style:{fontSize:\"1.3rem\"},onClick:this.onWithdraw.bind(this)},s.a.createElement(u.a,{content:\"gateway.withdraw_now\"}),\" \"))),s.a.createElement(M.Modal,{onCancel:this.hideModal,title:x.a.translate(\"gateway.withdraw_coin\",{coin:this.props.deposit_asset_name,symbol:this.props.deposit_asset}),footer:null,visible:this.state.isModalVisible},s.a.createElement(Pe.a,{hideModal:this.hideModal,showModal:this.showModal,account:this.props.account.get(\"name\"),issuer:this.props.issuer_account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),output_coin_name:this.props.deposit_asset_name,output_coin_symbol:this.props.deposit_asset,output_coin_type:this.props.deposit_coin_type,output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:w,modal_id:c,min_amount:this.props.min_amount,asset_precision:this.props.asset_precision,balance:this.props.account.get(\"balances\").toJS()[this.props.receive_asset.get(\"id\")]})))}}]),t}();qe.propTypes={gateway:C.a.string,deposit_coin_type:C.a.string,deposit_asset_name:C.a.string,deposit_account:C.a.string,receive_coin_type:C.a.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,deposit_asset:C.a.string,deposit_wallet_type:C.a.string,receive_asset:p.a.ChainAsset,deprecated_in_favor_of:p.a.ChainAsset,deprecated_message:C.a.string,action:C.a.string,supports_output_memos:C.a.bool.isRequired,min_amount:C.a.number,asset_precision:C.a.number};var We=Object(d.a)(qe),Le=(a(5),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}());var Ue=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeCoin:a._getActiveCoin(e,{action:\"deposit\"}),action:e.viewSettings.get(\"rudexAction\",\"deposit\")},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Le(t,[{key:\"_getActiveCoin\",value:function(e,t){var a=e.viewSettings.get(\"activeCoin_rudex_\"+t.action,null),n=null;return\"deposit\"==t.action&&(n=\"PPY\"),\"withdraw\"==t.action&&(n=\"PPY\"),a||n}},{key:\"componentWillReceiveProps\",value:function(e){e.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(e,this.state.action)})}},{key:\"onSelectCoin\",value:function(e){this.setState({activeCoin:e.target.value});var t={};t[\"activeCoin_rudex_\"+this.state.action]=e.target.value,F.a.changeViewSetting(t)}},{key:\"changeAction\",value:function(e){var t=this._getActiveCoin(this.props,{action:e});this.setState({action:e,activeCoin:t}),F.a.changeViewSetting(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},\"rudexAction\",e))}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.coins,n=t.account,i=this.state,o=i.activeCoin,r=i.action;if(!a.length)return s.a.createElement(v.a,null);var l=a.filter(function(e){return!(!e||!e.symbol)&&(\"deposit\"===r?e.depositAllowed:e.withdrawalAllowed)}),c=l.map(function(e){var t=\"deposit\"===r?e.backingCoin.toUpperCase():e.symbol;return s.a.createElement(\"option\",{value:t,key:e.symbol},t)}).filter(function(e){return null!==e}),p=l.filter(function(e){return\"deposit\"===r?e.backingCoin.toUpperCase()===o:e.symbol===o})[0];p||(p=l[0]);var d=\"deposit\"===this.state.action;return s.a.createElement(\"div\",{style:this.props.style},s.a.createElement(\"div\",{className:\"grid-block no-margin vertical medium-horizontal no-padding\"},s.a.createElement(\"div\",{className:\"medium-4\"},s.a.createElement(\"div\",null,s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.choose_\"+r}),\":\",\" \"),s.a.createElement(\"select\",{className:\"external-coin-types bts-select\",onChange:this.onSelectCoin.bind(this),value:o},c))),s.a.createElement(\"div\",{className:\"medium-6 medium-offset-1\"},s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.gateway_text\"}),\":\"),s.a.createElement(\"div\",{style:{paddingBottom:15}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},s.a.createElement(\"li\",{className:\"deposit\"===r?\"is-active\":\"\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"deposit\")},s.a.createElement(u.a,{content:\"gateway.deposit\"}))),s.a.createElement(\"li\",{className:\"withdraw\"===r?\"is-active\":\"\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"withdraw\")},s.a.createElement(u.a,{content:\"gateway.withdraw\"}))))))),p?s.a.createElement(\"div\",null,s.a.createElement(\"div\",{style:{marginBottom:15}},s.a.createElement(We,{key:\"\"+p.symbol,gateway:p.gatewayWallet,issuer_account:p.issuer,account:n,deposit_asset:p.backingCoin.toUpperCase(),deposit_asset_name:p.name,deposit_coin_type:p.backingCoin.toLowerCase(),deposit_account:p.gatewayWallet,deposit_wallet_type:p.walletType,receive_asset:p.symbol,receive_coin_type:p.symbol.toLowerCase(),supports_output_memos:p.memoSupport,min_amount:p.minAmount,asset_precision:p.precision,action:this.state.action}),s.a.createElement(\"label\",{className:\"left-label\"},\"Support\"),s.a.createElement(\"div\",null,s.a.createElement(u.a,{content:\"gateway.rudex.support_block\"}),s.a.createElement(\"br\",null),s.a.createElement(\"br\",null),s.a.createElement(\"a\",{href:\"https://rudex.freshdesk.com\",target:\"_blank\",rel:\"noopener noreferrer\"},\"https://rudex.freshdesk.com\"))),p&&p.symbol?s.a.createElement(R.b,{asset:p.symbol,fromAccount:d?p.issuerId:this.props.account.get(\"id\"),to:d?this.props.account.get(\"id\"):p.issuerId},function(t){var a=t.asset,n=t.to,i=t.fromAccount;return s.a.createElement(R.a,{accountsList:W.a.List([e.props.account.get(\"id\")]),limit:10,compactView:!0,fullHeight:!0,filter:\"transfer\",title:s.a.createElement(u.a,{content:\"gateway.recent_\"+e.state.action}),customFilter:{fields:[\"to\",\"from\",\"asset_id\"],values:{to:n.get(\"id\"),from:i.get(\"id\"),asset_id:a.get(\"id\")}}})}):null):null)}}]),t}(),Ve=Object(i.a)(Ue,{listenTo:function(){return[D.a]},getProps:function(){return{viewSettings:D.a.getState().viewSettings}}}),He=a(186),Je=a(358),Ge=a(2191),Xe=a(77);new ye.a(\"\");function ze(e){var t=e.coin,a=e.account,n=e.stateCallback,s={coin:t,account:a},i=JSON.stringify(s);fetch(w.a.BASE+\"/simple-api/get-last-address\",{method:\"POST\",headers:new Headers({Accept:\"application/json\",\"Content-Type\":\"application/json\"}),body:i}).then(function(e){e.json().then(function(e){var t={address:e.address,memo:e.memo||null,error:e.error||null,loading:!1};n&&n(t)},function(e){console.log(\"error: \",e),n&&n({address:e.message,memo:null})})},function(e){console.log(\"error: \",e),n&&n({address:e.message,memo:null})}).catch(function(e){console.log(\"fetch error:\",e)})}var Ke={};var Qe=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ye=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isModalVisible:!1,receive_address:null,url:e.url||w.a.BASE,loading:!1,emptyAddressDeposit:!1},a.addDepositAddress=a.addDepositAddress.bind(a),a._copy=a._copy.bind(a),a.showModal=a.showModal.bind(a),a.hideModal=a.hideModal.bind(a),document.addEventListener(\"copy\",a._copy),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Qe(t,[{key:\"showModal\",value:function(){this.setState({isModalVisible:!0})}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1})}},{key:\"_copy\",value:function(e){try{this.state.clipboardText?e.clipboardData.setData(\"text/plain\",this.state.clipboardText):e.clipboardData.setData(\"text/plain\",x.a.translate(\"gateway.use_copy_button\").toUpperCase()),e.preventDefault()}catch(e){console.error(e)}}},{key:\"_getDepositObject\",value:function(){return{inputCoinType:this.props.deposit_coin_type,outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get(\"name\"),url:this.state.url,stateCallback:this.addDepositAddress}}},{key:\"componentWillMount\",value:function(){ze({coin:this.props.receive_coin_type,account:this.props.account.get(\"name\"),stateCallback:this.addDepositAddress})}},{key:\"componentWillUnmount\",value:function(){document.removeEventListener(\"copy\",this._copy)}},{key:\"componentWillReceiveProps\",value:function(e){e.account!==this.props.account&&ze({coin:e.receive_coin_type,account:e.account.get(\"name\"),stateCallback:this.addDepositAddress})}},{key:\"addDepositAddress\",value:function(e){e.error&&(\"no_address\"===e.error.message?this.setState({emptyAddressDeposit:!0}):this.setState({emptyAddressDeposit:!1})),this.setState({receive_address:e}),this.setState({loading:!1}),this.setState({receive_address:e})}},{key:\"requestDepositAddressLoad\",value:function(){this.setState({loading:!0,emptyAddressDeposit:!1}),function(e){var t=e.inputCoinType,a=e.outputCoinType,n=e.outputAddress,s=e.url,i=void 0===s?w.a.BASE:s,o=e.stateCallback,r=e.selectedGateway,l=(Xe.a[r],{inputCoinType:t,outputCoinType:a,outputAddress:n}),c=JSON.stringify(l);Ke[c]||(Ke[c]=!0,fetch(i+\"/simple-api/initiate-trade\",{method:\"post\",headers:new Headers({Accept:\"application/json\",\"Content-Type\":\"application/json\"}),body:c}).then(function(e){e.json().then(function(e){delete Ke[c];var t={address:e.inputAddress||\"unknown\",memo:e.inputMemo,error:e.error||null};o&&o(t)},function(e){console.log(\"error: \",e),delete Ke[c],o&&o(null)})},function(e){console.log(\"error: \",e),delete Ke[c],o&&o(null)}).catch(function(e){console.log(\"fetch error:\",e),delete Ke[c]}))}(this._getDepositObject())}},{key:\"getWithdrawModalId\",value:function(){return\"withdraw_asset_\"+this.props.issuer_account.get(\"name\")+\"_\"+this.props.receive_asset.get(\"symbol\")}},{key:\"onWithdraw\",value:function(){this.showModal()}},{key:\"toClipboard\",value:function(e){try{this.setState({clipboardText:e},function(){document.execCommand(\"copy\")})}catch(e){console.error(e)}}},{key:\"render\",value:function(){var e=\"deposit\"===this.props.action,t=s.a.createElement(v.a,null);if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return t;var a=this.props.account.get(\"balances\"),n=this.props.gateFee;this.props.receive_asset.get(\"symbol\");if(this.props.deprecated_in_favor_of){var i=!1,o=a.get(this.props.receive_asset.get(\"id\"));if(o){var r=m.ChainStore.getObject(o);if(r)0!=r.get(\"balance\")&&(i=!0)}if(!i)return t}var l=this.state.receive_address,c=this.state.emptyAddressDeposit,p=this.state.loading;if(!l)return s.a.createElement(\"div\",{style:{margin:\"3rem\"}},s.a.createElement(v.a,{type:\"three-bounce\"}));var d=this.getWithdrawModalId(),h=null,g=null,w=\"\",b=void 0;if(this.props.deposit_account){h=s.a.createElement(\"span\",null,this.props.deposit_account),w=this.props.receive_coin_type+\":\"+this.props.account.get(\"name\"),g=s.a.createElement(\"span\",null,w);var E=this.props.deposit_coin_type+\":\"}else{l.memo?(b=l.memo,w=l.address,h=s.a.createElement(\"span\",null,l.address),g=s.a.createElement(\"span\",null,l.memo)):(w=l.address,h=s.a.createElement(\"span\",null,l.address));E=\"\"}return!this.props.isAvailable||e&&!this.props.deposit_account&&!l||l&&\"unknown\"===l.address?s.a.createElement(\"div\",null,s.a.createElement(u.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable\",component:\"h4\"})):e?s.a.createElement(\"div\",{className:\"Blocktrades__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_deposit\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},this.props.deposit_asset)),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_receive\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(f.a,{name:this.props.receive_asset.get(\"symbol\"),replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.intermediate\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.issuer_account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.your_account\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),replace:!1}))))))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_inst\"}),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.deposit_to\",asset:this.props.deposit_asset}),\":\"),s.a.createElement(\"label\",{className:\"fz_12 left-label\"},s.a.createElement(u.a,{content:\"gateway.deposit_notice_delay\"})),s.a.createElement(\"div\",null,c?s.a.createElement(u.a,{content:\"gateway.please_generate_address\"}):h,s.a.createElement(\"div\",null,g&&s.a.createElement(\"span\",null,\"memo: \",g)),s.a.createElement(\"div\",{className:\"button-group\",style:{paddingTop:10}},h?s.a.createElement(\"div\",{className:\"button\",onClick:this.toClipboard.bind(this,w)},s.a.createElement(u.a,{content:\"gateway.copy_address\"})):null,b?s.a.createElement(\"div\",{className:\"button\",onClick:this.toClipboard.bind(this,b)},s.a.createElement(u.a,{content:\"gateway.copy_memo\"})):null,s.a.createElement(\"button\",{className:\"button spinner-button-circle\",onClick:this.requestDepositAddressLoad.bind(this)},p?s.a.createElement(v.a,{type:\"circle\"}):null,s.a.createElement(u.a,{content:\"gateway.generate_new\"}))),s.a.createElement(u.a,{className:\"has-error fz_14\",component:\"p\",content:\"gateway.min_deposit_warning_amount\",minDeposit:2*this.props.gateFee,coin:this.props.deposit_asset}),s.a.createElement(u.a,{className:\"has-error fz_14\",component:\"p\",content:\"gateway.min_deposit_warning_asset\",minDeposit:2*this.props.gateFee,coin:this.props.deposit_asset})))):s.a.createElement(\"div\",{className:\"Blocktrades__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_withdraw\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(f.a,{name:this.props.receive_asset.get(\"symbol\"),replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_receive\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},this.props.deposit_asset)),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.intermediate\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.issuer_account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),replace:!1}))))))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_inst\"}),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.withdraw_to\",asset:this.props.deposit_asset}),\":\"),s.a.createElement(\"div\",{className:\"button-group\",style:{paddingTop:20}},s.a.createElement(\"button\",{className:\"button success\",style:{fontSize:\"1.3rem\"},onClick:this.onWithdraw.bind(this)},s.a.createElement(u.a,{content:\"gateway.withdraw_now\"}),\" \"))),s.a.createElement(M.Modal,{onCancel:this.hideModal,title:x.a.translate(\"gateway.withdraw_coin\",{coin:this.props.deposit_asset_name,symbol:this.props.deposit_asset}),footer:null,visible:this.state.isModalVisible,id:d,overlay:!0},s.a.createElement(Ge.a,{hideModal:this.hideModal,showModal:this.showModal,account:this.props.account.get(\"name\"),issuer:this.props.issuer_account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),url:this.state.url,output_coin_name:this.props.deposit_asset_name,gateFee:n,output_coin_symbol:this.props.deposit_asset,output_coin_type:this.props.deposit_coin_type,output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:E,modal_id:d,balance:this.props.account.get(\"balances\").toJS()[this.props.receive_asset.get(\"id\")]})))}}]),t}();Ye.propTypes={url:C.a.string,gateway:C.a.string,deposit_coin_type:C.a.string,deposit_asset_name:C.a.string,deposit_account:C.a.string,receive_coin_type:C.a.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,deposit_asset:C.a.string,deposit_wallet_type:C.a.string,receive_asset:p.a.ChainAsset,deprecated_in_favor_of:p.a.ChainAsset,deprecated_message:C.a.string,action:C.a.string,supports_output_memos:C.a.bool.isRequired},Ye.defaultProps={autosubscribe:!1};var Ze=Object(d.a)(Ye),$e=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var et=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=e.viewSettings.get(e.provider+\"Action\",\"deposit\");return a.state={activeCoin:a._getActiveCoin(e,{action:n}),action:n},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),$e(t,[{key:\"_getActiveCoin\",value:function(e,t){var a=e.viewSettings.get(\"activeCoin_\"+e.provider+\"_\"+t.action,null),n=null;return\"deposit\"==t.action&&(n=\"BTC\"),\"withdraw\"==t.action&&(n=\"SPARKDEX.BTC\"),a||n}},{key:\"componentWillReceiveProps\",value:function(e){e.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(e,this.state.action)})}},{key:\"onSelectCoin\",value:function(e){this.setState({activeCoin:e.target.value});var t={};t[\"activeCoin_\"+this.props.provider+\"_\"+this.state.action]=e.target.value,F.a.changeViewSetting(t)}},{key:\"changeAction\",value:function(e){var t=this._getActiveCoin(this.props,{action:e});this.setState({action:e,activeCoin:t}),F.a.changeViewSetting(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},this.props.provider+\"Action\",e))}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.coins,n=t.account,i=t.provider,o=this.state,r=o.activeCoin,l=o.action;if(!a.length)return s.a.createElement(v.a,null);var c=a.filter(function(e){return!(!e||!e.symbol)&&(\"deposit\"===l?e.depositAllowed:e.withdrawalAllowed)}),p=c.map(function(e){var t=\"deposit\"===l?e.backingCoinType.toUpperCase():e.symbol;return s.a.createElement(\"option\",{value:t,key:e.symbol},t)}).filter(function(e){return null!==e}),d=c.filter(function(e){return\"deposit\"===l?e.backingCoinType.toUpperCase()===r:e.symbol===r})[0];d||(d=c[0]);var m={bitspark:{name:d.intermediateAccount,id:\"1.2.1070206\",support:\"info@bitspark.io\"}}[i],h=\"deposit\"===this.state.action;return s.a.createElement(\"div\",{style:this.props.style},s.a.createElement(\"div\",{className:\"grid-block no-margin vertical medium-horizontal no-padding\"},s.a.createElement(\"div\",{className:\"medium-4\"},s.a.createElement(\"div\",null,s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.choose_\"+l}),\":\",\" \"),s.a.createElement(\"select\",{className:\"external-coin-types bts-select\",onChange:this.onSelectCoin.bind(this),value:r},p))),s.a.createElement(\"div\",{className:\"medium-6 medium-offset-1\"},s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.gateway_text\"}),\":\"),s.a.createElement(\"div\",{style:{paddingBottom:15}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},s.a.createElement(\"li\",{className:\"deposit\"===l?\"is-active\":\"\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"deposit\")},s.a.createElement(u.a,{content:\"gateway.deposit\"}))),s.a.createElement(\"li\",{className:\"withdraw\"===l?\"is-active\":\"\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"withdraw\")},s.a.createElement(u.a,{content:\"gateway.withdraw\"}))))))),d?s.a.createElement(\"div\",null,s.a.createElement(\"div\",{style:{marginBottom:15}},s.a.createElement(Ze,{key:i+\".\"+d.symbol,gateway:i,issuer_account:m.name,account:n,deposit_asset:d.backingCoinType.toUpperCase(),deposit_asset_name:d.name,deposit_coin_type:d.backingCoinType.toLowerCase(),deposit_account:d.depositAccount,deposit_wallet_type:d.walletType,gateFee:d.gateFee,receive_asset:d.symbol,receive_coin_type:d.symbol.toLowerCase(),supports_output_memos:d.supportsMemos,isAvailable:d.isAvailable,action:this.state.action}),s.a.createElement(\"label\",{className:\"left-label\"},\"Support\"),s.a.createElement(\"div\",null,s.a.createElement(u.a,{content:\"gateway.bitspark.support_block\"}),s.a.createElement(\"br\",null),s.a.createElement(\"br\",null),s.a.createElement(\"a\",{href:(-1===m.support.indexOf(\"@\")?\"\":\"mailto:\")+m.support,rel:\"noopener noreferrer\"},m.support))),d&&d.symbol?s.a.createElement(R.b,{asset:d.symbol,fromAccount:h?m.id:this.props.account.get(\"id\"),to:h?this.props.account.get(\"id\"):m.id},function(t){var a=t.asset,n=t.to,i=t.fromAccount;return s.a.createElement(R.a,{accountsList:W.a.List([e.props.account.get(\"id\")]),limit:10,compactView:!0,fullHeight:!0,filter:\"transfer\",title:s.a.createElement(u.a,{content:\"gateway.recent_\"+e.state.action}),customFilter:{fields:[\"to\",\"from\",\"asset_id\"],values:{to:n.get(\"id\"),from:i.get(\"id\"),asset_id:a.get(\"id\")}}})}):null):null)}}]),t}(),tt=Object(i.a)(et,{listenTo:function(){return[D.a]},getProps:function(){return{viewSettings:D.a.getState().viewSettings}}}),at=new ye.a(\"\"),nt={},st=1e4;function it(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return 1==t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return ot(e,w.g.BASE+w.g.DEPOSIT_RECORD_LIST,t)}(e,a):2==t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return ot(e,w.g.BASE+w.g.WITHDRAW_RECORD_LIST,t)}(e,a):new Promise(function(e){return e()})}function ot(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return-1==a?rt(e,t,st):0==a?function(e,t){e.requestChannel||(e.requestChannel=0);e.version||(e.version=\"1.0\");e.timestamp||(e.timestamp=(new Date).getTime());e.outerChannel||(e.outerChannel=\"Bitshares\");var a=JSON.stringify(e);if(nt[a])return;nt[a]=!0,new Promise(function(e,n){fetch(t,{method:\"post\",headers:new Headers({Accept:\"application/json\",\"Content-Type\":\"application/json\"}),body:a}).then(function(t){t.json().then(function(t){delete nt[a],0!==t.code&&(console.log(t),n({code:t.code,message:t.message})),e(t.data)}).catch(function(e){delete nt[a],n({code:-1,message:e.message})})})})}(e,t):rt(e,t,a)}function rt(e,t,a){e.requestChannel||(e.requestChannel=0),e.version||(e.version=\"1.0\"),e.timestamp||(e.timestamp=(new Date).getTime()),e.outerChannel||(e.outerChannel=\"Bitshares\");var n=JSON.stringify(e);if(!nt[n])return nt[n]=!0,Promise.race([new Promise(function(e,a){fetch(t,{method:\"post\",headers:new Headers({Accept:\"application/json\",\"Content-Type\":\"application/json\"}),body:n}).then(function(t){t.json().then(function(t){delete nt[n],0!==t.code&&(console.log(t),a({code:t.code,message:t.message})),e(t.data)}).catch(function(e){delete nt[n],a({code:-1,message:e.message})})})}),new Promise(function(e,t){setTimeout(function(){t({code:-2,message:\"Request timeout.\"})},a)})])}var lt={has:function(e){return at.has(\"gdex_history_address_\"+e)},set:function(e){var t=e.wallet,a=e.addresses;at.set(\"gdex_history_address_\"+t,a)},get:function(e){return at.get(\"gdex_history_address_\"+e,[])},setLast:function(e){var t=e.wallet,a=e.address;at.set(\"gdex_history_address_last_\"+t,a)},getLast:function(e){return at.get(\"gdex_history_address_last_\"+e,\"\")}},ct=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ut=new ye.a(\"__gdex__user_\"),pt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.current_gdex_address_cache_version_string=\"1\",this.day=86400}return ct(e,[{key:\"getUserInfo\",value:function(e){var t=ut.get(e,null);if(!t)return null;var a=Math.floor((new Date).getTime()/1e3);return Math.abs(t.ctime-a)>this.day?(ut.remove(e),null):t}},{key:\"cacheUserInfo\",value:function(e,t,a){var n=ut.get(e,{});n!={}&&(n={user_id:t,status:a,ctime:Math.floor((new Date).getTime()/1e3)},ut.set(e,n))}},{key:\"delUserInfo\",value:function(e){ut.has(e)&&ut.del(e)}},{key:\"getIndexForDepositKey\",value:function(e,t,a){return[this.current_gdex_address_cache_version_string,e,t,a].reduce(function(e,t){return e.concat(\"[\",t,\"]\")},\"\")}},{key:\"getCachedInputAddress\",value:function(e,t,a){var n=this.getIndexForDepositKey(e,t,a),s=ut.get(\"deposit_keys\",{})[n]||null;if(s){if(s.address){var i=Math.floor((new Date).getTime()/1e3);return Math.abs(s.ctime-i)>this.day?(this.clearInputAddress(e,t,a),null):s}return null}}},{key:\"cacheInputAddress\",value:function(e,t,a,n,s){var i=this.getIndexForDepositKey(e,t,a),o=ut.get(\"deposit_keys\",{});o[i]={address:n,memo:s,ctime:Math.floor((new Date).getTime()/1e3)},ut.set(\"deposit_keys\",o)}},{key:\"clearInputAddress\",value:function(e,t,a){var n=this.getIndexForDepositKey(e,t,a),s=ut.get(\"deposit_keys\",null);s&&s[n]&&(s[n]={address:null,memo:null,ctime:null},ut.set(\"deposit_keys\",s))}}]),e}(),dt=a(456),mt=a.n(dt),ht=a(322),_t=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ft=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isConfirmationModalVisible:!1,withdraw_amount:a.props.amount_to_withdraw,withdraw_address:lt.getLast(e.output_coin_name),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,withdraw_address_selected:lt.getLast(e.output_coin_name),memo:\"\",withdraw_address_first:!0,empty_withdraw_value:!1,below_minumum_withdraw_value:!1,precision_error:!1,memo_error:!1,memo_length_error:!1,from_account:e.account,fee_asset_id:\"1.3.0\",feeStatus:{},withdraw_address_error_code:null,withdraw_address_error_message:null},a._validateAddress(a.state.withdraw_address,e),a._checkBalance=a._checkBalance.bind(a),a._updateFee=Object(ht.a)(a._updateFee.bind(a),250),a.showConfirmationModal=a.showConfirmationModal.bind(a),a.hideConfirmationModal=a.hideConfirmationModal.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),_t(t,[{key:\"componentWillMount\",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:\"componentWillUnmount\",value:function(){this.unMounted=!0}},{key:\"componentWillReceiveProps\",value:function(e){var t=this;e.output_coin_name!=this.props.output_coin_name&&this.setState({withdraw_address:lt.getLast(e.output_coin_name),withdraw_address_selected:lt.getLast(e.output_coin_name)}),e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:\"1.3.0\",feeAmount:new Ee.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:\"showConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!0})}},{key:\"hideConfirmationModal\",value:function(){this.setState({isConfirmationModalVisible:!1})}},{key:\"_assembleMemo\",value:function(){var e=this,t=this.props.memo_rule,a=\"\";try{if(t)return t.split(\";\").forEach(function(t){switch(t[0]){case\"C\":a+=t.slice(2);break;case\"D\":a+=e.state.withdraw_address;break;case\"B\":a+=t.slice(2);break;case\"S\":a+=e.state.memo}}),a.length>100?(this.setState({memo_length_error:!0}),null):(this.setState({memo_length_error:!1}),this.setState({memo_error:!1}),a)}catch(e){console.log(e)}return this.setState({memo_error:!0}),null}},{key:\"_updateFee\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.fee_asset_id,n=t.from_account,s=this._getAvailableAssets(t).fee_asset_types;if(1===s.length&&s[0]!==a&&(a=s[0]),!n)return null;Object(be.b)({accountID:n.get(\"id\"),feeID:a,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:this._assembleMemo()}}).then(function(t){var a=t.fee,n=t.hasBalance,s=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:a,hasBalance:n,hasPoolBalance:s,error:!n||!s},e._checkBalance)})}},{key:\"_checkFeeStatus\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.from_account;if(a){var n=this._getAvailableAssets(t).fee_asset_types,s={},i=[];n.forEach(function(n){i.push(Object(be.b)({accountID:a.get(\"id\"),feeID:n,options:[\"price_per_kbyte\"],data:{type:\"memo\",content:e.props.output_coin_name+\":\"+t.withdraw_address+(t.memo?\":\"+t.memo:\"\")}}))}),Promise.all(i).then(function(a){n.forEach(function(e,t){s[e]=a[t]}),l.a.are_equal_shallow(t.feeStatus,s)||e.setState({feeStatus:s}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:\"onMemoChanged\",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:\"onWithdrawAmountChange\",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},this._checkBalance)}},{key:\"onSelectChanged\",value:function(e){var t=lt.get(this.props.output_coin_symbol)[e];lt.setLast({wallet:this.props.output_coin_symbol,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"onWithdrawAddressChanged\",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:\"_validateAddress\",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.address?ot(e,w.g.BASE+w.g.CHECK_WITHDRAY_ADDRESS,t):new Promise(function(e){return e()})})({assetId:a.output_coin_id,assetName:a.output_coin_name,address:e}).then(function(e){t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:e.valid,withdraw_address_error_code:null,withdraw_address_error_message:null})}).catch(function(e){var a=e.message;e.code<0&&(a=\"System error: please try again later\"),t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:null,withdraw_address_error_code:e.code,withdraw_address_error_message:a})})}},{key:\"_checkPrecision\",value:function(){var e=this.state.withdraw_amount,t=this.props.output_coin_precision;\"undefined\"!==t&&(\"string\"!=typeof e&&(e=e.toString()),-1!==(e=e.trim()).indexOf(\".\")&&e.length-e.indexOf(\".\")-1>t?this.setState({precision_error:!0}):this.setState({precision_error:!1}))}},{key:\"_checkBalance\",value:function(){var e=this.state,t=e.feeAmount,a=e.withdraw_amount,n=this.props,s=n.asset,i=n.balance,o=n.minWithdrawAmount;if(i){if(t){var r=Object(be.a)(a,s,t,i);if(null!==r){if(this.setState({balanceError:!r}),\"string\"==typeof a&&(a=parseFloat(String.prototype.replace.call(a,/,/g,\"\"))),\"string\"==typeof o&&(o=parseFloat(String.prototype.replace.call(o,/,/g,\"\"))),!(a<o))return this.setState({below_minumum_withdraw_value:!1}),this._checkPrecision(),r;this.setState({below_minumum_withdraw_value:!0})}}}else this.setState({balanceError:!0})}},{key:\"onSubmit\",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(lt.has(this.props.output_coin_symbol)){var e=lt.get(this.props.output_coin_symbol);-1==e.indexOf(this.state.withdraw_address)&&(e.push(this.state.withdraw_address),lt.set({wallet:this.props.output_coin_symbol,addresses:e}))}else{var t=[];t.push(this.state.withdraw_address),lt.set({wallet:this.props.output_coin_symbol,addresses:t})}lt.setLast({wallet:this.props.output_coin_symbol,address:this.state.withdraw_address});var a=this.props.asset,n=this.state.feeAmount,s=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\")),i=new Ee.a({asset_id:a.get(\"id\"),precision:a.get(\"precision\"),real:s});te.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),i.getAmount(),a.get(\"id\"),this._assembleMemo(),null,n?n.asset_id:\"1.3.0\"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else this.showConfirmationModal()}},{key:\"onSubmitConfirmation\",value:function(){if(this.hideConfirmationModal(),lt.has(this.props.output_coin_symbol)){var e=lt.get(this.props.output_coin_symbol);-1==e.indexOf(this.state.withdraw_address)&&(e.push(this.state.withdraw_address),lt.set({wallet:this.props.output_coin_symbol,addresses:e}))}else{var t=[];t.push(this.state.withdraw_address),lt.set({wallet:this.props.output_coin_symbol,addresses:t})}lt.setLast({wallet:this.props.output_coin_symbol,address:this.state.withdraw_address});var a=this.props.asset,n=l.a.get_asset_precision(a.get(\"precision\")),s=String.prototype.replace.call(this.state.withdraw_amount,/,/g,\"\"),i=this.state.feeAmount;te.a.transfer(this.props.account.get(\"id\"),this.props.issuer.get(\"id\"),parseInt(s*n,10),a.get(\"id\"),this._assembleMemo(),null,i?i.asset_id:\"1.3.0\")}},{key:\"onDropDownList\",value:function(){lt.has(this.props.output_coin_symbol)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:\"getWithdrawModalId\",value:function(){return\"confirmation\"}},{key:\"onAccountBalance\",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get(\"balances\").toJS()).includes(this.props.asset.get(\"id\"))){var t=new Ee.a({amount:this.props.balance.get(\"balance\"),asset_id:this.props.asset.get(\"id\"),precision:this.props.asset.get(\"precision\")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:\"setNestedRef\",value:function(e){this.nestedRef=e}},{key:\"onFeeChanged\",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get(\"id\")},this._updateFee)}},{key:\"_getAvailableAssets\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,a=e.feeStatus;var n=[];if(!t||!t.get(\"balances\"))return{fee_asset_types:n};var s=e.from_account.get(\"balances\").toJS();for(var i in n=Object.keys(s).sort(l.a.sortID),s){var o=m.ChainStore.getObject(i),r=m.ChainStore.getObject(s[i]);if(r&&0===r.get(\"balance\")&&-1!==n.indexOf(i)&&n.splice(n.indexOf(i),1),o){var c=!1;try{c=new Ee.i({base:new Ee.a(o.getIn([\"options\",\"core_exchange_rate\",\"base\"]).toJS()),quote:new Ee.a(o.getIn([\"options\",\"core_exchange_rate\",\"quote\"]).toJS())}).isValid()}catch(e){c=!1}\"1.3.0\"===o.get(\"id\")||c||n.splice(n.indexOf(i),1)}}return{fee_asset_types:n=n.filter(function(e){return function(e){return void 0===a[e]||a[e]&&a[e].hasPoolBalance}(e)&&function(e){return void 0===a[e]||a[e]&&a[e].hasBalance}(e)})}}},{key:\"render\",value:function(){var e=this.state,t=e.withdraw_address_selected,a=e.memo,n=lt.get(this.props.output_coin_symbol),i=null,o=this.props.account.get(\"balances\").toJS(),r=Object.keys(o),l=(this.getWithdrawModalId(),null),c=null,p=null;this.state.options_is_valid&&(c=s.a.createElement(\"div\",{className:n.length?\"blocktrades-options\":\"blocktrades-disabled-options\"},n.map(function(e,t){return s.a.createElement(\"a\",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(l=this.state.withdraw_address_error_code?s.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},this.state.withdraw_address_error_code,\":\",\" \",this.state.withdraw_address_error_message):s.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},s.a.createElement(u.a,{content:\"gateway.valid_address\",coin_type:this.props.output_coin_name})),p=s.a.createElement(M.Modal,{closable:!1,footer:[s.a.createElement(M.Button,{key:\"submit\",type:\"primary\",onClick:this.onSubmitConfirmation.bind(this)},x.a.translate(\"modal.confirmation.accept\")),s.a.createElement(M.Button,{key:\"cancel\",style:{marginLeft:\"8px\"},onClick:this.hideConfirmationModal},x.a.translate(\"modal.confirmation.cancel\"))],visible:this.state.isConfirmationModalVisible,onCancel:this.hideConfirmationModal},s.a.createElement(\"label\",null,s.a.createElement(u.a,{content:\"modal.confirmation.title\"})))));var d=1,m=null;this.props.output_supports_memos&&(m=s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"label\",null,s.a.createElement(u.a,{component:\"span\",content:\"transfer.memo\"})),s.a.createElement(\"textarea\",{rows:\"3\",value:a,tabIndex:d++,onChange:this.onMemoChanged.bind(this)}),this.state.memo_error?s.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},s.a.createElement(u.a,{content:\"transfer.errors.memo_error\"})):null,this.state.memo_length_error?s.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},s.a.createElement(u.a,{content:\"transfer.errors.memo_length_error\"})):null));var h=this._getAvailableAssets().fee_asset_types;if(r.length>0){var _=this.props.asset.get(\"id\");if(_){var f=o[_];i=s.a.createElement(\"span\",{style:{borderBottom:\"#A09F9F 1px dotted\",cursor:\"pointer\"}},s.a.createElement(u.a,{component:\"span\",content:\"transfer.available\"}),\"Â :Â \",s.a.createElement(\"span\",{className:\"set-cursor\",onClick:this.onAccountBalance.bind(this)},f?s.a.createElement(Q.a,{balance:o[_]}):0))}else i=\"No funds\"}else i=\"No funds\";var y=this.state.below_minumum_withdraw_value||this.state.memo_error||this.state.memo_length_error||this.state.error||this.state.balanceError||this.state.precision_error;return s.a.createElement(\"form\",{className:\"grid-block vertical full-width-content\",style:{paddingTop:\"0\"}},s.a.createElement(\"div\",{className:\"grid-container\"},s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(Y.a,{label:\"modal.withdraw.amount\",amount:this.state.withdraw_amount,asset:this.props.asset.get(\"id\"),assets:[this.props.asset.get(\"id\")],placeholder:\"0.0\",onChange:this.onWithdrawAmountChange.bind(this),display_balance:i}),this.state.empty_withdraw_value?s.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},s.a.createElement(u.a,{content:\"transfer.errors.valid\"})):null,this.state.balanceError?s.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},s.a.createElement(u.a,{content:\"transfer.errors.insufficient\"})):null,this.state.below_minumum_withdraw_value?s.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},s.a.createElement(u.a,{content:\"transfer.errors.minimum_amount\",amount:this.props.minWithdrawAmount,symbol:this.props.asset.get(\"symbol\")})):null,this.state.precision_error?s.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},s.a.createElement(u.a,{content:\"transfer.errors.precision\",precision:this.props.output_coin_precision})):null),this.state.feeAmount?s.a.createElement(\"div\",{className:\"content-block gate_fee\"},s.a.createElement(Y.a,{refCallback:this.setNestedRef.bind(this),label:\"transfer.fee\",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:h,tabIndex:d++}),this.state.hasBalance?null:s.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},s.a.createElement(u.a,{content:\"transfer.errors.noFeeBalance\"})),this.state.hasPoolBalance?null:s.a.createElement(\"p\",{className:\"has-error no-margin\",style:{paddingTop:10}},s.a.createElement(u.a,{content:\"transfer.errors.noPoolBalance\"}))):null,this.props.gateFee?s.a.createElement(\"div\",{className:\"amount-selector right-selector\",style:{paddingBottom:20}},s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.fee\"})),s.a.createElement(\"div\",{className:\"inline-label input-wrapper\"},s.a.createElement(\"input\",{type:\"text\",disabled:!0,value:this.props.gateFee}),s.a.createElement(\"div\",{className:\"form-label select floating-dropdown\"},s.a.createElement(\"div\",{className:\"dropdown-wrapper inactive\"},s.a.createElement(\"div\",null,this.props.output_coin_symbol))))):null,s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{component:\"span\",content:\"modal.withdraw.address\"})),s.a.createElement(\"div\",{className:\"blocktrades-select-dropdown\"},s.a.createElement(\"div\",{className:\"inline-label\"},s.a.createElement(\"input\",{type:\"text\",value:t,tabIndex:\"4\",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:\"off\"}),s.a.createElement(\"span\",{onClick:this.onDropDownList.bind(this)},\"â¼\"))),s.a.createElement(\"div\",{className:\"blocktrades-position-options\"},c),l),m,s.a.createElement(\"div\",null,s.a.createElement(M.Button,{type:\"primary\",disabled:y,onClick:this.onSubmit.bind(this)},x.a.translate(\"modal.withdraw.submit\")),s.a.createElement(M.Button,{onClick:this.props.hideModal,style:{marginLeft:\"8px\"}},x.a.translate(\"account.perm.cancel\"))),p))}}]),t}();ft.propTypes={account:p.a.ChainAccount.isRequired,issuer:p.a.ChainAccount.isRequired,asset:p.a.ChainAsset.isRequired,memo_rule:C.a.string.isRequired,balance:p.a.ChainObject,output_supports_memos:C.a.bool.isRequired};var yt=Object(d.a)(ft),gt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function wt(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function vt(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function bt(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Et=function(e){function t(){wt(this,t);var e=vt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isQrModalVisible:!1,isModalVisible:!1,receive_address:null,isAvailable:!0,qrcode:\"\"},e.deposit_address_cache=new pt,e._copy=e._copy.bind(e),document.addEventListener(\"copy\",e._copy),e.showQrModal=e.showQrModal.bind(e),e.hideQrModal=e.hideQrModal.bind(e),e.showModal=e.showModal.bind(e),e.hideModal=e.hideModal.bind(e),e}return bt(t,s.a.Component),gt(t,[{key:\"showModal\",value:function(){this.setState({isModalVisible:!0})}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1})}},{key:\"showQrModal\",value:function(){this.setState({isQrModalVisible:!0})}},{key:\"hideQrModal\",value:function(){this.setState({isQrModalVisible:!1})}},{key:\"getDepositAddress\",value:function(){this._getDepositAddress(this.props.user_id,this.props.account.get(\"name\"),this.props.coin,this.props.action)}},{key:\"_getDepositAddress\",value:function(e,t,a,n){if(\"deposit\"==n){var s=this.deposit_address_cache.getCachedInputAddress(t,a.outerSymbol,a.innerSymbol);if(s&&s!=this.state.receive_address)this.setState({receive_address:s});else{var i=this;(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return ot(e,w.g.BASE+w.g.GET_DEPOSIT_ADDRESS,t)})({btsAssetId:a.innerAssetId,outAssetId:a.outerAssetId,uid:e,userAccount:t}).then(function(e){if(e.address&&e.address.address){var n={address:e.address.address,memo:e.address.memo};i.deposit_address_cache.cacheInputAddress(t,a.outerSymbol,a.innerSymbol,n.address,n.memo),i.setState({receive_address:n})}else i.setState({receive_address:null})}).catch(function(e){i.setState({receive_address:null}),console.log(e)})}}}},{key:\"componentWillMount\",value:function(){this.getDepositAddress()}},{key:\"componentWillReceiveProps\",value:function(e){e.user_id===this.props.user_id&&e.action===this.props.action&&e.coin==this.props.coin||this._getDepositAddress(e.user_id,e.account.get(\"name\"),e.coin,e.action)}},{key:\"componentWillUnmount\",value:function(){document.removeEventListener(\"copy\",this._copy)}},{key:\"getWithdrawModalId\",value:function(){return\"withdraw_asset_\"+this.props.issuer_account.get(\"name\")+\"_\"+this.props.coin.innerSymbol}},{key:\"onWithdraw\",value:function(){this.showModal()}},{key:\"onShowQrcode\",value:function(e){var t=this;this.setState({qrcode:e},function(){t.showQrModal()})}},{key:\"_copy\",value:function(e){try{this.state.clipboardText?e.clipboardData.setData(\"text/plain\",this.state.clipboardText):e.clipboardData.setData(\"text/plain\",x.a.translate(\"gateway.use_copy_button\").toUpperCase()),e.preventDefault()}catch(e){console.error(e)}}},{key:\"toClipboard\",value:function(e){try{this.setState({clipboardText:e},function(){document.execCommand(\"copy\")})}catch(e){console.error(e)}}},{key:\"render\",value:function(){var e=s.a.createElement(\"div\",{style:{display:\"none\",minHeight:150}});if(!this.props.account||!this.props.issuer_account||!this.props.coin)return e;var t=this.props,a=t.coin,n=t.btsCoin;if(!n)return e;var i=this.state.receive_address,o=this.state.qrcode,r=this.getWithdrawModalId(),l=null,c=\"\",p=\"\",d=a.outerSymbol+\":\";\"deposit\"===this.props.action&&(i&&(l=s.a.createElement(\"span\",null,i.address),c=i.address,i.memo&&(s.a.createElement(\"span\",null,i.memo),p=i.memo)),d=\"\");var m=null,h=this.props.account.get(\"balances\");return h&&(m=h.toJS()[n.get(\"id\")]),\"deposit\"===this.props.action?s.a.createElement(\"div\",{className:\"Blocktrades__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_deposit\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},a.outerSymbol)),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_receive\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(f.a,{name:a.innerSymbol,replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.intermediate\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.issuer_account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.your_account\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:a.innerSymbol,replace:!1}))))))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_inst\"}),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.deposit_to\",asset:a.outerSymbol}),\":\"),s.a.createElement(\"p\",{style:{color:\"red\"}},s.a.createElement(u.a,{content:\"gateway.deposit_warning\",asset:a.outerSymbol})),p?s.a.createElement(\"p\",{style:{color:\"red\"}},s.a.createElement(u.a,{content:\"gateway.deposit_warning_memo\",asset:a.outerSymbol})):null,s.a.createElement(\"div\",null,s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.address\"}),\":\"),s.a.createElement(\"td\",null,l),s.a.createElement(\"td\",null,s.a.createElement(\"div\",{style:{width:\"125px\"},className:\"button\",onClick:this.toClipboard.bind(this,c)},s.a.createElement(u.a,{content:\"transfer.copy_address\"}))),s.a.createElement(\"td\",null,s.a.createElement(\"div\",{className:\"button\",onClick:this.onShowQrcode.bind(this,c)},s.a.createElement(u.a,{content:\"modal.qrcode.label\"})))),p?s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.memo\"}),\":\"),s.a.createElement(\"td\",null,p),s.a.createElement(\"td\",null,s.a.createElement(\"div\",{style:{width:\"125px\"},className:\"button\",onClick:this.toClipboard.bind(this,p)},s.a.createElement(u.a,{content:\"transfer.copy_memo\"}))),s.a.createElement(\"td\",null,s.a.createElement(\"div\",{className:\"button\",onClick:this.onShowQrcode.bind(this,p)},s.a.createElement(u.a,{content:\"modal.qrcode.label\"})))):null)),s.a.createElement(M.Modal,{footer:[s.a.createElement(M.Button,{key:\"close\",type:\"primary\",onClick:this.hideQrModal},x.a.translate(\"modal.close\"))],visible:this.state.isQrModalVisible,onCancel:this.hideQrModal},s.a.createElement(kt,{text:o}))))):s.a.createElement(\"div\",{className:\"Blocktrades__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_withdraw\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(f.a,{name:a.innerSymbol,replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_receive\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},a.outerSymbol)),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.intermediate\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.issuer_account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:a.innerSymbol,replace:!1}))))))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_inst\"}),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.withdraw_to\",asset:this.props.deposit_asset}),\":\"),s.a.createElement(\"div\",{className:\"button-group\",style:{paddingTop:20}},s.a.createElement(\"button\",{className:\"button success\",style:{fontSize:\"1.3rem\"},onClick:this.onWithdraw.bind(this)},s.a.createElement(u.a,{content:\"gateway.withdraw_now\"}),\" \"))),s.a.createElement(M.Modal,{onCancel:this.hideModal,title:x.a.translate(\"gateway.withdraw_coin\",{coin:a.outerAssetName,symbol:a.outerSymbol}),footer:null,visible:this.state.isModalVisible},s.a.createElement(yt,{hideModal:this.hideModal,account:this.props.account.get(\"name\"),issuer:this.props.issuer_account.get(\"name\"),asset:a.innerSymbol,output_coin_name:a.outerAssetName,gateFee:a.gateFee,output_coin_id:a.outerAssetId,output_coin_symbol:a.outerSymbol,output_supports_memos:1==a.needMemo,minWithdrawAmount:a.minTransactionAmount,output_coin_precision:a.relationPrecision,memo_prefix:d,memo_rule:this.props.memo_rule,modal_id:r,balance:m})))}}]),t}();Et.propTypes={account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,gateway:C.a.string,btsCoin:p.a.ChainAsset,memo_rule:C.a.string},Et.defaultProps={autosubscribe:!1};var kt=function(e){function t(e){return wt(this,t),vt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return bt(t,s.a.Component),gt(t,[{key:\"render\",value:function(){var e=this.props.text;return s.a.createElement(\"div\",{className:\"small-12\",style:{textAlign:\"center\"}},s.a.createElement(mt.a,{size:200,value:e}),s.a.createElement(\"br\",null),s.a.createElement(\"br\",null),s.a.createElement(\"label\",{style:{textTransform:\"none\"}},e))}}]),t}(),Ct=Object(d.a)(Et),St=a(20),At=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ot={1:\"confirming\",2:\"waiting\",3:\"transfering\",4:\"success\",5:\"fail\"},Nt={1:\"confirming\",2:\"auditing\",3:\"audited\",4:\"refused\",5:\"transfering\",6:\"success\",7:\"fail\"},xt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={headerHeight:85,pageNum:0,totalNum:0,nextPageEnabled:!1,allData:{},historyStatusType:1==e.recordType?\"deposit_history_status\":\"withdraw_history_status\",historyStatusValue:1==e.recordType?Ot:Nt},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),At(t,[{key:\"componentWillMount\",value:function(){this.getTransactionHistory()}},{key:\"componentWillReceiveProps\",value:function(e){this.props.recordType==e.recordType&&this.props.assetId==e.assetId&&this.props.assetName==e.assetName&&this.props.userId==e.userId&&this.props.userAccount==e.userAccount||this._getTransactionHistory(e.userId,e.assetId,e.assetName,e.recordType,e.userAccount,!0)}},{key:\"shouldComponentUpdate\",value:function(e,t){return!l.a.are_equal_shallow(this.props.userId,e.userId)||(this.state.allData!=t.allData||this.state.pageNum!=t.pageNum)}},{key:\"_getTransactionHistory\",value:function(e,t,a,n,s){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=this.props.pageSize,r=this.state,l=r.pageNum,c=r.allData,u=r.historyStatusValue,p=r.historyStatusType;1==i?(l=1,c={},p=1==n?\"deposit_history_status\":\"withdraw_history_status\",u=1==n?Ot:Nt):l+=1;var d=this;it({uid:e,assetId:t,pageNum:l,pageSize:o,userAccount:s},n).then(function(e){e.records&&(e.records.forEach(function(e){c[e.txid]={txid:e.txid,amount:e.amount,time:e.ctime,unixtime:Date.parse(e.ctime),status:[\"gateway\",p,u[e.status]].join(\".\"),failReason:e.failReason,assetName:a}}),d.setState({totalNum:e.total,nextPageEnabled:e.total>l*o,allData:c,pageNum:l,historyStatusType:p,historyStatusValue:u}))}).catch(function(){d.setState({totalNum:0,nextPageEnabled:!1,allData:{},pageNum:0})})}},{key:\"getTransactionHistory\",value:function(){var e=this.props,t=e.userId,a=e.assetId,n=e.assetName,s=e.recordType,i=e.userAccount;this._getTransactionHistory(t,a,n,s,i,!1)}},{key:\"render\",value:function(){var e=this.props,t=e.assetName,a=e.compactView,n=e.style,i=e.maxHeight,o=this.state,r=o.headerHeight,l=o.allData,c=[];Object.keys(l).forEach(function(e){c.push(l[e])}),c.sort(function(e,t){return t.unixtime-e.unixtime}),(n=n||{}).width=\"100%\",n.height=\"100%\",l.length;var p=c.length?c.map(function(e){return s.a.createElement(\"tr\",{key:e.txid},s.a.createElement(\"td\",{style:{textAlign:\"left\"},className:\"left-td column-hide-tiny\"},s.a.createElement(u.a,{content:e.status})),s.a.createElement(\"td\",{style:{padding:\"8px 5px\",textAlign:\"left\",fontSize:14}},s.a.createElement(u.a,{content:\"gateway.transaction_history_info\",amount:e.amount,assetName:t,txid:e.txid})),s.a.createElement(\"td\",null,e.time))}):[s.a.createElement(\"tr\",{key:\"no_recent\"},s.a.createElement(\"td\",{colSpan:a?\"2\":\"3\"},s.a.createElement(u.a,{content:\"operation.no_recent\"})))];return p.push(s.a.createElement(\"tr\",{className:\"total-value\",key:\"total_value\"},s.a.createElement(\"td\",{className:\"column-hide-tiny\"}),s.a.createElement(\"td\",null),s.a.createElement(\"td\",{style:{textAlign:\"center\"}},\"Â \",this.state.nextPageEnabled?s.a.createElement(\"a\",{onClick:this.getTransactionHistory.bind(this)},s.a.createElement(St.a,{name:\"chevron-down\",title:\"icons.chevron_down.transactions\",className:\"icon-14px\"})):null))),s.a.createElement(\"div\",{className:\"recent-transactions no-overflow\",style:n},s.a.createElement(\"div\",{className:\"generic-bordered-box\"},this.props.dashboard?null:s.a.createElement(\"div\",{ref:\"header\"},s.a.createElement(\"div\",{className:\"block-content-header\"},s.a.createElement(\"span\",null,this.props.title?this.props.title:s.a.createElement(u.a,{content:\"account.recent\"})))),s.a.createElement(\"div\",{className:\"box-content grid-block no-margin\",style:this.props.fullHeight?null:{maxHeight:i-r},ref:\"transactions\"},s.a.createElement(\"table\",{className:\"table\"+(a?\" compact\":\"\")+(this.props.dashboard?\" dashboard-table\":\"\")},s.a.createElement(\"thead\",null,s.a.createElement(\"tr\",{key:\"history_header\"},s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"gateway.status\"})),s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"gateway.info\"})),s.a.createElement(\"th\",null,s.a.createElement(u.a,{content:\"gateway.time\"})))),s.a.createElement(\"tbody\",null,p)))))}}]),t}();xt.propTypes={compactView:C.a.bool,maxHeight:C.a.number,fullHeight:C.a.bool,userId:C.a.number,assetId:C.a.number,assetName:C.a.string,recordType:C.a.number,userAccount:C.a.string},xt.defaultProps={maxHeight:500,fullHeight:!1,pageSize:10};var Tt=xt,jt=a(2006),Mt=a.n(jt),It=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Bt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={locale:e.settings.get(\"locale\",\"en\")},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),It(t,[{key:\"componentDidMount\",value:function(){if(this.refs.agreement){var e=this.refs.agreement;Mt.a.initialize(e)}}},{key:\"componentDidUpdate\",value:function(){if(this.refs.agreement){var e=this.refs.agreement;Mt.a.update(e)}}},{key:\"_getAgreement\",value:function(e){switch(e){case\"zh\":case\"cn\":return s.a.createElement(\"div\",{className:\"container\",ref:\"agreement\",style:{height:\"500px\",overflow:\"auto\",position:\"relative\"}},s.a.createElement(\"h2\",{style:{textAlign:\"center\"}},\"ç¨æ·æå¡åè®®\"),s.a.createElement(\"p\",null,\"OBSIDIAN TECHNOLOGY CO. PTE. LTD. æ¯ä¸å®¶æ ¹æ®æ°å å¡å±åå½æ³å¾æç«çå¬å¸ï¼GDEXæ¯ç±è¯¥å¬å¸è¿è¥çæ¯ç¹è¡ç½å³(ä»¥ä¸ç§°âGDEXâæâæ¬ç½å³â)ï¼ä¸»è®¿é®å¥å£ä¸ºhttps://www.gdex.ioï¼GDEXæ¯ä¸ä¸ªå¨æ¯ç¹è¡å¹³å°ä¸ºç¨æ·æä¾æ°å­èµäº§åææå¡ï¼ä»¥ä¸ç§°âè¯¥æå¡âæâæå¡âï¼çå¹³å°ãä¸ºäºæ¬åè®®è¡¨è¿°ä¹æ¹ä¾¿ï¼å¬å¸åè¯¥ç½å³å¨æ¬åè®®ä¸­åç§°ä½¿ç¨âæä»¬âæå¶ä»ç¬¬ä¸äººç§°ç§°å¼ãä½¿ç¨è¯¥æå¡çèªç¶äººæå¶ä»ä¸»ä½åä¸ºæ¬ç½å³çç¨æ·ï¼æ¬åè®®ä¸ºè¡¨è¿°ä¹ä¾¿å©ï¼ä»¥ä¸ä½¿ç¨âæ¨âæå¶ä»ç¬¬äºäººç§°ãæä»¬åæ¨å¨æ¬åè®®ä¸­åç§°ä¸ºâåæ¹âï¼æä»¬ææ¨åç§°ä¸ºâä¸æ¹âã\"),s.a.createElement(\"p\",null,\"éè¦æç¤ºï¼\"),s.a.createElement(\"p\",null,\"æä»¬å¨æ­¤ç¹å«æéæ¨ï¼\"),s.a.createElement(\"p\",null,\" \",\"1. æ°å­èµäº§æ¬èº«ä¸ç±ä»»ä½éèæºææå¬å¸ææ¬ç½å³åè¡ï¼\"),s.a.createElement(\"p\",null,\" \",\"2. æ°å­èµäº§å¸åºæ¯å¨æ°çãæªç»ç¡®è®¤çï¼èä¸å¯è½ä¸ä¼å¢é¿ï¼\"),s.a.createElement(\"p\",null,\" \",\"3. æ°å­èµäº§ä¸»è¦ç±ææºèå¤§éä½¿ç¨ï¼é¶å®ååä¸å¸åºä½¿ç¨ç¸å¯¹è¾å°ï¼æ°å­èµäº§äº¤æå­å¨æé«é£é©ï¼å¶å¨å¤©ä¸é´æ­äº¤æï¼æ²¡ææ¶¨è·éå¶ï¼ä»·æ ¼å®¹æååºå®¶ãå¨çæ¿åºæ¿ç­çå½±åèå¤§å¹æ³¢å¨ï¼\"),s.a.createElement(\"p\",null,\" \",\"4. å åå½æ³å¾ãæ³è§åè§èæ§æä»¶çå¶å®æèä¿®æ¹ï¼æ°å­èµäº§äº¤æéæ¶å¯è½è¢«æåæè¢«ç¦æ­¢ã\"),s.a.createElement(\"p\",null,\"æ°å­èµäº§äº¤æææé«é£é©ï¼å¹¶ä¸éåç»å¤§é¨åäººå£«ãæ¨äºè§£åçè§£æ­¤æèµæå¯è½å¯¼è´é¨åæå¤±æå¨é¨æå¤±ï¼æä»¥æ¨åºè¯¥ä»¥è½æ¿åçæå¤±ç¨åº¦æ¥å³å®æèµçéé¢ãæ¨äºè§£åçè§£æ°å­èµäº§ä¼äº§çè¡çé£é©ï¼æä»¥å¦æä»»ä½çé®ï¼å»ºè®®åå¯»æ±çè´¢é¡¾é®çåå©ãæ­¤å¤ï¼é¤äºä¸è¿°æåè¿çé£é©ä»¥å¤ï¼è¿ä¼ææªè½é¢æµçé£é©å­å¨ãæ¨åºæéèèå¹¶ç¨æ¸æ°çå¤æ­è½åå»è¯ä¼°èªå·±çè´¢æ¿ç¶åµåä¸è¿°åé¡¹é£é©èä½åºä»»ä½ä¹°åæ°å­èµäº§çå³å®ï¼å¹¶æ¿æç±æ­¤äº§ççå¨é¨æå¤±ï¼æä»¬å¯¹æ­¤ä¸æ¿æä»»ä½è´£ä»»ã\"),s.a.createElement(\"p\",null,\"æ¬åæ¨ï¼\"),s.a.createElement(\"p\",null,\"1.æ¨äºè§£æ¯ç¹è¡æ¯åºäºåºåé¾çå»ä¸­å¿åäº¤æå¹³å°ï¼å¶åºç¡è´¦å·æå¡åäº¤ææ®åæå¡é½ç±æ¯ç¹è¡å¹³å°æä¾ãäº¦æå¶å®æºææä¸ªäººå¨æ¯ç¹è¡å¹³å°ä¸åè¡èµäº§åï¼ææä¾æå¡ãæ¨äºè§£æ¬ç½å³ä»ä½ä¸ºæ¨åæ¯ç¹è¡å¹³å°åææ°å­èµäº§çå·¥å·ãæ¬ç½å³åªå¯¹èªèº«åè¡çäº¤æä»£å¸èµäº§ï¼åç§°ä»¥GDEX.ä¸ºåç¼ï¼è´è´£ï¼ä¸å¯¹æ¯ç¹è¡ä¸å¶å®æºææä¸ªäººåè¡çèµäº§è´è´£ï¼æ¬ç½å³ä¸åä¸æ¨çä»»ä½äº¤æï¼æ¨åºèªè¡è°¨æå¤æ­ç¡®å®ç¸å³æ°å­èµäº§å/æä¿¡æ¯ççå®æ§ãåæ³æ§åæææ§ï¼å¹¶èªè¡æ¿æå æ­¤äº§ççè´£ä»»ä¸æå¤±ã\"),s.a.createElement(\"p\",null,\" \",\"2. æ¯ç¹è¡å»ä¸­å¿åäº¤æç³»ç»å­æé£é©ï¼åæ¬ä½ä¸éäºè½¯ä»¶ï¼ç¡¬ä»¶åäºèç½é¾ç»çå¤±è´¥ï¼ç¨æ·è´¦æ·ç³»ç»çå®å¨é£é©ç­ãç±äºæä»¬ä¸è½æ§å¶äºèç½ä»¥åæ¯ç¹è¡å¹³å°çå¯é æ§åå¯ç¨æ§ï¼æä»¬ä¸ä¼å¯¹ä¸è¿°é£é©é æçç¨æ·æå¤±æ¿æä»»ä½è´£ä»»ã\"),s.a.createElement(\"p\",null,\" \",\"3. ç¦æ­¢ä½¿ç¨æ¬ç½å³ä»äºæ´é±ãèµ°ç§ãåä¸è´¿èµç­ä¸åéæ³äº¤ææ´»å¨ï¼è¥åç°æ­¤ç±»äºä»¶ï¼æ¬ç½å³å°éååç§å¯ä½¿ç¨ä¹ææ®µï¼åæ¬ä½ä¸éäºä¸­æ­¢æä¾æå¡ï¼éç¥ç¸å³æåæºå³ç­ï¼æä»¬ä¸æ¿æç±æ­¤äº§ççææè´£ä»»å¹¶ä¿çåç¸å³äººå£«è¿½ç©¶è´£ä»»çæå©ã\"),s.a.createElement(\"p\",null,\"ä¸ãæ»å\"),s.a.createElement(\"p\",null,\" \",\"1.1 æ¨å¨ä½¿ç¨æ¬ç½å³æä¾çæå¡ä¹åï¼åºä»ç»éè¯»æ¬åè®®ï¼å¦æä¸çè§£ä¹å¤æå¶ä»å¿è¦ï¼è¯·å¨è¯¢ä¸ä¸å¾å¸ãå¦æ¨ä¸åææ¬åè®®å/æéæ¶å¯¹å¶çä¿®æ¹ï¼è¯·æ¨ç«å³åæ­¢ä½¿ç¨æ¬ç½å³æä¾çæå¡ãä½¿ç¨æ¬ç½å³çä»»ä½æå¡å³è¡¨ç¤ºæ¨å·²äºè§£å¹¶å®å¨åææ¬åè®®åé¡¹åå®¹ï¼åæ¬æ¬ç½å³å¯¹æ¬åè®®éæ¶æåçä»»ä½ä¿®æ¹ã\"),s.a.createElement(\"p\",null,\" \",\"1.2 ä½¿ç¨æ¬ç½å³æä¾çæå¡ååè½ï¼æ¨å°è¢«è§ä¸ºå·²éè¯»ï¼çè§£å¹¶ï¼\"),s.a.createElement(\"p\",null,\" 1.2.1 æ¥åæ¬åè®®æææ¡æ¬¾åæ¡ä»¶ççº¦æã\"),s.a.createElement(\"p\",null,\" \",\"1.2.2 æ¨ç¡®è®¤æ¨å·²å¹´æ»¡21å¨å²ææ ¹æ®ä¸åçå¯éç¨çæ³å¾è§å®çå·æå¯è®¢ç«ååçæ³å®å¹´é¾ï¼å¹¶æååçè½åæ¥åè¿äºæ¡æ¬¾ï¼å¹¶è®¢ç«äº¤æï¼ä½¿ç¨æ¬ç½å³è¿è¡æ°å­èµäº§äº¤æã\"),s.a.createElement(\"p\",null,\" \",\"1.2.3 æ¨ä¿è¯äº¤æä¸­æ¶åå°çå±äºæ¨çæ°å­èµäº§åä¸ºåæ³åå¾å¹¶ææã\"),s.a.createElement(\"p\",null,\" \",\"1.2.4 æ¨åææ¨ä¸ºæ¨èªèº«çäº¤ææéäº¤æè¡ä¸ºæ¿æå¨é¨è´£ä»»åä»»ä½æ¶çæäºæã\"),s.a.createElement(\"p\",null,\" \",\"1.2.5 æ¨åæéµå®ä»»ä½æå³æ³å¾çè§å®ï¼å°±ç¨å¡ç®çèè¨ï¼åæ¬æ¥åä»»ä½äº¤æå©æ¶¦ã\"),s.a.createElement(\"p\",null,\" \",\"1.2.6 æ¬åè®®åªæ¯å°±æ¨ä¸æä»¬ä¹é´è¾¾æçæå©ä¹å¡å³ç³»è¿è¡çº¦æï¼èå¹¶ä¸æ¶åæ¬ç½å³ç¨æ·ä¹é´æå¶ä»ç½å³åæ¨ä¹é´å æ°å­èµäº§äº¤æèäº§ççæ³å¾å³ç³»åæ³å¾çº çº·ã\"),s.a.createElement(\"p\",null,\"äºãåè®®ä¿®è®¢\"),s.a.createElement(\"p\",null,\"æä»¬ä¿çä¸æ¶ä¿®è®¢æ¬åè®®ãå¹¶ä»¥å¬ç¤ºçæ¹å¼è¿è¡å¬åãä¸ååç¬éç¥æ¨çæå©ï¼åæ´åçåè®®ä¼å¨æ¬åè®®é¦é¡µæ æ³¨åæ´æ¶é´ï¼ä¸ç»å¨å¬å¸ï¼ç«å³èªå¨çæãæ¨åºä¸æ¶æµè§åå³æ³¨æ¬åè®®çæ´æ°åæ´æ¶é´åæ´æ°åå®¹ï¼å¦æ¨ä¸åæç¸å³åæ´ï¼åºå½ç«å³åæ­¢ä½¿ç¨æ¬ç½å³æå¡ï¼æ¨ç»§ç»­ä½¿ç¨æ¬ç½å³æå¡ï¼å³è¡¨ç¤ºæ¨æ¥åå¹¶åæç»ä¿®è®¢çåè®®ççº¦æã\"),s.a.createElement(\"p\",null,\"ä¸ãæå¡\"),s.a.createElement(\"p\",null,\"æ¬ç½å³åªä¸ºæ¨æä¾åæ¯ç¹è¡å¹³å°å²å¥åæåæ°å­èµäº§çæå¡ï¼æ¬ç½å³å¹¶ä¸ä½ä¸ºä¹°å®¶æåå®¶åä¸ä¹°åæ°å­èµäº§è¡ä¸ºæ¬èº«ï¼æ¬ç½å³ä¸æä¾ä»»ä½å½å®¶æ³å®è´§å¸åå¥åæåçç¸å³æå¡ã\"),s.a.createElement(\"p\",null,\" 3.1 æå¡åå®¹\"),s.a.createElement(\"p\",null,\" \",\"3.1.1 æ¨ææéè¿æ¬ç½å³åæ¯ç¹è¡å¹³å°å²å¥ææåæ°å­èµäº§ã\"),s.a.createElement(\"p\",null,\" 3.1.2 æ¬ç½å³æ¿è¯ºä¸ºæ¨æä¾çå¶ä»æå¡ã\"),s.a.createElement(\"p\",null,\" 3.2.æå¡è§å\"),s.a.createElement(\"p\",null,\" æ¨æ¿è¯ºéµå®ä¸åæ¬ç½å³æå¡è§åï¼\"),s.a.createElement(\"p\",null,\" \",\"3.2.1 æ¨åºå½éµå®æ³å¾æ³è§ãè§ç« ãåæ¿ç­è¦æ±çè§å®ï¼ä¿è¯è´¦æ·ä¸­æææ°å­èµäº§æ¥æºçåæ³æ§ï¼ä¸å¾å¨æ¬ç½å³æå©ç¨æ¬ç½å³æå¡ä»äºéæ³æå¶ä»æå®³æ¬ç½å³æç¬¬ä¸æ¹æççæ´»å¨ï¼å¦åéææ¥æ¶ä»»ä½è¿æ³ãè¿è§ãä¾µç¯ä»äººæççä¿¡æ¯ï¼åéææ¥æ¶ä¼ éæææå­å¨å¶ä»å±å®³çä¿¡æ¯æè¨è®ºï¼æªç»æ¬ç½å³ææä½¿ç¨æä¼ªé æ¬ç½å³çµå­é®ä»¶é¢å¤´ä¿¡æ¯ç­ã\"),s.a.createElement(\"p\",null,\" \",\"3.2.2 æ¨å¨ä½¿ç¨æ¬ç½å³æå¡ä¹ååºååäºè§£æ¯ç¹è¡è´¦å·çä½¿ç¨å¸¸è¯ï¼åå¥½ç¸åºè´¦å·çå¤ä»½åå¯ç ä¿å­å·¥ä½ï¼å¯¹äºæ¯ç¹è¡è´¦æ·å®å¨é®é¢é æçæå¤±ï¼æ¬ç½å³ä¸æ¿æä»»ä½è´£ä»»ã\"),s.a.createElement(\"p\",null,\" \",\"3.2.3 æ¨å¨ä½¿ç¨æ¬ç½å³æä¾çæå¡è¿ç¨ä¸­ï¼æäº§ççåºçº³ç¨èµï¼ä»¥åä¸åç¡¬ä»¶ãè½¯ä»¶ãæå¡åå¶å®æ¹é¢çè´¹ç¨ï¼åç±æ¨ç¬èªæ¿æã\"),s.a.createElement(\"p\",null,\" \",\"3.2.4 æ¨åºå½éµå®æ¬ç½å³ä¸æ¶åå¸åæ´æ°çæ¬åè®®ä»¥åå¶ä»æå¡æ¡æ¬¾åæä½è§åï¼ææéæ¶ç»æ­¢ä½¿ç¨æ¬ç½å³æä¾çæå¡ã\"),s.a.createElement(\"p\",null,\"åãæ¬ç½å³çæå©åä¹å¡\"),s.a.createElement(\"p\",null,\"4.1 æ¬ç½å³ææå¨åç°æ¬ç½å³ä¸æ¾ç¤ºçä»»ä½ä¿¡æ¯å­å¨ææ¾éè¯¯æ¶ï¼å¯¹ä¿¡æ¯äºä»¥æ´æ­£ã\"),s.a.createElement(\"p\",null,\"4.2 æ¬ç½å³ä¿çéæ¶ä¿®æ¹ãä¸­æ­¢æç»æ­¢æ¬ç½å³æå¡çæå©ï¼æ¬ç½å³è¡ä½¿ä¿®æ¹æä¸­æ­¢æå¡çæå©ä¸éäºååç¥æ¨ï¼æ¬ç½å³ç»æ­¢æ¬ç½å³ä¸é¡¹æå¤é¡¹æå¡çï¼ç»æ­¢èªæ¬ç½å³å¨ç½å³ä¸åå¸ç»æ­¢å¬åä¹æ¥çæã\"),s.a.createElement(\"p\",null,\" \",\"4.3 æ¬ç½å³åºå½éåå¿è¦çææ¯ææ®µåç®¡çæªæ½ä¿éæ¬ç½å³çæ­£å¸¸è¿è¡ã\"),s.a.createElement(\"p\",null,\"äºãèµå¿\"),s.a.createElement(\"p\",null,\" \",\"5.1 å¨ä»»ä½æåµä¸ï¼æä»¬å¯¹æ¨çç´æ¥æå®³çèµå¿è´£ä»»åä¸ä¼è¶è¿æ¨ä»ä½¿ç¨æ¬ç½å³æå¡äº§ççä¸ºæä¸ï¼ 3ï¼ä¸ªæçæ»è´¹ç¨ã\"),s.a.createElement(\"p\",null,\"å­ãå¯»æ±ç¦ä»¤ææµçæå©\"),s.a.createElement(\"p\",null,\"æä»¬åæ¨åæ¿è®¤æ®éæ³å¯¹è¿çº¦æå¯è½è¿çº¦æåµçææµæªæ½æ¯å¯è½æ¯ä¸è¶³ä»¥å¼¥è¡¥æä»¬é­åçå¨é¨æå¤±çï¼æéè¿çº¦æ¹ææå¨è¿çº¦æå¯è½è¿çº¦æåµä¸å¯»æ±ç¦ä»¤ææµä»¥åæ®éæ³æè¡¡å¹³æ³åè®¸çå¶ä»ææçè¡¥ææªæ½ã\"),s.a.createElement(\"p\",null,\"ä¸ãè´£ä»»éå¶ä¸åè´£\"),s.a.createElement(\"p\",null,\" \",\"7.1 æ¨äºè§£å¹¶åæï¼å¨ä»»ä½æåµä¸ï¼æä»¬ä¸å°±ä»¥ä¸åäºé¡¹æ¿æè´£ä»»ï¼\"),s.a.createElement(\"p\",null,\" 7.1.1 æ¶å¥çæå¤±ï¼\"),s.a.createElement(\"p\",null,\" 7.1.2 äº¤æå©æ¶¦æååæå¤±ï¼\"),s.a.createElement(\"p\",null,\" 7.1.3 ä¸å¡ä¸­æ­\"),s.a.createElement(\"p\",null,\" 7.1.4 é¢æå¯èççè´§å¸çæå¤±ï¼\"),s.a.createElement(\"p\",null,\" 7.1.5 ä¿¡æ¯çæå¤±ï¼\"),s.a.createElement(\"p\",null,\" 7.1.6 æºä¼ãåèªæå£°èªçæå¤±ï¼\"),s.a.createElement(\"p\",null,\" 7.1.7 æ°æ®çæåææå¤±ï¼\"),s.a.createElement(\"p\",null,\" 7.1.8 è´­ä¹°æ¿ä»£äº§åææå¡çææ¬ï¼\"),s.a.createElement(\"p\",null,\" \",\"7.1.9 ä»»ä½ç±äºä¾µæï¼åæ¬è¿å¤±ï¼ãè¿çº¦æå¶ä»ä»»ä½åå äº§ççé´æ¥çãç¹æ®çæéå¸¦æ§çæå¤±ææå®³ï¼ä¸è®ºè¿ç§æå¤±ææå®³æ¯å¦å¯ä»¥ä¸ºæä»¬åçé¢è§ï¼ä¸è®ºæä»¬æ¯å¦äºåè¢«åç¥å­å¨æ­¤ç§æ å¤±ææå®³çå¯è½æ§ã\"),s.a.createElement(\"p\",null,\" \",\"7.2 æ¨äºè§£å¹¶åæï¼æä»¬ä¸å¯¹å ä¸è¿°ä»»ä¸æåµèå¯¼è´æ¨çä»»ä½æå®³èµå¿æ¿æè´£ä»»ï¼\"),s.a.createElement(\"p\",null,\" \",\"7.2.1 æä»¬æåçççç±è®¤ä¸ºæ¨çå·ä½äº¤æäºé¡¹å¯è½å­å¨éå¤§è¿æ³æè¿çº¦æå½¢ã\"),s.a.createElement(\"p\",null,\" \",\"7.2.2 æä»¬æåçççç±è®¤ä¸ºæ¨å¨æ¬ç½å³çè¡ä¸ºæ¶å«è¿æ³æä¸å½ã\"),s.a.createElement(\"p\",null,\" \",\"7.2.3 éè¿æ¬ç½å³æå¡è´­ä¹°æè·åä»»ä½æ°æ®ãä¿¡æ¯æè¿è¡äº¤æç­è¡ä¸ºææ¿ä»£è¡ä¸ºäº§ççè´¹ç¨åæå¤±ã\"),s.a.createElement(\"p\",null,\" 7.2.4 æ¨å¯¹æ¬ç½å³æå¡çè¯¯è§£ã\"),s.a.createElement(\"p\",null,\" \",\"7.2.5 ä»»ä½éå æä»¬çåå èå¼èµ·çä¸æ¬ç½å³æä¾çæå¡æå³çå¶å®æå¤±ã\"),s.a.createElement(\"p\",null,\" \",\"7.3 æä»¬å¯¹ç±äºä¿¡æ¯ç½ç»è®¾å¤ç»´æ¤ãä¿¡æ¯ç½ç»è¿æ¥æéãçµèãéè®¯æå¶ä»ç³»ç»çæéãçµåæéãå¤©æ°åå ãæå¤äºæãç½¢å·¥ãå³å¨äºè®®ãæ´ä¹±ãèµ·ä¹ãéªä¹±ãçäº§åæçäº§èµæä¸è¶³ãç«ç¾ãæ´ªæ°´ãé£æ´ãçç¸ãæäºãé¶è¡æå¶ä»åä½æ¹åå ãæ°å­èµäº§å¸åºå´©æºãæ¿åºè¡ä¸ºã å¸æ³æè¡æ¿æºå³çå½ä»¤ãå¶ä»ä¸å¨æä»¬å¯æ§èå´åææä»¬æ è½åæ§å¶çè¡ä¸ºæç¬¬ä¸æ¹çåå èé æçä¸è½æå¡æå»¶è¿æå¡ï¼ä»¥åé æçæ¨çæå¤±ï¼æä»¬ä¸æ¿æä»»ä½è´£ä»»ã\"),s.a.createElement(\"p\",null,\" \",\"7.4 æä»¬ä¸è½ä¿è¯æ¬ç½å³åå«çå¨é¨ä¿¡æ¯ãç¨åºãææ¬ç­å®å¨å®å¨ï¼ä¸åä»»ä½çæ¯ãæ¨é©¬ç­æ¶æç¨åºçå¹²æ°åç ´åï¼ææ¨ç»éãä½¿ç¨æ¬ç½å³ä»»ä½æå¡æä¸è½½åä½¿ç¨è¯¥ä¸è½½çä»»ä½ç¨åºãä¿¡æ¯ãæ°æ®ç­åæ¯æ¨ä¸ªäººçå³å®å¹¶èªè¡æ¿æé£é©åå¯è½äº§ççæå¤±ã\"),s.a.createElement(\"p\",null,\" \",\"7.5 æä»¬å¯¹æ¬ç½å³ä¸­é¾æ¥çä»»ä½ç¬¬ä¸æ¹ç½å³çä»»ä½ä¿¡æ¯ãäº§ååä¸å¡åå¶ä»ä»»ä½å½¢å¼çä¸å±äºæä»¬çä¸»ä½çåå®¹ç­ä¸åä»»ä½ä¿è¯åæ¿è¯ºï¼æ¨å¦æä½¿ç¨ç¬¬ä¸æ¹ç½å³æä¾çä»»ä½æå¡ãä¿¡æ¯åäº§åç­åä¸ºæ¨ä¸ªäººå³å®ä¸æ¿æç±æ­¤äº§ççä¸åè´£ä»»ã\"),s.a.createElement(\"p\",null,\" \",\"7.6 æä»¬å¯¹äºæ¨ä½¿ç¨æ¬ç½å³æå¡ä¸åä»»ä½æç¤ºææç¤ºçä¿è¯ï¼åæ¬ä½ä¸éäºæ¬ç½å³æä¾æå¡çéç¨æ§ãæ²¡æéè¯¯æçæ¼ãæç»­æ§ãåç¡®æ§ãå¯é æ§ãéç¨äºæä¸ç¹å®ç¨éãåæ¶ï¼æä»¬ä¹ä¸å¯¹æ¬ç½å³æä¾çæå¡ææ¶åçææ¯åä¿¡æ¯çæææ§ãåç¡®æ§ãæ­£ç¡®æ§ãå¯é æ§ãè´¨éãç¨³å®ãå®æ´ååæ¶æ§ä½åºä»»ä½æ¿è¯ºåä¿è¯ãæ¯å¦ç»éæä½¿ç¨æ¬ç½å³æä¾çæå¡æ¯æ¨ä¸ªäººçå³å®ä¸èªè¡æ¿æé£é©åå¯è½äº§ççæå¤±ãæä»¬å¯¹äºæ°å­èµäº§çå¸åºãä»·å¼åä»·æ ¼ç­ä¸åä»»ä½æç¤ºææç¤ºçä¿è¯ï¼æ¨çè§£å¹¶äºè§£æ°å­èµäº§å¸åºæ¯ä¸ç¨³å®çï¼ä»·æ ¼åä»·å¼éæ¶ä¼å¤§å¹æ³¢å¨æå´©çï¼äº¤ææ°å­èµäº§æ¯æ¨ä¸ªäººçèªç±éæ©åå³å®ä¸èªè¡æ¿æé£é©åå¯è½äº§ççæå¤±ã\"),s.a.createElement(\"p\",null,\" \",\"7.7 æ¬åè®®ä¸­è§å®çæä»¬çä¿è¯åæ¿è¯ºæ¯ç±æä»¬å°±æ¬åè®®åæ¬ç½å³æä¾çæå¡çå¯ä¸ä¿è¯åéè¿°ï¼å¹¶åä»£ä»»ä½å¶ä»éå¾åæ¹å¼äº§ççä¿è¯åæ¿è¯ºï¼æ è®ºæ¯ä¹¦é¢çæå£å¤´çï¼æç¤ºçææç¤ºçãææè¿äºä¿è¯åéè¿°ä»ä»ä»£è¡¨æä»¬èªèº«çæ¿è¯ºåä¿è¯ï¼å¹¶ä¸ä¿è¯ä»»ä½ç¬¬ä¸æ¹éµå®æ¬åè®®ä¸­çä¿è¯åæ¿è¯ºã\"),s.a.createElement(\"p\",null,\" \",\"7.8 æä»¬å¹¶ä¸æ¾å¼æ¬åè®®ä¸­æªæåçå¨æ³å¾éç¨çæå¤§èå´åæä»¬äº«æçéå¶ãåé¤ææµéæä»¬æå®³èµå¿è´£ä»»çä»»ä½æå©ã\"),s.a.createElement(\"p\",null,\" \",\"7.9 ä½¿ç¨æ¬ç½å³æå¡å³è¡¨ç¤ºè®¤å¯æä»¬æç§æ¬åè®®ä¸­è§å®çè§åè¿è¡çä»»ä½æä½ï¼äº§ççä»»ä½é£é©åç±æ¨æ¿æã\"),s.a.createElement(\"p\",null,\"å«ãç¥è¯äº§æ\"),s.a.createElement(\"p\",null,\" \",\"8.1 æ¬ç½å³æåå«çå¨é¨æºåææåæ¬ä½ä¸éäºç½å³æ å¿ãæ°æ®åºãç½å³è®¾è®¡ãæå­åå¾è¡¨ãè½¯ä»¶ãç§çãå½åãé³ä¹ãå£°é³åå¶åè¿°ç»åï¼è½¯ä»¶ç¼è¯ãç¸å³æºä»£ç åè½¯ä»¶ (åæ¬å°åºç¨ç¨åºåèæ¬) çç¥è¯äº§ææå©åå½æ¬ç½å³ææãæ¨ä¸å¾ä¸ºåä¸ç®çå¤å¶ãæ´æ¹ãæ·è´ãåéæä½¿ç¨åè¿°ä»»ä½æææåå®¹ã\"),s.a.createElement(\"p\",null,\" \",\"8.2 æ¬ç½å³åç§°ä¸­åå«çæææå© (åæ¬ä½ä¸éäºåèªååæ ãæ å¿) åå½å¬å¸ææã\"),s.a.createElement(\"p\",null,\" \",\"8.3 æ¨æ¥åæ¬åè®®å³è§ä¸ºæ¨ä¸»å¨å°å¶å¨æ¬ç½å³åè¡¨çä»»ä½å½¢å¼çä¿¡æ¯çèä½æï¼ åæ¬ä½ä¸éäºï¼å¤å¶æãåè¡æãåºç§æãå±è§æãè¡¨æ¼æãæ¾æ æãå¹¿æ­æãä¿¡æ¯ç½ç»ä¼ æ­æãæå¶æãæ¹ç¼æãç¿»è¯æãæ±ç¼æ ä»¥ååºå½ç±èä½æäººäº«æçå¶ä»å¯è½¬è®©æå©æ å¿ç¬å®¶è½¬è®©ç»æ¬ç½å³ææï¼æ¬ç½å³ææå©å°±ä»»ä½ä¸»ä½ä¾µæåç¬æèµ·è¯è®¼å¹¶è·å¾å¨é¨èµå¿ã æ¬åè®®æååäºæ¨å¨æ¬ç½å³åå¸çä»»ä½åèä½ææ³ä¿æ¤çä½ååå®¹ï¼ æ è®ºè¯¥åå®¹å½¢æäºæ¬åè®®ç­¾è®¢åè¿æ¯æ¬åè®®ç­¾è®¢åã\"),s.a.createElement(\"p\",null,\" \",\"8.4 æ¨å¨ä½¿ç¨æ¬ç½å³æå¡è¿ç¨ä¸­ä¸å¾éæ³ä½¿ç¨æå¤åæ¬ç½å³æä»äººçç¥è¯äº§ææå©ãæ¨ä¸å¾å°å·²åè¡¨äºæ¬ç½å³çä¿¡æ¯ä»¥ä»»ä½å½¢å¼åå¸æææå¶å®ç½å³ï¼ååªä½ï¼ä½¿ç¨ã\"),s.a.createElement(\"p\",null,\" \",\"8.5 æ¨ä½¿ç¨æ¬ç½å³æä¾çä»»ä½æå¡åä¸è§ä¸ºæä»¬åæ¨è½¬è®©ä»»ä½ç¥è¯äº§æã\"),s.a.createElement(\"p\",null,\"ä¹ãå¯åå²æ§\"),s.a.createElement(\"p\",null,\"å¦æ¬åè®®ä¸­çä»»ä½æ¡æ¬¾è¢«ä»»ä½æç®¡è¾æçæ³é¢è®¤å®ä¸ºä¸å¯æ§è¡çï¼æ æçæéæ³çï¼å¹¶ä¸å½±åæ¬åè®®çå¶ä½æ¡æ¬¾çæåã\"),s.a.createElement(\"p\",null,\"åãéä»£çå³ç³»\"),s.a.createElement(\"p\",null,\"æ¬åè®®ä¸­çä»»ä½è§å®åä¸å¯è¢«è®¤ä¸ºåé äºãæç¤ºäºæä»¥å¶ä»æ¹å¼å°æä»¬è§ä¸ºæ¨çä»£çäººãåæäººæå¶ä»ä»£è¡¨äººï¼æ¬åè®®æå¶ä»è§å®çé¤å¤ã\"),s.a.createElement(\"p\",null,\"åä¸ãå¼æ\"),s.a.createElement(\"p\",null,\"æä»¬ææ¨ä»»ä½ä¸æ¹å¯¹è¿½ç©¶æ¬åè®®çº¦å®çè¿çº¦è´£ä»»æå¶ä»è´£ä»»çå¼æå¹¶ä¸è½è®¤å®æè§£éä¸ºå¯¹å¶ä»è¿çº¦è´£ä»»çå¼æï¼æªè¡ä½¿ä»»ä½æå©æææµä¸å¾ä»¥ä»»ä½æ¹å¼è¢«è§£éä¸ºå¯¹è¯¥ç­æå©æææµçæ¾å¼ã\"),s.a.createElement(\"p\",null,\"åäºãæ é¢\"),s.a.createElement(\"p\",null,\"æææ é¢ä»ä¾åè®®è¡¨è¿°æ¹ä¾¿ï¼å¹¶ä¸ç¨äºæ©å¤§æéå¶è¯¥åè®®æ¡æ¬¾çåå®¹æèå´ã\"),s.a.createElement(\"p\",null,\"åä¸ãéç¨æ³å¾\"),s.a.createElement(\"p\",null,\"æ¬åè®®å¨é¨åå®¹åä¸ºæ ¹æ®æ°å å¡å±åå½æ³å¾è®¢ç«çååï¼å¶æç«ãè§£éãåå®¹åæ§è¡åéç¨æ°å å¡å±åå½ç¸å³æ³å¾è§å®ï¼ä»»ä½å æä¸æ¬åè®®çº¦å®çæå¡æå³èäº§ççç´¢èµæè¯è®¼ï¼é½åºä¾ç§æ°å å¡å±åå½çæ³å¾è¿è¡ç®¡è¾å¹¶å ä»¥è§£éåæ§è¡ãä¸ºé¿åçä¹ï¼è¿ä¸æ¡æ¬¾æç¡®éç¨äºä»»ä½éå¯¹æä»¬çä¾µæç´¢èµãä»»ä½éå¯¹æä»¬æèæ¯åæä»¬æå³çç´¢èµæè¯è®¼çç®¡è¾æ³é¢æè¯è®¼å°åå¨æ°å å¡å±åå½ãæ¨æ æ¡ä»¶å°è·å¾å¨æ°å å¡å±åå½æ³é¢è¿è¡è¯è®¼åä¸è¯çæä»æ§çç®¡è¾æãæ¨ä¹æ æ¡ä»¶å°åæä¸æ¬åè®®æ¬¾æå³çäºè®®æé®é¢æäº§ççä»»ä½ç´¢èµè¯·æ±åè¯è®¼çåçå°ææ³é¢åæä»æ§å¾å¨æ°å å¡å±åå½ãä¸æ¹ä¾¿æ³é¢çååä¸éç¨äºæ ¹æ®æ¬æå¡æ¡æ¬¾çéæ©çæ³é¢ã\"),s.a.createElement(\"p\",null,\"ååãåè®®ççæåè§£é\"),s.a.createElement(\"p\",null,\"14.1 æ¬åè®®äºæ¨ç¹å»æ¬ç½å³æ³¨åé¡µé¢çåææ³¨åå¹¶å®ææ³¨åç¨åºãè·å¾æ¬ç½å³è´¦å·åå¯ç æ¶çæï¼å¯¹æ¬ç½å³åæ¨åå·æçº¦æåã\"),s.a.createElement(\"p\",null,\"14.2 æ¬åè®®çæç»è§£éæå½æ¬ç½å³ææã\"));default:return s.a.createElement(\"div\",{className:\"container\",ref:\"agreement\",style:{height:\"500px\",overflow:\"auto\",position:\"relative\"}},s.a.createElement(\"h2\",{style:{textAlign:\"center\"}},\"Service Agreement\"),s.a.createElement(\"p\",null,\"OBSIDIAN TECHNOLOGY CO. PTE. LTD. (hereinafter referred to as the 'Company') is a company incorporated under the laws in Singapore Republic, GDEX (hereinafter referred to as 'GDEX' or 'the Gateway') is a cryptocurrency gateway to Bitshares which is operated by the company. The main access point for GDEX is https://gdex.io, GDEX is a gateway that provide cryptocurrency deposit and withdraw service (hereinafter referred to as 'the Service') to/from Bitshares. For the convenience of wording in this Agreement, the Company and the Gateway are referred to as 'We' or other applicable forms of first person pronouns in this Agreement. All natural persons or other subjects who use the Service shall be users of the Gateway. For the convenience of wording in this Agreement, the users are referred to as 'You' or any other applicable forms of the second-person pronouns. For the convenience of wording in this Agreement, you and us are collectively referred to as 'both parties', and individually as 'one party'.\"),s.a.createElement(\"p\",null,\"Important reminder:\"),s.a.createElement(\"p\",null,\"We hereby remind you that:\"),s.a.createElement(\"p\",null,\"1. The digital assets themselves are not offered by any financial institution, corporation or the Gateway;\"),s.a.createElement(\"p\",null,\"2. The digital asset market is new and unconfirmed, and will not necessarily expand;\"),s.a.createElement(\"p\",null,\"3. Digital assets are primarily used by speculators, and are used relatively less on retail and commercial markets; digital asset transactions are highly risky, due to the fact that they are traded throughout 24-hour a day without limits on the rise or fall in price, and market makers and global government policies may cause major fluctuations in their prices;\"),s.a.createElement(\"p\",null,\"4. Digital asset transactions may be suspended or prohibited at any time due to the enactment or modification of national laws, regulations and regulatory documents. Digital assets trading is highly risky and therefore not suitable for the vast majority of people. You acknowledge and understand that investment in digital assets may result in partial or total loss of your investment and therefore you are advised to decide the amount of your investment on the basis of your loss-bearing capacity. You acknowledge and understand that digital assets may generate derivative risks. Therefore, if you have any doubt, you are advised to seek assistance from a financial adviser first. Furthermore, aside from the above-mentioned risks, there may also be unpredictable risks. Therefore, you are advised to carefully consider and use clear judgment to assess your financial position and the abovementioned risks before making any decisions on buying and selling digital assets; any and all losses arising therefrom will be borne by you and we shall not be held liable in any manner whatsoever.\"),s.a.createElement(\"p\",null,\"5. You understand that Bitshares is a decentralized exchange based on blockchain, the basic account service and the trade processing service are provided by Bitshares, there are also other institutions or single persons that issue assets and/or provide service on Bitshares. You understand that the Gateway is only used for you to deposit/withdraw cryptocurrency to/from Bitshares. The Gateway only undertake the due obligations for the availability of own issued assets (with 'GDEX.' as prefix of the name), do not undertake the due obligations for the account service and the trade processing service provided by Bitshares, do not undertake the due obligations for availability of the assets issued by other institutions or single persons.\",\" \"),s.a.createElement(\"p\",null,\"6. There are risk in both Internet and Bitshares, include but not limit to failure for software, hardware to connect to Internet, security risk for Bitshares accounting system. As the availability and reliability of Internet and Bitshares are not under our control, we do not undertake obligations for the loss caused by the risks mentioned above.\"),s.a.createElement(\"p\",null,\"7.it is prohibited to use the Gateway for money laundering, smuggling, briberyï¼if any user are found relevant to these actions, the Gateway will take various actions, include but not limited to terminating the Service to the user, informing relevant authority.\"))}}},{key:\"render\",value:function(){var e=this.props.locale;return this._getAgreement(e)}}]),t}();Bt.propTypes={locale:C.a.string};var Pt=Object(i.a)(Bt,{listenTo:function(){return[D.a]},getProps:function(){return{settings:D.a.getState().settings}}}),Dt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ft=new(a(2192))(\"-----BEGIN PUBLIC KEY-----\\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCH+QtHPKcWxdL25xL4pCuu16tKh6yPx/TFnd/8\\ncSt2TC+sPuYsD0h/sy4VKNxhBb7F7U/TLXjMxNcSfPVPjPM3X2LvOlmU9LOEcJGrmlmOOiyO/kws\\nyKKOhR4UyZ1NghhfHjuyDBj6V8fCL+xBZTJWsh/X61Z0wLCwOzXcQCsNJwIDAQAB\\n-----END PUBLIC KEY-----\"),Rt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=e.viewSettings.get(e.provider+\"Action\",\"deposit\");return a.state={isAgreementVisible:!1,coins:null,activeCoinInfo:a._getActiveCoinInfo(e,{action:n}),action:n,down:!1,isAvailable:!0,user_info:null,isAgree:!1,agreeChecked:!0,agreeNotice:!1,locale:e.viewSettings.get(\"locale\"),intermediate:null,memo_rule:null},a.user_info_cache=new pt,a.showAgreement=a.showAgreement.bind(a),a.hideAgreement=a.hideAgreement.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Dt(t,[{key:\"showAgreement\",value:function(){this.setState({isAgreementVisible:!0})}},{key:\"hideAgreement\",value:function(){this.setState({isAgreementVisible:!1})}},{key:\"_getActiveCoinInfo\",value:function(e,t){var a=e.viewSettings.get(\"activeCoin_\"+e.provider+\"_\"+t.action,null),n=e.viewSettings.get(\"activeCoinId_\"+e.provider,null),s=null;s=\"deposit\"==t.action?\"BTC\":\"GDEX.BTC\";var i=a||s,o=n||1002;return this._getWithdrawRule(o),{name:i,id:o}}},{key:\"_transformCoin\",value:function(e){var t=[];try{e.filter(function(e){return 0!=e.status}).forEach(function(e){var a={};1==e.type?(a.innerAssetId=e.assetId,a.innerAssetName=e.assetName,a.innerSymbol=e.assetSymbol,a.outerAssetId=e.relationId,a.outerAssetName=e.relationSymbol,a.outerSymbol=e.relationSymbol,a.status=e.withdrawStatus,a.gateFee=e.withdrawFees,a.needMemo=e.needMemo,a.minTransactionAmount=e.minWithdrawAmount,a.type=e.type,a.relationPrecision=e.relationPrecision):2==e.type?(a.innerAssetId=e.relationId,a.innerAssetName=e.relationSymbol,a.innerSymbol=e.relationSymbol,a.outerAssetId=e.assetId,a.outerAssetName=e.assetName,a.outerSymbol=e.assetSymbol,a.status=e.depositStatus,a.gateFee=e.depositFees,a.needMemo=e.needMemo,a.minTransactionAmount=e.minDepositAmount,a.type=e.type,a.relationPrecision=e.relationPrecision):a=null,a&&t.push(a)})}catch(e){console.log(\"Transform coin failed: \",e)}return t}},{key:\"_getUserInfo\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e||(e=this.props.account.get(\"name\")),t||(t=this.state.isAgree),t){var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return ot(e,w.g.BASE+w.g.GET_USER_INFO,t)}({userAccount:e,isAgree:t}),n=this;a.then(function(t){var a=t.user;n.setState({isAgree:!0,user_info:{user_id:a.uid,status:a.status}}),0==a.status&&a.agreeAgreement?n.user_info_cache.cacheUserInfo(e,a.uid,a.status):n.user_info_cache.delUserInfo(e)}),a.catch(function(e){console.log(\"Exception in fetching user info: \"+e)})}}},{key:\"_getCoins\",value:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.requestType||(e.requestType=0),e.assetType||(e.assetType=0),e.version||(e.version=\"1.1\"),ot(e,w.g.BASE+w.g.ASSET_LIST,t)}({userAccount:this.props.account.get(\"name\")}),t=this;e.then(function(e){var a=t._transformCoin(e.assets);t.setState({isAvailable:!0,coins:a})},function(e){console.log(\"fail\"+e)}),e.catch(function(e){console.log(e),t.setState({isAvailable:!1})})}},{key:\"_checkIsAgree\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=this.props.account.get(\"name\"));var t=this.user_info_cache.getUserInfo(e);if(t)this.setState({user_info:t,isAgree:!0});else{var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return ot(e,w.g.BASE+w.g.USER_AGREEMENT,t)}({userAccount:e}),n=this;a.then(function(t){t.agree?(n.setState({isAgree:!0}),n._getUserInfo(e,!0)):n.setState({isAgree:!1})},function(e){console.log(\"fail\"+e)}),a.catch(function(e){console.log(e),n.setState({isAvailable:!1})})}}},{key:\"componentWillMount\",value:function(){this._checkIsAgree(),this._getCoins()}},{key:\"_getWithdrawAssetId\",value:function(e){var t=1,a=\"innerSymbol\";return\"deposit\"==this.state.action&&(t=2,a=\"outerSymbol\"),this.state.coins.filter(function(n){return n.type==t&&n[a]==e})[0].innerAssetId}},{key:\"onSelectCoin\",value:function(e){var t=this.state.activeCoinInfo;t.name=e.target.value;var a=this._getWithdrawAssetId(e.target.value);t.id=a,this.setState({activeCoinInfo:t}),this._getWithdrawRule(a);var n={};n[\"activeCoin_\"+this.props.provider+\"_\"+this.state.action]=e.target.value,n[\"activeCoinId_\"+this.props.provider]=a,F.a.changeViewSetting(n)}},{key:\"_getWithdrawRule\",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return ot(e,w.g.BASE+w.g.WITHDRAW_RULE,t)}({assetId:e}),a=this;t.then(function(e){var t=Ft.decryptPublic(e.transferToAccount,\"utf-8\");a.setState({intermediate:t,memo_rule:e.memoRule})},function(e){console.log(\"fail\"+e),a.setState({intermediate:null})}),t.catch(function(e){console.log(e),a.setState({intermediate:null})})}},{key:\"changeAction\",value:function(e){var t=this._getActiveCoinInfo(this.props,{action:e});this.setState({action:e,activeCoinInfo:t}),F.a.changeViewSetting(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},this.props.provider+\"Action\",e))}},{key:\"componentWillReceiveProps\",value:function(e){this.props.account!=e.account&&this._checkIsAgree(e.account.get(\"name\"))}},{key:\"_updateCheck\",value:function(){this.setState({agreeChecked:!this.state.agreeChecked}),this.setState({agreeNotice:!1})}},{key:\"_showUserAgreement\",value:function(){this.showAgreement()}},{key:\"_registerUser\",value:function(){this.state.agreeChecked?this._getUserInfo(null,!0):this.setState({agreeNotice:!0})}},{key:\"render\",value:function(){var e=this.props.account,t=this.state,a=t.coins,n=t.activeCoinInfo,i=t.action,o=t.isAvailable,r=t.user_info,l=t.isAgree,c=t.agreeChecked,p=t.agreeNotice,d=t.intermediate,m=t.memo_rule,h=\"https://support.gdex.io/\",_=\"602573197\",f=\"https://t.me/GDEXer\",y=s.a.createElement(\"div\",null,s.a.createElement(\"br\",null),s.a.createElement(\"br\",null),s.a.createElement(u.a,{content:\"gateway.support_gdex\"}),s.a.createElement(\"br\",null),s.a.createElement(\"br\",null),s.a.createElement(\"p\",null,\"Help:\",\" \",s.a.createElement(\"a\",{href:h,target:\"_blank\",rel:\"noopener noreferrer\"},h)),s.a.createElement(\"p\",null,\"QQ:\",\" \",s.a.createElement(\"a\",{target:\"_blank\",href:\"//shang.qq.com/wpa/qunwpa?idkey=5d192c325146762cf5a9256038fed9faef4fcace21a36882854354dd1d599f11\",rel:\"noopener noreferrer\"},_)),s.a.createElement(\"p\",null,\"Telegram:\",\" \",s.a.createElement(\"a\",{href:f,target:\"_blank\",rel:\"noopener noreferrer\"},f)));if(!l)return s.a.createElement(\"div\",null,s.a.createElement(\"span\",null,s.a.createElement(\"input\",{type:\"checkbox\",style:{marginRight:\"10px\"},checked:c,onChange:this._updateCheck.bind(this)}),s.a.createElement(u.a,{className:\"txtlabel\",content:\"gateway.agreement.hint\"}),s.a.createElement(\"a\",{onClick:this._showUserAgreement.bind(this)},\" \",s.a.createElement(u.a,{className:\"txtlabel\",content:\"gateway.agreement.name\"}))),p?s.a.createElement(\"div\",{className:\"has-error\",style:{paddingTop:10}},s.a.createElement(u.a,{className:\"txtlabel\",content:\"gateway.agreement.notice\"})):null,s.a.createElement(\"div\",{className:\"buttonGroup\"},s.a.createElement(\"span\",{style:{marginTop:\"20px\"},onClick:this._registerUser.bind(this),className:\" button\"},s.a.createElement(u.a,{className:\"txtlabel\",content:\"gateway.agreement.register\"}))),s.a.createElement(M.Modal,{footer:[s.a.createElement(M.Button,{type:\"primary\",key:\"close\",onClick:this.hideAgreement},x.a.translate(\"modal.close\"))],visible:this.state.isAgreementVisible,onCancel:this.hideAgreement},s.a.createElement(\"br\",null),s.a.createElement(\"div\",{className:\"grid-block vertical\"},s.a.createElement(Pt,{onCancel:this.hideAgreement,locale:this.props.settings.get(\"locale\",\"en\")}))),y);if(!a&&o)return s.a.createElement(v.a,null);if(!o)return s.a.createElement(\"div\",null,s.a.createElement(u.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable\",component:\"h4\"}));var g=null,w=null,b=null;\"deposit\"==i?(w=\"outerAssetId\",g=\"outerSymbol\",b=2):(w=\"innerAssetId\",g=\"innerSymbol\",b=1);var E=(a=a.filter(function(e){return e.type==b})).map(function(e){return s.a.createElement(\"option\",{value:e[g],key:e[g]},e[g])}).filter(function(e){return null!==e}),k=a.filter(function(e){return e[g]==n.name})[0],C=null;return k&&0==k.status?r?0!=r.status&&(C=s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{className:\"txtlabel cancel\",content:\"gateway.frozen\",account:e.get(\"name\"),component:\"h4\"}))):C=s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{className:\"txtlabel cancel\",content:\"gateway.user_unavailable\",component:\"h4\"})):C=s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{className:\"txtlabel cancel\",content:\"gateway.asset_unavailable\",asset:n.name,component:\"h4\"})),s.a.createElement(\"div\",{style:this.props.style},s.a.createElement(\"div\",{className:\"grid-block no-margin vertical medium-horizontal no-padding\"},s.a.createElement(\"div\",{className:\"medium-4\"},s.a.createElement(\"div\",null,s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.choose_\"+i}),\":\",\" \"),s.a.createElement(\"select\",{className:\"external-coin-types bts-select\",onChange:this.onSelectCoin.bind(this),value:n.name},E))),s.a.createElement(\"div\",{className:\"medium-6 medium-offset-1\"},s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.gateway_text\"}),\":\"),s.a.createElement(\"div\",{style:{paddingBottom:15}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},s.a.createElement(\"li\",{className:\"deposit\"===i?\"is-active\":\"\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"deposit\")},s.a.createElement(u.a,{content:\"gateway.deposit\"}))),s.a.createElement(\"li\",{className:\"withdraw\"===i?\"is-active\":\"\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"withdraw\")},s.a.createElement(u.a,{content:\"gateway.withdraw\"}))))))),C||s.a.createElement(\"div\",null,s.a.createElement(\"div\",{style:{marginBottom:15}},s.a.createElement(Ct,{account:e,coin:k,issuer_account:d,user_id:r.user_id,action:this.state.action,gateway:\"gdex\",btsCoin:k.innerSymbol,memo_rule:m})),s.a.createElement(Tt,{userId:r.user_id,userAccount:e.get(\"name\"),assetId:k[w],assetName:k[g],compactView:!0,fullHeight:!0,recordType:\"deposit\"==i?1:2,filter:\"transfer\",title:s.a.createElement(u.a,{content:\"gateway.recent_\"+this.state.action})})),y)}}]),t}(),qt=Object(i.a)(Rt,{listenTo:function(){return[D.a]},getProps:function(){return{viewSettings:D.a.getState().viewSettings,settings:D.a.getState().settings}}}),Wt=a(2273),Lt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Ut=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.current_xbtsx_address_cache_version_string=\"1\"}return Lt(e,[{key:\"getIndexForDepositKeyInExchange\",value:function(e,t,a){return[this.current_xbtsx_address_cache_version_string,e,t,a].reduce(function(e,t){return e.concat(\"[\",t,\"]\")},\"\")}},{key:\"getCachedInputAddress\",value:function(e,t,a,n){var s=H.a.getWallet();if(!s)return null;s.deposit_keys=s.deposit_keys||{},s.deposit_keys[e]=s.deposit_keys[e]||{};var i=this.getIndexForDepositKeyInExchange(t,a,n);s.deposit_keys[e][i]=s.deposit_keys[e][i]||[];var o=s.deposit_keys[e][i].length;return o?s.deposit_keys[e][i][o-1]:null}},{key:\"cacheInputAddress\",value:function(e,t,a,n,s,i){var o=H.a.getWallet();if(!o)return null;o.deposit_keys=o.deposit_keys||{},o.deposit_keys[e]=o.deposit_keys[e]||{};var r=this.getIndexForDepositKeyInExchange(t,a,n);o.deposit_keys[e][r]=o.deposit_keys[e][r]||[],o.deposit_keys[e][r].push({address:s,memo:i}),H.a._updateWallet()}}]),e}(),Vt=a(2096),Ht=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Jt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.deposit_address_cache=new Ut,a.state={isModalVisible:!1,account_name:null,receive_address:null},a.addDepositAddress=a.addDepositAddress.bind(a),a.showModal=a.showModal.bind(a),a.hideModal=a.hideModal.bind(a),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Ht(t,[{key:\"showModal\",value:function(){this.setState({isModalVisible:!0})}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1})}},{key:\"_getDepositObject\",value:function(){return{walletType:this.props.deposit_wallet_type,inputCoinType:this.props.deposit_coin_type,outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get(\"name\"),stateCallback:this.addDepositAddress}}},{key:\"addDepositAddress\",value:function(e){var t=this.props.account.get(\"name\");this.setState({account_name:t}),this.setState({receive_address:e})}},{key:\"getWithdrawModalId\",value:function(){return\"withdraw_asset_\"+this.props.issuer_account.get(\"name\")+\"_\"+this.props.receive_asset.get(\"symbol\")}},{key:\"onWithdraw\",value:function(){this.showModal()}},{key:\"render\",value:function(){var e=s.a.createElement(\"div\",{style:{display:\"none\",minHeight:150}});if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return e;var t=this.props.account.get(\"balances\");if(this.props.deprecated_in_favor_of){var a=!1,n=t.get(this.props.receive_asset.get(\"id\"));if(n){var i=m.ChainStore.getObject(n);if(i)0!=i.get(\"balance\")&&(a=!0)}if(!a)return e}var o=null;if(this.state.account_name===this.props.account.get(\"name\")&&(o=this.state.receive_address),!o)this.props.account.get(\"name\");if(!o)return Object(Vt.b)(this._getDepositObject()),e;var r=this.getWithdrawModalId(),c=null,p=null,d=\"\",h=\"sth:\"+o.address+\"?vendorField=\"+this.props.account.get(\"name\"),g=!1;\"STH\"===this.props.deposit_asset&&(g=!0);var w=void 0;if(this.props.deposit_account){c=s.a.createElement(\"span\",null,this.props.deposit_account),d=this.props.deposit_account,w=\"dex:\"+this.props.account.get(\"name\"),p=s.a.createElement(\"span\",null,w);var v=this.props.deposit_coin_type+\":\"}else{o.memo?(w=o.memo,d=o.address,c=s.a.createElement(\"span\",null,o.address),p=s.a.createElement(\"span\",null,o.memo)):(d=o.address,c=s.a.createElement(\"span\",null,o.address));v=\"\"}var b=l.a.format_number(this.props.min_amount/l.a.get_asset_precision(this.props.asset_precision),this.props.asset_precision,!1);return\"deposit\"===this.props.action?s.a.createElement(\"div\",{className:\"rudex__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_deposit\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},this.props.deposit_asset)),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_receive\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(f.a,{name:this.props.receive_asset.get(\"symbol\"),replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.intermediate\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.issuer_account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.your_account\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),replace:!1})))))),w?null:s.a.createElement(\"div\",{className:\"QR\"},s.a.createElement(mt.a,{size:128,value:d}))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_inst\"}),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.deposit_to\",asset:this.props.deposit_asset}),\":\"),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(\"b\",null,s.a.createElement(u.a,{content:\"gateway.xbtsx.min_amount\",minAmount:b,symbol:this.props.deposit_coin_type}))),s.a.createElement(\"div\",{style:{padding:\"10px 0\",fontSize:\"1.1rem\"}},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{style:{textTransform:\"uppercase\"},content:\"gateway.address\"}),\":\",\" \",s.a.createElement(O,{replaceCopyText:x.a.translate(\"gateway.use_copy_button\")},s.a.createElement(\"b\",null,c)))),p?s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{style:{textTransform:\"uppercase\"},content:\"gateway.memo\"}),\":\",\" \",s.a.createElement(O,{replaceCopyText:x.a.translate(\"gateway.use_copy_button\")},s.a.createElement(\"b\",null,\" \",p,\" \")))):null)),s.a.createElement(\"div\",{className:\"button-group\",style:{paddingTop:10}},c?s.a.createElement(j.a,{text:d},s.a.createElement(\"div\",{className:\"button\"},s.a.createElement(u.a,{content:\"gateway.copy_address\"}))):null,w?s.a.createElement(j.a,{text:w},s.a.createElement(\"div\",{className:\"button\"},s.a.createElement(u.a,{content:\"gateway.copy_memo\"}))):null,g?s.a.createElement(\"a\",{className:\"button\",href:h},s.a.createElement(u.a,{content:\"gateway.deposit_from_wallet\"}),\" \",this.props.deposit_asset):null),s.a.createElement(u.a,{className:\"has-error fz_14\",component:\"p\",content:\"gateway.min_deposit_warning_amount\",minDeposit:b,coin:this.props.deposit_asset}),s.a.createElement(u.a,{className:\"has-error fz_14\",component:\"p\",content:\"gateway.min_deposit_warning_asset\",minDeposit:b,coin:this.props.deposit_asset})))):s.a.createElement(\"div\",{className:\"rudex__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_withdraw\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(f.a,{name:this.props.receive_asset.get(\"symbol\"),replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_receive\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},this.props.deposit_asset)),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.intermediate\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(y.a,{account:this.props.issuer_account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),replace:!1}))))))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_inst\"}),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.withdraw_to\",asset:this.props.deposit_asset}),\":\"),s.a.createElement(\"div\",{className:\"button-group\",style:{paddingTop:20}},s.a.createElement(\"button\",{className:\"button success\",style:{fontSize:\"1.3rem\"},onClick:this.onWithdraw.bind(this)},s.a.createElement(u.a,{content:\"gateway.withdraw_now\"}),\" \"))),s.a.createElement(M.Modal,{onCancel:this.hideModal,title:x.a.translate(\"gateway.withdraw_coin\",{coin:this.props.deposit_asset_name,symbol:this.props.deposit_asset}),footer:null,visible:this.state.isModalVisible,id:r,overlay:!0},s.a.createElement(Wt.a,{hideModal:this.hideModal,showModal:this.showModal,account:this.props.account.get(\"name\"),issuer:this.props.issuer_account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),output_coin_name:this.props.deposit_asset_name,output_coin_symbol:this.props.deposit_asset,output_coin_type:this.props.deposit_coin_type,output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:v,modal_id:r,min_amount:this.props.min_amount,withdraw_fee:this.props.withdraw_fee,asset_precision:this.props.asset_precision,balance:this.props.account.get(\"balances\").toJS()[this.props.receive_asset.get(\"id\")]})))}}]),t}();Jt.propTypes={gateway:C.a.string,deposit_coin_type:C.a.string,deposit_asset_name:C.a.string,deposit_account:C.a.string,receive_coin_type:C.a.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,deposit_asset:C.a.string,deposit_wallet_type:C.a.string,receive_asset:p.a.ChainAsset,deprecated_in_favor_of:p.a.ChainAsset,deprecated_message:C.a.string,action:C.a.string,supports_output_memos:C.a.bool.isRequired,min_amount:C.a.number,deposit_fee:C.a.number,withdraw_fee:C.a.number,asset_precision:C.a.number};var Gt=Object(d.a)(Jt,{keep_updating:!0}),Xt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var zt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={activeCoin:a._getActiveCoin(e,{action:\"deposit\"}),action:e.viewSettings.get(\"xbtsxAction\",\"deposit\")},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Xt(t,[{key:\"_getActiveCoin\",value:function(e,t){var a=e.viewSettings.get(\"activeCoin_xbtsx_\"+t.action,null),n=null;return\"deposit\"==t.action&&(n=\"PPY\"),\"withdraw\"==t.action&&(n=\"PPY\"),a||n}},{key:\"componentWillReceiveProps\",value:function(e){e.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(e,this.state.action)})}},{key:\"onSelectCoin\",value:function(e){this.setState({activeCoin:e.target.value});var t={};t[\"activeCoin_xbtsx_\"+this.state.action]=e.target.value,F.a.changeViewSetting(t)}},{key:\"changeAction\",value:function(e){var t=this._getActiveCoin(this.props,{action:e});this.setState({action:e,activeCoin:t}),F.a.changeViewSetting(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},\"xbtsxAction\",e))}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.coins,n=t.account,i=this.state,o=i.activeCoin,r=i.action;if(!a.length)return s.a.createElement(v.a,null);var l=a.filter(function(e){return!(!e||!e.symbol)&&(\"deposit\"===r?e.depositAllowed:e.withdrawalAllowed)}),c=l.map(function(e){var t=\"deposit\"===r?e.backingCoin.toUpperCase():e.symbol;return s.a.createElement(\"option\",{value:t,key:e.symbol},t)}).filter(function(e){return null!==e}),p=l.filter(function(e){return\"deposit\"===r?e.backingCoin.toUpperCase()===o:e.symbol===o})[0];p||(p=l[0]);var d=\"deposit\"===this.state.action;return s.a.createElement(\"div\",{style:this.props.style},s.a.createElement(\"div\",{className:\"grid-block no-margin vertical medium-horizontal no-padding\"},s.a.createElement(\"div\",{className:\"medium-4\"},s.a.createElement(\"div\",null,s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.choose_\"+r}),\":\",\" \"),s.a.createElement(\"select\",{className:\"external-coin-types bts-select\",onChange:this.onSelectCoin.bind(this),value:o},c))),s.a.createElement(\"div\",{className:\"medium-6 medium-offset-1\"},s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.gateway_text\"}),\":\"),s.a.createElement(\"div\",{style:{paddingBottom:15}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},s.a.createElement(\"li\",{className:\"deposit\"===r?\"is-active\":\"\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"deposit\")},s.a.createElement(u.a,{content:\"gateway.deposit\"}))),s.a.createElement(\"li\",{className:\"withdraw\"===r?\"is-active\":\"\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"withdraw\")},s.a.createElement(u.a,{content:\"gateway.withdraw\"}))))))),p?s.a.createElement(\"div\",null,s.a.createElement(\"div\",{style:{marginBottom:15}},s.a.createElement(Gt,{key:\"\"+p.symbol,gateway:p.gatewayWallet,issuer_account:p.issuer,account:n,deposit_asset:p.backingCoin.toUpperCase(),deposit_asset_name:p.name,deposit_coin_type:p.backingCoin.toLowerCase(),deposit_account:p.gatewayWallet,deposit_wallet_type:p.walletType,receive_asset:p.symbol,receive_coin_type:p.symbol.toLowerCase(),supports_output_memos:p.memoSupport,min_amount:p.minAmount,asset_precision:p.precision,action:this.state.action}),s.a.createElement(\"label\",{className:\"left-label\"},\"Support\"),s.a.createElement(\"div\",null,s.a.createElement(u.a,{content:\"gateway.xbtsx.support_block\"}),s.a.createElement(\"br\",null),s.a.createElement(\"br\",null),s.a.createElement(\"a\",{href:\"https://t.me/xbtsio\",target:\"_blank\",rel:\"noopener noreferrer\"},\"https://t.me/xbtsio\"))),p&&p.symbol?s.a.createElement(R.b,{asset:p.symbol,fromAccount:d?p.issuerId:this.props.account.get(\"id\"),to:d?this.props.account.get(\"id\"):p.issuerId},function(t){var a=t.asset,n=t.to,i=t.fromAccount;return s.a.createElement(R.a,{accountsList:W.a.List([e.props.account.get(\"id\")]),limit:10,compactView:!0,fullHeight:!0,filter:\"transfer\",title:s.a.createElement(u.a,{content:\"gateway.recent_\"+e.state.action}),customFilter:{fields:[\"to\",\"from\",\"asset_id\"],values:{to:n.get(\"id\"),from:i.get(\"id\"),asset_id:a.get(\"id\")}}})}):null):null)}}]),t}(),Kt=Object(i.a)(zt,{listenTo:function(){return[D.a]},getProps:function(){return{viewSettings:D.a.getState().viewSettings}}}),Qt=a(2274),Yt=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var Zt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),Yt(t,[{key:\"_getLabelClass\",value:function(e){return\"warn\"===e||\"warning\"===e?\"warning\":\"error\"===e||\"alert\"===e?\"alert\":\"\"}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.asset,n=t.style;if(!a||!a.info||!a.info.length>0)return s.a.createElement(\"span\",null);var i={whiteSpace:\"normal\",lineHeight:1.4};return s.a.createElement(\"div\",{style:n||{}},a.info.map(function(t,a){if(!t.section||\"deposit\"===t.section)return s.a.createElement(\"label\",{key:\"depositInfo\"+a,className:\"label \"+e._getLabelClass(t.type),style:i},t.text)}))}}]),t}(),$t=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var ea=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),$t(t,[{key:\"render\",value:function(){var e=this.props.asset;return e&&e.depositFeeEnabled?s.a.createElement(u.a,{component:\"label\",className:\"label warning\",style:{whiteSpace:\"normal\",lineHeight:1.4},content:\"cryptrade.gateway.deposit_to_fee_warning\",with:{asset:e.name,fee_time_frame:e.depositFeeTimeframe,fee_percentage:e.depositFeePercentage,fee_percentage_low_amounts:e.depositFeePercentageLowAmounts,fee_minimum:e.depositFeeMinimum}}):s.a.createElement(\"span\",null)}}]),t}(),ta=a(126),aa=a(43),na=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var sa=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a._unlockWallet=function(){aa.a.unlock().then(function(){te.a.tryToSetCurrentAccount()}).catch(function(){})},a.state={isModalVisible:!1,receive_address:null,loading:!1,emptyAddressDeposit:!1},a.addDepositAddress=a.addDepositAddress.bind(a),a._copy=a._copy.bind(a),a.showModal=a.showModal.bind(a),a.hideModal=a.hideModal.bind(a),document.addEventListener(\"copy\",a._copy),a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),na(t,[{key:\"showModal\",value:function(){this.setState({isModalVisible:!0})}},{key:\"hideModal\",value:function(){this.setState({isModalVisible:!1})}},{key:\"_copy\",value:function(e){try{this.state.clipboardText?e.clipboardData.setData(\"text/plain\",this.state.clipboardText):e.clipboardData.setData(\"text/plain\",x.a.translate(\"gateway.use_copy_button\").toUpperCase()),e.preventDefault()}catch(e){console.error(e)}}},{key:\"_getDepositObject\",value:function(){return{inputCoinType:ta.a.addCryptradeNameSpace(this.props.deposit_coin_type).toLowerCase(),outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get(\"name\"),url:w.e.BASE,stateCallback:this.addDepositAddress}}},{key:\"componentWillMount\",value:function(){H.a.isLocked()&&this._unlockWallet(),Object(g.j)({coin:this.props.receive_coin_type,account:this.props.account.get(\"name\"),stateCallback:this.addDepositAddress})}},{key:\"componentWillUnmount\",value:function(){document.removeEventListener(\"copy\",this._copy)}},{key:\"componentWillReceiveProps\",value:function(e){e.account!==this.props.account&&Object(g.j)({coin:e.receive_coin_type,account:e.account.get(\"name\"),stateCallback:this.addDepositAddress})}},{key:\"addDepositAddress\",value:function(e){e.error&&(\"no_address\"===e.error.message?this.setState({emptyAddressDeposit:!0}):this.setState({emptyAddressDeposit:!1})),this.setState({receive_address:e}),this.setState({loading:!1}),this.setState({receive_address:e})}},{key:\"requestDepositAddressLoad\",value:function(){this.setState({loading:!0,emptyAddressDeposit:!1}),Object(g.l)(this._getDepositObject())}},{key:\"getWithdrawModalId\",value:function(){return\"withdraw_asset_\"+this.props.issuer_account.get(\"name\")+\"_\"+this.props.receive_asset.get(\"symbol\")}},{key:\"onWithdraw\",value:function(){this.showModal()}},{key:\"toClipboard\",value:function(e){try{this.setState({clipboardText:e},function(){document.execCommand(\"copy\")})}catch(e){console.error(e)}}},{key:\"render\",value:function(){var e=\"deposit\"===this.props.action,t=s.a.createElement(v.a,null);if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return t;var a=this.props.account.get(\"balances\"),n=this.props,i=n.gate_fee,o=n.min_deposit;this.props.receive_asset.get(\"symbol\");if(this.props.deprecated_in_favor_of){var r=!1,l=a.get(this.props.receive_asset.get(\"id\"));if(l){var c=m.ChainStore.getObject(l);if(c)0!=c.get(\"balance\")&&(r=!0)}if(!r)return t}var p=this.state.receive_address,d=this.state.emptyAddressDeposit,h=this.state.loading;if(!p)return s.a.createElement(\"div\",{style:{margin:\"3rem\"}},s.a.createElement(v.a,{type:\"three-bounce\"}));var g=this.getWithdrawModalId(),b=null,E=null,k=\"\",C=void 0,S=\"\";if(this.props.deposit_account?(b=s.a.createElement(\"span\",null,this.props.deposit_account),k=this.props.receive_coin_type+\":\"+this.props.account.get(\"name\"),E=s.a.createElement(\"span\",null,k),S=this.props.deposit_coin_type+\":\"):p.memo?(C=p.memo,k=p.address,b=s.a.createElement(\"span\",null,p.address),E=s.a.createElement(\"span\",null,p.memo)):(k=p.address,b=s.a.createElement(\"span\",null,p.address)),!this.props.is_available||e&&!this.props.deposit_account&&!p||p&&(\"unknown\"===p.address||\"Failed to fetch\"===p.address))return s.a.createElement(\"div\",null,s.a.createElement(u.a,{className:\"txtlabel cancel\",content:\"gateway.unavailable\",component:\"h4\"}));var A={fontWeight:\"bold\",color:\"#4A90E2\",textAlign:\"right\"},O={whiteSpace:\"normal\",lineHeight:1.4};return e?s.a.createElement(\"div\",{className:\"Blocktrades__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_deposit\"}),s.a.createElement(\"td\",{style:A},ta.a.replaceAssetSymbol(this.props.deposit_asset))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.your_account\"}),s.a.createElement(\"td\",{style:A},s.a.createElement(y.a,{account:this.props.account.get(\"id\")}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:A},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"cryptrade.gateway.deposit_minimum\"}),\":\"),s.a.createElement(\"td\",{style:A},(o||2*i)+\" \",s.a.createElement(f.a,{name:this.props.receive_asset.get(\"symbol\")}))),this.props.required_confirmations>0&&s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"cryptrade.gateway.required_confirmations\"}),\":\"),s.a.createElement(\"td\",{style:A},this.props.required_confirmations)))))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.deposit_inst\"}),s.a.createElement(\"div\",{className:\"grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-7 large-9\",style:{paddingRight:\"1rem\"}},s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.deposit_to\",asset:ta.a.replaceAssetSymbol(this.props.deposit_asset)}),\":\"),s.a.createElement(\"label\",{className:\"fz_12 left-label\"},s.a.createElement(u.a,{content:\"gateway.deposit_notice_delay\"})),s.a.createElement(ea,{asset:{name:ta.a.replaceAssetSymbol(this.props.deposit_asset),depositFeeEnabled:this.props.deposit_fee_enabled,depositFeeTimeframe:this.props.deposit_fee_time_frame,depositFeePercentage:this.props.deposit_fee_percentage,depositFeePercentageLowAmounts:this.props.deposit_fee_percentage_low_amounts,depositFeeMinimum:this.props.deposit_fee_minimum}}),s.a.createElement(Zt,{asset:{info:this.props.coin_info}}),H.a.isLocked()?s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(u.a,{className:\"label alert\",component:\"label\",content:\"cryptrade.gateway.deposit_login\",style:O}),s.a.createElement(\"div\",null,s.a.createElement(\"button\",{className:\"button primary\",onClick:this._unlockWallet},s.a.createElement(u.a,{content:\"header.unlock_short\"})))):null,s.a.createElement(u.a,{className:\"label warning\",component:\"label\",content:\"gateway.min_deposit_warning_asset\",minDeposit:o||2*i,coin:ta.a.replaceAssetSymbol(this.props.deposit_asset),style:O}),H.a.isLocked()?null:s.a.createElement(\"div\",null,d?s.a.createElement(u.a,{content:\"gateway.please_generate_address\"}):b,s.a.createElement(\"div\",null,E&&s.a.createElement(\"span\",null,\"memo: \",E)),s.a.createElement(\"div\",{className:\"button-group\",style:{paddingTop:10}},b?s.a.createElement(\"div\",{className:\"button\",onClick:this.toClipboard.bind(this,k)},s.a.createElement(u.a,{content:\"gateway.copy_address\"})):null,C?s.a.createElement(\"div\",{className:\"button\",onClick:this.toClipboard.bind(this,C)},s.a.createElement(u.a,{content:\"gateway.copy_memo\"})):null,s.a.createElement(\"button\",{className:\"button spinner-button-circle\",onClick:this.requestDepositAddressLoad.bind(this)},h?s.a.createElement(v.a,{type:\"circle\"}):null,s.a.createElement(u.a,{content:\"gateway.generate_new\"}))))),H.a.isLocked()?null:s.a.createElement(\"div\",{className:\"small-12 medium-5 large-3\"},b&&!C&&k&&s.a.createElement(mt.a,{size:140,value:k}))))):s.a.createElement(\"div\",{className:\"Blocktrades__gateway grid-block no-padding no-margin\"},s.a.createElement(\"div\",{className:\"small-12 medium-5\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_summary\"}),s.a.createElement(\"div\",{className:\"small-12 medium-10\"},s.a.createElement(\"table\",{className:\"table\"},s.a.createElement(\"tbody\",null,s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_withdraw\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(f.a,{name:this.props.receive_asset.get(\"symbol\"),replace:!1}))),s.a.createElement(\"tr\",null,s.a.createElement(u.a,{component:\"td\",content:\"gateway.asset_to_receive\"}),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},ta.a.replaceAssetSymbol(this.props.deposit_asset))),s.a.createElement(\"tr\",null,s.a.createElement(\"td\",null,s.a.createElement(u.a,{content:\"gateway.balance\"}),\":\"),s.a.createElement(\"td\",{style:{fontWeight:\"bold\",color:\"#049cce\",textAlign:\"right\"}},s.a.createElement(_.a,{account:this.props.account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),replace:!1}))))))),s.a.createElement(\"div\",{className:\"small-12 medium-7\"},s.a.createElement(u.a,{component:\"h4\",content:\"gateway.withdraw_inst\"}),s.a.createElement(\"label\",{className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.withdraw_to\",asset:this.props.deposit_asset}),\":\"),s.a.createElement(\"div\",{className:\"button-group\",style:{paddingTop:20}},s.a.createElement(\"button\",{className:\"button success\",style:{fontSize:\"1.3rem\"},onClick:this.onWithdraw.bind(this)},s.a.createElement(u.a,{content:\"gateway.withdraw_now\"}),\" \"))),s.a.createElement(M.Modal,{onCancel:this.hideModal,title:x.a.translate(\"gateway.withdraw_coin\",{coin:this.props.deposit_asset_name,symbol:ta.a.replaceAssetSymbol(this.props.deposit_asset)}),footer:null,visible:this.state.isModalVisible,id:g,overlay:!0},s.a.createElement(Qt.a,{hideModal:this.hideModal,showModal:this.showModal,account:this.props.account.get(\"name\"),issuer:this.props.issuer_account.get(\"name\"),asset:this.props.receive_asset.get(\"symbol\"),url:w.e.BASE,output_coin_name:this.props.deposit_asset_name,gateFee:i,output_coin_symbol:this.props.deposit_asset,output_coin_type:ta.a.addCryptradeNameSpace(this.props.deposit_coin_type).toLowerCase(),output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:S,modal_id:g,balance:this.props.account.get(\"balances\").toJS()[this.props.receive_asset.get(\"id\")]})))}}]),t}();sa.propTypes={gateway:C.a.string,deposit_coin_type:C.a.string,deposit_asset_name:C.a.string,deposit_account:C.a.string,receive_coin_type:C.a.string,account:p.a.ChainAccount,issuer_account:p.a.ChainAccount,deposit_asset:C.a.string,deposit_wallet_type:C.a.string,receive_asset:p.a.ChainAsset,deprecated_in_favor_of:p.a.ChainAsset,deprecated_message:C.a.string,action:C.a.string,supports_output_memos:C.a.bool.isRequired,gate_fee:C.a.number,min_deposit:C.a.number,is_available:C.a.bool.isRequired,required_confirmations:C.a.number,deposit_fee_enabled:C.a.bool.isRequired,deposit_fee_time_frame:C.a.number,deposit_fee_percentage:C.a.number,deposit_fee_minimum:C.a.number,deposit_fee_percentage_low_amounts:C.a.number,coin_info:C.a.arrayOf(C.a.object)},sa.defaultProps={autosubscribe:!1,required_confirmations:0,deposit_fee_enabled:!1,deposit_fee_time_frame:0,deposit_fee_percentage:0,deposit_fee_minimum:0,deposit_fee_percentage_low_amounts:0,gate_fee:0,min_deposit:0,coin_info:[]};var ia=Object(d.a)(sa,{keep_updating:!0}),oa=a(414),ra=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var la=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t),function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ra(t,[{key:\"render\",value:function(){var e=this.props,t=e.asset,a=e.deposit,n={whiteSpace:\"normal\",lineHeight:1.4},i=ta.a.getTradingPairInfoMessages(t,a).map(function(e,t){return s.a.createElement(\"label\",{className:\"label warning\",key:\"tradingPairInfo\"+t,style:n},e.message)});return i.length?i:null}}]),t}(),ca=a(31),ua=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var pa=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.onAssetSelected=function(e){a.setState({activeCoin:e});var t={};t[\"activeCoin_\"+a.props.provider]=e,F.a.changeViewSetting(t)},a.state={activeCoin:a._getActiveCoin(e),action:e.viewSettings.get(e.provider+\"Action\",\"deposit\")},a}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.a.Component),ua(t,[{key:\"_getActiveCoin\",value:function(e){var t=e.viewSettings.get(\"activeCoin_\"+e.provider,null);return t||\"CRCO\"}},{key:\"componentWillReceiveProps\",value:function(e){e.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(e)})}},{key:\"changeAction\",value:function(e){var t=this._getActiveCoin(this.props);this.setState({action:e,activeCoin:t}),F.a.changeViewSetting(function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}({},this.props.provider+\"Action\",e))}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.coins,n=t.account,i=t.provider,o=this.state,r=o.activeCoin,l=o.action,c=\"deposit\"===this.state.action,p={name:Object(ca.g)().name,id:Object(ca.g)().id,support:Object(ca.j)()};if(!a.length)return s.a.createElement(v.a,null);var d=a.filter(function(e){return!(!e||!e.symbol)&&(\"deposit\"===l?e.depositAllowed:e.withdrawalAllowed)}),m=d.map(function(e){return e.backingCoinType.toUpperCase()}),h=d.filter(function(e){return c?ta.a.getCleanAssetSymbol(e.backingCoinType)===r:ta.a.getCleanAssetSymbol(e.symbol)===r})[0];h||(h=d[0]);var _=ta.a.getTradingPairInfoMessages(h,c);return s.a.createElement(\"div\",{style:this.props.style},s.a.createElement(\"div\",{className:\"grid-block no-margin vertical medium-horizontal no-padding\"},s.a.createElement(\"div\",{className:\"medium-4\"},s.a.createElement(\"div\",null,s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.choose_\"+l}),\":\",\" \"),s.a.createElement(oa.a,{onSelect:this.onAssetSelected.bind(this),include:m,selectOnBlur:!0,defaultValue:ta.a.getCleanAssetSymbol(h.symbol),includeBTS:!1,usageContext:l,noLabel:!0}))),s.a.createElement(\"div\",{className:\"medium-6 medium-offset-1\"},s.a.createElement(\"div\",null,s.a.createElement(\"label\",{style:{minHeight:\"2rem\"},className:\"left-label\"},s.a.createElement(u.a,{content:\"gateway.gateway_text\"}),\":\"),s.a.createElement(\"div\",{style:{paddingBottom:15}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},h.depositAllowed?s.a.createElement(\"li\",{className:c?\"is-active\":\"\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"deposit\")},s.a.createElement(u.a,{content:\"gateway.deposit\"}))):null,h.withdrawalAllowed?s.a.createElement(\"li\",{className:c?\"\":\"is-active\"},s.a.createElement(\"a\",{onClick:this.changeAction.bind(this,\"withdraw\")},s.a.createElement(u.a,{content:\"gateway.withdraw\"}))):null))),_.length?s.a.createElement(\"div\",null,s.a.createElement(la,{asset:h,deposit:c})):null)),h?s.a.createElement(\"div\",null,s.a.createElement(\"div\",{style:{marginBottom:15,marginTop:_.length?30:0}},_.length?null:s.a.createElement(ia,{key:\"\"+h.symbol,gateway:i,issuer_account:p.name,account:n,deposit_asset:ta.a.getCleanAssetSymbol(h.backingCoinType),deposit_asset_name:h.name,deposit_coin_type:h.backingCoinType.toLowerCase(),deposit_account:h.depositAccount,deposit_wallet_type:h.walletType,receive_asset:h.symbol,receive_coin_type:h.symbol.toLowerCase(),supports_output_memos:!0===h.supportsMemos,gate_fee:parseFloat(h.gateFee||0),min_deposit:h.minAmount,asset_precision:h.precision,action:this.state.action,is_available:h.isAvailable,required_confirmations:h.requiredConfirmations,deposit_fee_enabled:!0===h.depositFeeEnabled,deposit_fee_time_frame:h.depositFeeTimeframe,deposit_fee_percentage:h.depositFeePercentage,deposit_fee_minimum:h.depositFeeMinimum,deposit_fee_percentage_low_amounts:h.depositFeePercentageLowAmounts,coin_info:h.info}),s.a.createElement(\"label\",{className:\"left-label\"},\"Support\"),s.a.createElement(\"div\",null,s.a.createElement(u.a,{content:\"cryptrade.gateway.support_block\"}),s.a.createElement(\"br\",null),s.a.createElement(\"br\",null),s.a.createElement(\"a\",{href:\"mailto:\"+p.support,target:\"_blank\",rel:\"noopener noreferrer\"},p.support))),h&&h.symbol?s.a.createElement(R.b,{asset:h.symbol,fromAccount:c?p.id:this.props.account.get(\"id\"),to:c?this.props.account.get(\"id\"):p.id},function(t){var a=t.asset,n=t.to,i=t.fromAccount;return s.a.createElement(R.a,{accountsList:W.a.List([e.props.account.get(\"id\")]),limit:10,compactView:!0,fullHeight:!0,filter:\"transfer\",title:s.a.createElement(u.a,{content:\"gateway.recent_\"+e.state.action}),customFilter:{fields:[\"to\",\"from\",\"asset_id\"],values:{to:n.get(\"id\"),from:i.get(\"id\"),asset_id:a.get(\"id\")}}})}):null):null)}}]),t}();pa.propTypes={account:p.a.ChainAccount,coins:C.a.array,provider:C.a.string},pa.defaultProps={provider:\"cryptrade\"};var da=Object(i.a)(pa,{listenTo:function(){return[D.a]},getProps:function(){return{viewSettings:D.a.getState().viewSettings}}}),ma=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function ha(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function _a(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function fa(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ya=function(e){function t(e){ha(this,t);var a=_a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={olService:e.viewSettings.get(\"olService\",\"gateway\"),rudexService:e.viewSettings.get(\"rudexService\",\"gateway\"),bitsparkService:e.viewSettings.get(\"bitsparkService\",\"gateway\"),xbtsxService:e.viewSettings.get(\"xbtsxService\",\"gateway\"),btService:e.viewSettings.get(\"btService\",\"bridge\"),citadelService:e.viewSettings.get(\"citadelService\",\"bridge\"),metaService:e.viewSettings.get(\"metaService\",\"bridge\"),activeService:e.viewSettings.get(\"activeService\",0)},a}return fa(t,s.a.Component),ma(t,[{key:\"shouldComponentUpdate\",value:function(e,t){return!(e.account===this.props.account&&e.servicesDown===this.props.servicesDown&&l.a.are_equal_shallow(e.blockTradesBackedCoins,this.props.blockTradesBackedCoins)&&l.a.are_equal_shallow(e.openLedgerBackedCoins,this.props.openLedgerBackedCoins)&&l.a.are_equal_shallow(e.citadelBackedCoins,this.props.citadelBackedCoins)&&l.a.are_equal_shallow(e.cryptradeBackedCoins,this.props.cryptradeBackedCoins)&&t.olService===this.state.olService&&t.rudexService===this.state.rudexService&&t.bitsparkService===this.state.bitsparkService&&t.xbtsxService===this.state.xbtsxService&&t.btService===this.state.btService&&t.citadelService===this.state.citadelService&&t.metaService===this.state.metaService&&t.activeService===this.state.activeService)}},{key:\"componentWillMount\",value:function(){o.a.getFinalFeeAsset(this.props.account,\"transfer\")}},{key:\"toggleOLService\",value:function(e){this.setState({olService:e}),F.a.changeViewSetting({olService:e})}},{key:\"toggleRuDEXService\",value:function(e){this.setState({rudexService:e}),F.a.changeViewSetting({rudexService:e})}},{key:\"toggleXbtsxService\",value:function(e){this.setState({xbtsxService:e}),F.a.changeViewSetting({xbtsxService:e})}},{key:\"toggleBitSparkService\",value:function(e){this.setState({bitsparkService:e}),F.a.changeViewSetting({bitsparkService:e})}},{key:\"toggleBTService\",value:function(e){this.setState({btService:e}),F.a.changeViewSetting({btService:e})}},{key:\"toggleCitadelService\",value:function(e){this.setState({citadelService:e}),F.a.changeViewSetting({citadelService:e})}},{key:\"toggleMetaService\",value:function(e){this.setState({metaService:e}),F.a.changeViewSetting({metaService:e})}},{key:\"onSetService\",value:function(e){this.setState({activeService:parseInt(e.target.value)}),F.a.changeViewSetting({activeService:parseInt(e.target.value)})}},{key:\"renderServices\",value:function(e,t,a,n,i){var o=[],r=this.props.account,l=this.state,c=l.olService,p=l.btService,d=l.rudexService,m=l.bitsparkService,h=l.xbtsxService,_=l.citadelService;return o.push({name:\"Cryptrade\",template:s.a.createElement(\"div\",null,s.a.createElement(da,{account:r,coins:i}))}),o.push({name:\"Openledger (OPEN.X)\",template:s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"div\",{className:\"service-selector\",style:{marginBottom:\"2rem\"}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},s.a.createElement(\"li\",{onClick:this.toggleOLService.bind(this,\"gateway\"),className:\"gateway\"===c?\"is-active\":\"\"},s.a.createElement(\"a\",null,s.a.createElement(u.a,{content:\"gateway.gateway\"}))),s.a.createElement(\"li\",{onClick:this.toggleOLService.bind(this,\"fiat\"),className:\"fiat\"===c?\"is-active\":\"\"},s.a.createElement(u.a,{component:\"a\",content:\"gateway.fiat\"})))),\"gateway\"===c&&e.length?s.a.createElement(V,{account:r,coins:e,provider:\"openledger\"}):null,\"fiat\"===c?s.a.createElement(\"div\",null,s.a.createElement(\"div\",{style:{paddingBottom:15}},s.a.createElement(u.a,{component:\"h5\",content:\"gateway.fiat_text\",unsafe:!0})),s.a.createElement(pe,{rpc_url:w.h.RPC_URL,account:r,issuer_account:\"openledger-fiat\"}),s.a.createElement(he,{rpc_url:w.h.RPC_URL,account:r})):null)}),o.push({name:\"RuDEX (RUDEX.X)\",template:s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"div\",{className:\"service-selector\",style:{marginBottom:\"2rem\"}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},s.a.createElement(\"li\",{onClick:this.toggleRuDEXService.bind(this,\"gateway\"),className:\"gateway\"===d?\"is-active\":\"\"},s.a.createElement(\"a\",null,s.a.createElement(u.a,{content:\"gateway.gateway\"}))),s.a.createElement(\"li\",{onClick:this.toggleRuDEXService.bind(this,\"fiat\"),className:\"fiat\"===d?\"is-active\":\"\"},s.a.createElement(\"a\",null,\"Fiat\")))),\"gateway\"===d&&t.length?s.a.createElement(Ve,{account:r,coins:t}):null,\"fiat\"===d?s.a.createElement(\"div\",null,s.a.createElement(u.a,{content:\"gateway.rudex.coming_soon\"})):null)}),o.push({name:\"BitSpark (SPARKDEX.X)\",template:s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"div\",{className:\"service-selector\",style:{marginBottom:\"2rem\"}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},s.a.createElement(\"li\",{onClick:this.toggleBitSparkService.bind(this,\"gateway\"),className:\"gateway\"===m?\"is-active\":\"\"},s.a.createElement(\"a\",null,s.a.createElement(u.a,{content:\"gateway.gateway\"}))))),\"gateway\"===m&&a.length?s.a.createElement(tt,{account:r,coins:a,provider:\"bitspark\"}):null)}),o.push({name:\"XBTS (XBTSX.X)\",template:s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"div\",{className:\"service-selector\",style:{marginBottom:\"2rem\"}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},s.a.createElement(\"li\",{onClick:this.toggleXbtsxService.bind(this,\"gateway\"),className:\"gateway\"===h?\"is-active\":\"\"},s.a.createElement(\"a\",null,s.a.createElement(u.a,{content:\"gateway.gateway\"}))),s.a.createElement(\"li\",{onClick:this.toggleXbtsxService.bind(this,\"fiat\"),className:\"fiat\"===h?\"is-active\":\"\"},s.a.createElement(\"a\",null,\"Fiat\")))),\"gateway\"===h&&n.length?s.a.createElement(Kt,{account:r,coins:n}):null,\"fiat\"===h?s.a.createElement(\"div\",null,s.a.createElement(u.a,{content:\"gateway.xbtsx.coming_soon\"})):null)}),o.push({name:\"BlockTrades\",template:s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"div\",{className:\"service-selector\",style:{marginBottom:\"2rem\"}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},s.a.createElement(\"li\",{onClick:this.toggleBTService.bind(this,\"bridge\"),className:\"bridge\"===p?\"is-active\":\"\"},s.a.createElement(\"a\",null,s.a.createElement(u.a,{content:\"gateway.bridge\"}))))),s.a.createElement(_e.a,{gateway:\"blocktrades\",issuer_account:\"blocktrades\",account:r,initial_deposit_input_coin_type:\"btc\",initial_deposit_output_coin_type:\"bts\",initial_deposit_estimated_input_amount:\"1.0\",initial_withdraw_input_coin_type:\"bts\",initial_withdraw_output_coin_type:\"btc\",initial_withdraw_estimated_input_amount:\"100000\",initial_conversion_input_coin_type:\"bts\",initial_conversion_output_coin_type:\"bitbtc\",initial_conversion_estimated_input_amount:\"1000\"})),s.a.createElement(\"div\",{className:\"content-block\"}))}),o.push({name:\"Citadel\",template:s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"content-block\"},s.a.createElement(\"div\",{className:\"service-selector\",style:{marginBottom:\"2rem\"}},s.a.createElement(\"ul\",{className:\"button-group segmented no-margin\"},s.a.createElement(\"li\",{onClick:this.toggleCitadelService.bind(this,\"bridge\"),className:\"bridge\"===_?\"is-active\":\"\"},s.a.createElement(\"a\",null,s.a.createElement(u.a,{content:\"gateway.bridge\"}))))),s.a.createElement(Me,{gateway:\"citadel\",issuer_account:\"citadel-wallet\",account:r,initial_deposit_input_coin_type:\"xmr\",initial_deposit_output_coin_type:\"citadel.monero\",initial_deposit_estimated_input_amount:\"1.0\",initial_withdraw_input_coin_type:\"citadel.monero\",initial_withdraw_output_coin_type:\"xmr\",initial_withdraw_estimated_input_amount:\"1.0\"})),s.a.createElement(\"div\",{className:\"content-block\"}))}),o.push({name:\"BitKapital\",template:s.a.createElement(Be.a,{viewSettings:this.props.viewSettings,account:r})}),o.push({name:\"GDEX\",template:s.a.createElement(\"div\",null,s.a.createElement(qt,{account:r,provider:\"gdex\"}))}),o}},{key:\"render\",value:function(){var e=this.props,t=e.account,a=e.servicesDown,n=this.state.activeService,i=this.props.openLedgerBackedCoins.map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),o=this.props.rudexBackedCoins.map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),r=this.props.bitsparkBackedCoins.map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),l=this.props.xbtsxBackedCoins.map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),c=this.props.cryptradeBackedCoins.map(function(e){return e}),p=this.renderServices(i,o,r,l,c),d=(p.map(function(e,t){return s.a.createElement(\"option\",{key:t,value:t},e.name)}),[\"Cryptrade\",\"GDEX\",\"OPEN\",\"RUDEX\",\"SPARKDEX\",\"TRADE\",\"BITKAPITAL\",\"XBTSX\",\"CITADEL\"][n]),m=a.get(d);return s.a.createElement(\"div\",{className:this.props.contained?\"grid-content\":\"grid-container\"},s.a.createElement(\"div\",{className:this.props.contained?\"\":\"grid-content\",style:{paddingTop:\"2rem\"}},s.a.createElement(u.a,{content:\"gateway.title\",component:\"h2\"}),s.a.createElement(\"div\",{className:\"grid-block vertical medium-horizontal no-margin no-padding\"},s.a.createElement(\"div\",{className:\"medium-6 show-for-medium\"},s.a.createElement(\"h3\",null,s.a.createElement(u.a,{content:\"cryptrade.gateway.deposit_or_withdrawal\"})),s.a.createElement(\"p\",null,s.a.createElement(u.a,{content:\"cryptrade.gateway.deposit_intro\"}))),s.a.createElement(\"div\",{className:\"medium-5 medium-offset-1\"},s.a.createElement(\"h3\",null,s.a.createElement(u.a,{content:\"cryptrade.gateway.receive_funds\"})),s.a.createElement(\"p\",null,s.a.createElement(u.a,{content:\"cryptrade.gateway.receive_funds_intro\",wallet_name:Object(ca.r)()}),s.a.createElement(\"strong\",null,t.get(\"name\"))))),s.a.createElement(\"div\",null,s.a.createElement(\"div\",{className:\"grid-block vertical medium-horizontal no-margin no-padding\"},s.a.createElement(\"div\",{className:\"medium-6 small-order-2 medium-order-1\"},m?s.a.createElement(u.a,{style:{color:\"red\",marginBottom:\"1em\",display:\"block\"},content:\"gateway.unavailable_\"+d}):null),s.a.createElement(\"div\",{className:\"medium-5 medium-offset-1 small-order-1 medium-order-2\",style:{paddingBottom:20}},s.a.createElement(u.a,{component:\"label\",className:\"left-label\",content:\"gateway.your_account\"}),s.a.createElement(\"div\",{className:\"inline-label\"},s.a.createElement(Je.a,{size:{height:40,width:40},account:t.get(\"name\"),custom_image:null}),s.a.createElement(\"input\",{type:\"text\",value:t.get(\"name\"),placeholder:null,disabled:!0,onChange:function(){},onKeyDown:function(){},tabIndex:1}))))),s.a.createElement(\"div\",{className:\"grid-content no-padding\",style:{paddingTop:15}},m?null:n&&p[n]?p[n].template:p[0].template)))}}]),t}();ya.propTypes={account:p.a.ChainAccount.isRequired,contained:C.a.bool},ya.defaultProps={contained:!1},ya=Object(d.a)(ya,{auth_required:!0,auth_required_redirect_home:!0});var ga=function(e){function t(){return ha(this,t),_a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return fa(t,s.a.Component),ma(t,[{key:\"componentWillMount\",value:function(){Object(r.g)()}},{key:\"render\",value:function(){return s.a.createElement(ya,this.props)}}]),t}();t.default=Object(i.a)(ga,{listenTo:function(){return[Ie.a,D.a,He.a]},getProps:function(){return{currentAccount:Ie.a.getState().currentAccount||Ie.a.getState().passwordAccount,account:Ie.a.getState().currentAccount,viewSettings:D.a.getState().viewSettings,backedCoins:He.a.getState().backedCoins,openLedgerBackedCoins:He.a.getState().backedCoins.get(\"OPEN\",[]),rudexBackedCoins:He.a.getState().backedCoins.get(\"RUDEX\",[]),bitsparkBackedCoins:He.a.getState().backedCoins.get(\"SPARKDEX\",[]),blockTradesBackedCoins:He.a.getState().backedCoins.get(\"TRADE\",[]),citadelBackedCoins:He.a.getState().backedCoins.get(\"CITADEL\",[]),xbtsxBackedCoins:He.a.getState().backedCoins.get(\"XBTSX\",[]),cryptradeBackedCoins:He.a.getState().backedCoins.get(\"CRYPTRADE\",[]),servicesDown:He.a.getState().down||{}}}})}}]);"],"mappings":"AAAA","sourceRoot":""}